!function(t){function e(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){(function(e){t.exports=e.TonicImageBuilder=r(38)}).call(e,function(){return this}())},function(t,e,r){var n,i;!function(o,a){n=[r(39),r(40)],i=function(t,e){return a(t,e,o)}.apply(e,n),!(void 0!==i&&(t.exports=i))}(this,function(t,e,r,n){function i(t,e){return function(){if(console.warn||console.log){var r="Warning, the "+t+" method has been deprecated. Please use "+e+" instead.";console.warn?console.warn(r):console.log(r)}return c.prototype[e].apply(this,arguments)}}function o(t,e,r){return function(n){m.resolver.compare(n.topic,t)&&(e.push(n),n.cacheKeys.push(t),r&&r(n))}}function a(t,e,r){return function(n,i,o){n===t&&o.splice(i,1),0===o.length&&delete r[e]}}function u(e,r,n,i){if(e.inactive=!0,i.splice(n,1),e.cacheKeys&&e.cacheKeys.length)for(var o;o=e.cacheKeys.pop();)t.each(r._cache[o],a(e,o,r._cache))}var s="|",l={cache:{},regex:{},compare:function(e,r){var n,i,o,a=this.cache[r+s+e];return a===!0?a:-1===e.indexOf("#")&&-1===e.indexOf("*")?a=this.cache[r+s+e]=r===e:((i=this.regex[e])||(n="^"+t.map(e.split("."),function(t){var e="";return o&&(e="#"!==o?"\\.\\b":"\\b"),e+="#"===t?"[\\s\\S]*":"*"===t?"[^.]+":t,o=t,e}).join("")+"$",i=this.regex[e]=new RegExp(n)),a=this.cache[r+s+e]=i.test(r))},reset:function(){this.cache={},this.regex={}},purge:function(e){var r=this,n=function(t,n){var i=n.split(s),o=i[0],a=i[1];"undefined"!=typeof e.topic&&e.topic!==o||"undefined"!=typeof e.binding&&e.binding!==a||delete r.cache[n]};"undefined"==typeof e?this.reset():t.each(this.cache,n)}},c=function(t,e,r){this.topic=t,this.callback=e,this.pipeline=[],this.cacheKeys=[],this._context=n,this.emitter=r},f=function(){var e;return function(r){var n=!1;return t.isString(r)?(n=r===e,e=r):(n=t.isEqual(r,e),e=t.clone(r)),!n}},h=function(){var e=[];return function(r){var n=!t.any(e,function(e){return t.isObject(r)||t.isArray(r)?t.isEqual(r,e):r===e});return n&&e.push(r),n}};c.prototype={"catch":function(t){var e=this.callback,r=function(){try{e.apply(this,arguments)}catch(r){t(r,arguments[0])}};return this.callback=r,this},defer:function(){return this.delay(0)},disposeAfter:function(e){if(!t.isNumber(e)||0>=e)throw new Error("The value provided to disposeAfter (maxCalls) must be a number greater than zero.");var r=this,n=t.after(e,t.bind(function(){r.unsubscribe()}));return r.pipeline.push(function(t,e,r){r(t,e),n()}),r},distinct:function(){return this.constraint(new h)},distinctUntilChanged:function(){return this.constraint(new f)},invokeSubscriber:function(t,e){if(!this.inactive){var r=this,n=r.pipeline,i=n.length,o=r._context,a=-1;if(i){n=n.concat([r.callback]);var u=function s(t,e){a+=1,i>a?n[a].call(o,t,e,s):r.callback.call(o,t,e)};u(t,e,0)}else r.callback.call(o,t,e)}},logError:function(){if(console){var t;t=console.warn?console.warn:console.log,this["catch"](t)}return this},once:function(){return this.disposeAfter(1)},unsubscribe:function(){this.inactive||this.emitter.off(this)},constraint:function(e){if(!t.isFunction(e))throw new Error("Predicate constraint must be a function");return this.pipeline.push(function(t,r,n){e.call(this,t,r)&&n(t,r)}),this},constraints:function(e){var r=this;return t.isArray(e)&&t.each(e,function(t){r.constraint(t)}),r},context:function(t){return this._context=t,this},debounce:function(e,r){if(!t.isNumber(e))throw new Error("Milliseconds must be a number");return this.pipeline.push(t.debounce(function(t,e,r){r(t,e)},e,!!r)),this},delay:function(e){if(!t.isNumber(e))throw new Error("Milliseconds must be a number");var r=this;return r.pipeline.push(function(t,r,n){setTimeout(function(){n(t,r)},e)}),this},throttle:function(e){if(!t.isNumber(e))throw new Error("Milliseconds must be a number");var r=function(t,e,r){r(t,e)};return this.pipeline.push(t.throttle(r,e)),this}},c.prototype.off=c.prototype.unsubscribe;for(var p=["withConstraint","withConstraints","withContext","withDebounce","withDelay","withThrottle"],g=["constraint","constraints","context","debounce","delay","throttle"],d=0;6>d;d++){var v=p[d];c.prototype[v]=i(v,g[d])}var b=Array.prototype.slice,m=function(){};return m.prototype={on:function(e,r){var n=this;n._subscriptions=n._subscriptions||{},n._subscriptions[e]=n._subscriptions[e]||[];var i=new c(e,r,n);return n._subscriptions[e].push(i),t.each(n._cache,function(t,e){o(e,t)(i)}),n._subscriptions[e][n._subscriptions[e].length-1]},once:function(t,e){return this.on(t,e).once()},off:function(e,r){var n=this;switch(n._subscriptions=n._subscriptions||{},n._cache=n._cache||{},arguments.length){case 0:t.each(n._subscriptions,function(e){t.each(e,function(t,r){u(t,n,r,e)})}),n._subscriptions={};break;case 1:var i="[object String]"===Object.prototype.toString.call(e)?"topic":e instanceof c?"def":"context";switch(i){case"topic":n._subscriptions[e]&&t.each(n._subscriptions[e],function(t,r){u(t,n,r,n._subscriptions[e])});break;case"context":t.each(n._subscriptions,function(r){t.each(t.clone(r),function(t,i){t._context===e&&u(t,n,i,r)})});break;default:t.each(n._subscriptions[e.topic],function(t,r){t===e&&u(t,n,r,n._subscriptions[e.topic])})}break;default:t.each(t.clone(n._subscriptions[e]),function(t,i){t._context===r&&u(t,n,i,n._subscriptions[e])})}},emit:function(e,r){var n=this.getEnvelope(e,r);this._cache=this._cache||{};var i=this._cache[e],a=function(t){t.invokeSubscriber(n.data,n)};if(i)t.each(b.call(i,0),a);else{i=this._cache[e]=[];var u=o(e,i,a);t.each(this._subscriptions,function(e){t.each(b.call(e,0),u)})}},getEnvelope:function(t,e){return{topic:t,timeStamp:new Date,data:e}}},m.resolver=l,m.debug=!1,m.SubscriptionDefinition=c,e(m),m.mixInto=function(t){e.punch(t,m.prototype)},m})},function(t,e){"use strict";function r(t,e){this.id="CanvasOffscreenBuffer_"+ ++n,this.el=document.createElement("canvas"),this.width=t,this.height=e,this.el.style.display="none",this.el.setAttribute("width",this.width),this.el.setAttribute("height",this.height),document.body.appendChild(this.el)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=r;var n=0;r.prototype.size=function(t,e){return t&&this.el.setAttribute("width",this.width=t),e&&this.el.setAttribute("height",this.height=e),[Number(this.width),Number(this.height)]},r.prototype.get2DContext=function(){return this.el.getContext("2d")},r.prototype.get3DContext=function(){return this.el.getContext("experimental-webgl",{preserveDrawingBuffer:!0})||this.el.getContext("webgl",{preserveDrawingBuffer:!0})},r.prototype.destroy=function(){this.el.parentNode.removeChild(this.el),this.el=null,this.width=null,this.height=null},r.prototype.toDataURL=function(t,e){return this.el.toDataURL(t,e)},t.exports=e["default"]},function(t,e){t.exports="\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n    gl_Position = vec4(a_position.xy, 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}\n"},function(t,e){"use strict";function r(t){var e=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),r=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);console.log("vertex texture image units: "+e),console.log("fragment texture image units: "+r),console.log("combined texture image units: "+n)}function n(t,e,r){var n=t.createShader(r);t.shaderSource(n,e),t.compileShader(n);var i=t.getShaderParameter(n,t.COMPILE_STATUS);if(!i){var o=t.getShaderInfoLog(n);return console.error("Error compiling shader '"+n+"':"+o),t.deleteShader(n),null}return n}function i(t,e){for(var r=t.createProgram(),n=0;n<e.length;n+=1)t.attachShader(r,e[n]);t.linkProgram(r);var i=t.getProgramParameter(r,t.LINK_STATUS);if(!i){var o=t.getProgramInfoLog(r);return console.error("Error in program linking:"+o),t.deleteProgram(r),null}return r.shaders=e,t.useProgram(r),r}function o(t,e,r,o){var a=r.programs[e],u=n(t,a.vertexShader,t.VERTEX_SHADER),s=n(t,a.fragmentShader,t.FRAGMENT_SHADER),c=i(t,[u,s]);return o.programs[e]=c,a.mapping&&l(t,e,a.mapping,r,o),c}function a(t,e,r){t.bindFramebuffer(t.FRAMEBUFFER,e),t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);var n=t.checkFramebufferStatus(t.FRAMEBUFFER);n!==t.FRAMEBUFFER_COMPLETE&&console.log("ERROR: There is a problem with the framebuffer: "+n),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}function u(t){var e=t.gl;for(var r in t.programs){for(var n=t.programs[r],i=n.shaders,o=i.length;o--;)e.deleteShader(i[o]);e.deleteProgram(n)}for(var a in t.framebuffers)e.deleteFramebuffer(t.framebuffers[a]);for(var u in t.textures)e.deleteTexture(t.textures[u]);for(var s in t.buffers)e.deleteBuffer(t.buffers[s])}function s(t,e){var r={gl:t,buffers:{},textures:{},framebuffers:{},programs:{}},n=e.resources.buffers||[],i=e.resources.textures||[],a=e.resources.framebuffers||[];n.forEach(function(e){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e.data,t.STATIC_DRAW),r.buffers[e.id]=n}),i.forEach(function(e){var n=t.createTexture(),i=e.pixelStore||[],o=e.texParameter||[];t.bindTexture(t.TEXTURE_2D,n),i.forEach(function(e){t.pixelStorei(t[e[0]],e[1])}),o.forEach(function(e){t.texParameteri(t.TEXTURE_2D,t[e[0]],t[e[1]])}),r.textures[e.id]=n}),a.forEach(function(e){var n=t.createFramebuffer();n.width=e.width,n.height=e.height,r.framebuffers[e.id]=n});for(var s in e.programs)o(t,s,e,r);return r.destroy=function(){u(r)},r}function l(t,e,r,n,i){var o=i.programs[e],a=n.mappings[r];a.forEach(function(e){var r=i.buffers[e.id];t.bindBuffer(t.ARRAY_BUFFER,r),o[e.name]=t.getAttribLocation(o,e.attribute),t.enableVertexAttribArray(o[e.name]),t.vertexAttribPointer.apply(t,[o[e.name]].concat(e.format)),t.bindBuffer(t.ARRAY_BUFFER,null)})}function c(t,e,r){this.gl=t,this.idx=0,this.fbos=e,this.textures=r,a(this.gl,this.fbos[0],this.textures[1]),a(this.gl,this.fbos[1],this.textures[0])}Object.defineProperty(e,"__esModule",{value:!0}),e.showGlInfo=r,e.createGLResources=s,e.applyProgramDataMapping=l,e.PingPong=c,c.prototype.swap=function(){this.idx++,this.idx%=2},c.prototype.clearFbo=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[0]),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[1]),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.idx=0},c.prototype.getFramebuffer=function(){return this.fbos[this.idx]},c.prototype.getRenderingTexture=function(){return this.textures[this.idx]}},function(t,e,r){function n(t,e){return i(o(t),e)}var i=r(41),o=r(50);t.exports=n},function(t,e){function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=r},function(t,e,r){var n;n=function(){function t(t){return null===t?"Null":t===e?"Undefined":r.exec(n.call(t))[1]}var e,r=/^\[object (.*)\]$/,n=Object.prototype.toString;return t}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,r){var n;n=function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}return t}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e){t.exports="\nprecision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    gl_FragColor = vec4(color.rgb, 1.0);\n    // gl_FragColor = color;\n}\n"},function(t,e){var r={};r.EPSILON=1e-6,r.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,r.RANDOM=Math.random,r.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var n=Math.PI/180;r.toRadian=function(t){return t*n},t.exports=r},function(t,e,r){"use strict";function n(t,e,r){return(e-t)*r+t}function i(t,e,r){var i=(r-t[0])/(e[0]-t[0]);return[n(t[1],e[1],i),n(t[2],e[2],i),n(t[3],e[3],i)]}function o(t,e){return[t[e].x,t[e].r,t[e].g,t[e].b]}function a(t,e){return t.x-e.x}function u(t){this.name=t,this.scalarRange=[0,1],this.delta=1,this.controlPoints=null,this.colorTableSize=256,this.colorTable=null,this.setPreset("spectralflip"),this.build()}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=u;var s=r(12),l=r(1),c="lookuptable.change",f=[];for(var h in s.lookuptables)f.push(h);l.mixInto(u),u.prototype.getName=function(){return this.name},u.prototype.getPresets=function(){return f},u.prototype.setPreset=function(t){this.colorTable=null,this.controlPoints=[];for(var e=s.lookuptables[t].controlpoints,r=e.length,n=0;r>n;n++)this.controlPoints.push({x:e[n].x,r:e[n].r,g:e[n].g,b:e[n].b});this.build(),this.emit(c,{change:"preset",lut:this})},u.prototype.getScalarRange=function(){return this.scalarRange},u.prototype.setScalarRange=function(t,e){this.scalarRange=[t,e],this.delta=e-t,this.emit(c,{change:"scalarRange",lut:this})},u.prototype.build=function(t){if(!this.colorTable){this.colorTable=[];for(var e=0,r=0;r<this.colorTableSize;r++){var n=r/(this.colorTableSize-1),a=o(this.controlPoints,e),u=o(this.controlPoints,e+1);n>u[0]&&(e+=1,a=o(this.controlPoints,e),u=o(this.controlPoints,e+1)),this.colorTable.push(i(a,u,n))}t&&this.emit(c,{change:"controlPoints",lut:this})}},u.prototype.setNumberOfColors=function(t){this.colorTableSize=t,this.colorTable=null,this.build(),this.emit(c,{change:"numberOfColors",lut:this})},u.prototype.getNumberOfControlPoints=function(){return this.controlPoints?this.controlPoints.length:0},u.prototype.removeControlPoint=function(t){return t>0&&t<this.controlPoints.length-1?(this.controlPoints.splice(t,1),this.colorTable=null,this.build(!0),!0):!1},u.prototype.getControlPoint=function(t){return this.controlPoints[t]},u.prototype.updateControlPoint=function(t,e){this.controlPoints[t]=e;var r=e.x;this.controlPoints.sort(a),this.colorTable=null,this.build(!0);for(var n=0;n<this.controlPoints.length;n++)if(this.controlPoints[n].x===r)return n;return 0},u.prototype.addControlPoint=function(t){this.controlPoints.push(t);var e=t.x;this.controlPoints.sort(a),this.colorTable=null,this.build(!0);for(var r=0;r<this.controlPoints.length;r++)if(this.controlPoints[r].x===e)return r;return-1},u.prototype.drawToCanvas=function(t){for(var e=this.colorTable,r=e.length,n=t.getContext("2d"),i=n.getImageData(0,0,r,1),o=0;r>o;o++)i.data[4*o+0]=Math.floor(255*e[o][0]),i.data[4*o+1]=Math.floor(255*e[o][1]),i.data[4*o+2]=Math.floor(255*e[o][2]),i.data[4*o+3]=255;n.putImageData(i,0,0)},u.prototype.getColor=function(t){var e=Math.floor(this.colorTableSize*(t-this.scalarRange[0])/this.delta);return 0>e?this.colorTable[0]:e>=this.colorTableSize?this.colorTable[this.colorTable.length-1]:this.colorTable[e]},u.prototype.destroy=function(){this.off(c)},u.prototype.onChange=function(t){return this.on(c,t)},t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={lookuptables:{spectralflip:{controlpoints:[{x:0,r:.3686274509803922,g:.3098039215686275,b:.6352941176470588},{x:.1,r:.196078431372549,g:.5333333333333333,b:.7411764705882353},{x:.2,r:.4,g:.7607843137254902,b:.6470588235294118},{x:.3,r:.6705882352941176,g:.8666666666666667,b:.6431372549019608},{x:.4,r:.9019607843137255,g:.9607843137254902,b:.596078431372549},{x:.5,r:1,g:1,b:.7490196078431373},{x:.6,r:.996078431372549,g:.8784313725490196,b:.5450980392156862},{x:.7,r:.9921568627450981,g:.6823529411764706,b:.3803921568627451},{x:.8,r:.9568627450980393,g:.4274509803921568,b:.2627450980392157},{x:.9,r:.8352941176470589,g:.2431372549019608,b:.3098039215686275},{x:1,r:.6196078431372549,g:.00392156862745098,b:.2588235294117647}],range:[0,1]},cold2warm:{controlpoints:[{x:0,r:.23137254902,g:.298039215686,b:.752941176471},{x:.5,r:.865,g:.865,b:.865},{x:1,r:.705882352941,g:.0156862745098,b:.149019607843}],range:[0,1]},rainbow:{controlpoints:[{x:0,r:0,g:0,b:1},{x:.25,r:0,g:1,b:1},{x:.5,r:0,g:1,b:0},{x:.75,r:1,g:1,b:0},{x:1,r:1,g:0,b:0}],range:[0,1]},"gray scale":{controlpoints:[{x:0,r:0,g:0,b:0},{x:1,r:1,g:1,b:1}],range:[0,1]},"gray scale flip":{controlpoints:[{x:0,r:1,g:1,b:1},{x:1,r:0,g:0,b:0}],range:[0,1]},spectral:{controlpoints:[{x:0,r:.6196078431372549,g:.00392156862745098,b:.2588235294117647},{x:.1,r:.8352941176470589,g:.2431372549019608,b:.3098039215686275},{x:.2,r:.9568627450980393,g:.4274509803921568,b:.2627450980392157},{x:.3,r:.9921568627450981,g:.6823529411764706,b:.3803921568627451},{x:.4,r:.996078431372549,g:.8784313725490196,b:.5450980392156862},{x:.5,r:1,g:1,b:.7490196078431373},{x:.6,r:.9019607843137255,g:.9607843137254902,b:.596078431372549},{x:.7,r:.6705882352941176,g:.8666666666666667,b:.6431372549019608},{x:.8,r:.4,g:.7607843137254902,b:.6470588235294118},{x:.9,r:.196078431372549,g:.5333333333333333,b:.7411764705882353},{x:1,r:.3686274509803922,g:.3098039215686275,b:.6352941176470588}],range:[0,1]},warm:{controlpoints:[{x:0,r:.4745098039215686,g:.09019607843137255,b:.09019607843137255},{x:.2,r:.7098039215686275,g:.00392156862745098,b:.00392156862745098},{x:.4,r:.9372549019607843,g:.2784313725490196,b:.09803921568627451},{x:.6,r:.9764705882352941,g:.5137254901960784,b:.1411764705882353},{x:.8,r:1,g:.7058823529411765,b:0},{x:1,r:1,g:.8980392156862745,b:.02352941176470588}],range:[0,1]},cool:{controlpoints:[{x:0,r:.4588235294117647,g:.6941176470588235,b:.00392156862745098},{x:.1666666666666667,r:.3450980392156863,g:.5019607843137255,b:.1607843137254902},{x:.3333333333333333,r:.3137254901960784,g:.8431372549019608,b:.7490196078431373},{x:.5,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.6666666666666666,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.8333333333333334,r:.6039215686274509,g:.407843137254902,b:1},{x:1,r:.3725490196078431,g:.2,b:.5019607843137255}],range:[0,1]},blues:{controlpoints:[{x:0,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.1666666666666667,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.3333333333333333,r:.3058823529411765,g:.8509803921568627,b:.9176470588235294},{x:.5,r:.4509803921568628,g:.6039215686274509,b:.8352941176470589},{x:.6666666666666666,r:.2588235294117647,g:.2392156862745098,b:.6627450980392157},{x:.8333333333333334,r:.3137254901960784,g:.3294117647058823,b:.5294117647058824},{x:1,r:.06274509803921569,g:.1647058823529412,b:.3215686274509804}],range:[0,1]},wildflower:{controlpoints:[{x:0,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.1666666666666667,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.3333333333333333,r:.4,g:.2431372549019608,b:.7176470588235294},{x:.5,r:.6352941176470588,g:.3294117647058823,b:.8117647058823529},{x:.6666666666666666,r:.8705882352941177,g:.3803921568627451,b:.807843137254902},{x:.8333333333333334,r:.8627450980392157,g:.3803921568627451,b:.5843137254901961},{x:1,r:.2392156862745098,g:.06274509803921569,b:.3215686274509804}],range:[0,1]},citrus:{controlpoints:[{x:0,r:.396078431372549,g:.4862745098039216,b:.2156862745098039},{x:.2,r:.4588235294117647,g:.6941176470588235,b:.00392156862745098},{x:.4,r:.6980392156862745,g:.7294117647058823,b:.1882352941176471},{x:.6,r:1,g:.8980392156862745,b:.02352941176470588},{x:.8,r:1,g:.7058823529411765,b:0},{x:1,r:.9764705882352941,g:.5137254901960784,b:.1411764705882353}],range:[0,1]},organge2purple:{controlpoints:[{x:0,r:.4980392156862745,g:.2313725490196079,b:.03137254901960784},{x:.1,r:.7019607843137254,g:.3450980392156863,b:.02352941176470588},{x:.2,r:.8784313725490196,g:.5098039215686274,b:.0784313725490196},{x:.3,r:.9921568627450981,g:.7215686274509804,b:.3882352941176471},{x:.4,r:.996078431372549,g:.8784313725490196,b:.7137254901960784},{x:.5,r:.9686274509803922,g:.9686274509803922,b:.9686274509803922},{x:.6,r:.8470588235294118,g:.8549019607843137,b:.9215686274509803},{x:.7,r:.6980392156862745,g:.6705882352941176,b:.8235294117647058},{x:.8,r:.5019607843137255,g:.4509803921568628,b:.6745098039215687},{x:.9,r:.3294117647058823,g:.1529411764705882,b:.5333333333333333},{x:1,r:.1764705882352941,g:0,b:.2941176470588235}],range:[0,1]},brown2green:{controlpoints:[{x:0,r:.3294117647058823,g:.1882352941176471,b:.0196078431372549},{x:.1,r:.5490196078431373,g:.3176470588235294,b:.0392156862745098},{x:.2,r:.7490196078431373,g:.5058823529411764,b:.1764705882352941},{x:.3,r:.8745098039215686,g:.7607843137254902,b:.4901960784313725},{x:.4,r:.9647058823529412,g:.9098039215686274,b:.7647058823529411},{x:.5,r:.9607843137254902,g:.9607843137254902,b:.9607843137254902},{x:.6,r:.7803921568627451,g:.9176470588235294,b:.8980392156862745},{x:.7,r:.5019607843137255,g:.803921568627451,b:.7568627450980392},{x:.8,r:.207843137254902,g:.592156862745098,b:.5607843137254902},{x:.9,r:.00392156862745098,g:.4,b:.3686274509803922},{x:1,r:0,g:.2352941176470588,b:.1882352941176471}],range:[0,1]},blue2green:{controlpoints:[{x:0,r:.9686274509803922,g:.9882352941176471,b:.9921568627450981},{x:.125,r:.8980392156862745,g:.9607843137254902,b:.9764705882352941},{x:.25,r:.8,g:.9254901960784314,b:.9019607843137255},{x:.375,r:.6,g:.8470588235294118,b:.788235294117647},{x:.5,r:.4,g:.7607843137254902,b:.6431372549019608},{x:.625,r:.2549019607843137,g:.6823529411764706,b:.4627450980392157},{x:.75,r:.1372549019607843,g:.5450980392156862,b:.2705882352941176},{x:.875,r:0,g:.4274509803921568,b:.1725490196078431},{x:1,r:0,g:.2666666666666667,b:.1058823529411765}],range:[0,1]},yellow2brown:{controlpoints:[{x:0,r:1,g:1,b:.8980392156862745},{x:.125,r:1,g:.9686274509803922,b:.7372549019607844},{x:.25,r:.996078431372549,g:.8901960784313725,b:.5686274509803921},{x:.375,r:.996078431372549,g:.7686274509803922,b:.3098039215686275},{x:.5,r:.996078431372549,g:.6,b:.1607843137254902},{x:.625,r:.9254901960784314,g:.4392156862745098,b:.0784313725490196},{x:.75,r:.8,g:.2980392156862745,b:.00784313725490196},{x:.875,r:.6,g:.203921568627451,b:.01568627450980392},{x:1,r:.4,g:.1450980392156863,b:.02352941176470588}],range:[0,1]},blue2purple:{controlpoints:[{x:0,r:.9686274509803922,g:.9882352941176471,b:.9921568627450981},{x:.125,r:.8784313725490196,g:.9254901960784314,b:.9568627450980393},{x:.25,r:.7490196078431373,g:.8274509803921568,b:.9019607843137255},{x:.375,r:.6196078431372549,g:.7372549019607844,b:.8549019607843137},{x:.5,r:.5490196078431373,g:.5882352941176471,b:.7764705882352941},{x:.625,r:.5490196078431373,g:.4196078431372549,b:.6941176470588235},{x:.75,r:.5333333333333333,g:.2549019607843137,b:.615686274509804},{x:.875,r:.5058823529411764,g:.05882352941176471,b:.4862745098039216},{x:1,r:.3019607843137255,g:0,b:.2941176470588235}],range:[0,1]},ocean:{controlpoints:[{x:0,r:.039215,g:.090195,b:.25098},{x:.125,r:.133333,g:.364706,b:.521569},{x:.25,r:.321569,g:.760784,b:.8},{x:.375,r:.690196,g:.960784,b:.894118},{x:.5,r:.552941,g:.921569,b:.552941},{x:.625,r:.329412,g:.6,b:.239216},{x:.75,r:.211765,g:.34902,b:.078435},{x:.875,r:.011765,g:.207843,b:.023525},{x:1,r:.286275,g:.294118,b:.301961}],range:[0,1]},earth:{controlpoints:[{x:0,r:.392157,g:.392157,b:.392157},{x:.586175,r:.392157,g:.392157,b:.392157},{x:.589041,r:.141176,g:.345098,b:.478431},{x:.589042,r:.501961,g:.694118,b:.172549},{x:.617699,r:.74902,g:.560784,b:.188235},{x:.789648,r:.752941,g:.741176,b:.729412},{x:.993079,r:.796078,g:.780392,b:.772549},{x:1,r:.796078,g:.780392,b:.772549}],range:[0,1]}},swatches:{colors:[{r:255,g:255,b:255},{r:204,g:255,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:255,g:204,b:255},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:204,b:204},{r:153,g:255,b:255},{r:153,g:204,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:204,g:153,b:255},{r:255,g:153,b:255},{r:255,g:153,b:204},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:204,b:153},{r:255,g:255,b:153},{r:204,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:204},{r:204,g:204,b:204},{r:102,g:255,b:255},{r:102,g:204,b:255},{r:102,g:153,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:153,g:102,b:255},{r:204,g:102,b:255},{r:255,g:102,b:255},{r:255,g:102,b:204},{r:255,g:102,b:153},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:153,b:102},{r:255,g:204,b:102},{r:255,g:255,b:102},{r:204,g:255,b:102},{r:153,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:153},{r:102,g:255,b:204},{r:153,g:153,b:153},{r:51,g:255,b:255},{r:51,g:204,b:255},{r:51,g:153,b:255},{r:51,g:102,b:255},{r:51,g:51,b:255},{r:51,g:51,b:255},{r:51,g:51,b:255},{r:102,g:51,b:255},{r:153,g:51,b:255},{r:204,g:51,b:255},{r:255,g:51,b:255},{r:255,g:51,b:204},{r:255,g:51,b:153},{r:255,g:51,b:102},{r:255,g:51,b:51},{r:255,g:51,b:51},{r:255,g:51,b:51},{r:255,g:102,b:51},{r:255,g:153,b:51},{r:255,g:204,b:51},{r:255,g:255,b:51},{r:204,g:255,b:51},{r:153,g:255,b:51},{r:102,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:102},{r:51,g:255,b:153},{r:51,g:255,b:204},{r:153,g:153,b:153},{r:0,g:255,b:255},{r:0,g:204,b:255},{r:0,g:153,b:255},{r:0,g:102,b:255},{r:0,g:51,b:255},{r:0,g:0,b:255},{r:51,g:0,b:255},{r:102,g:0,b:255},{r:153,g:0,b:255},{r:204,g:0,b:255},{r:255,g:0,b:255},{r:255,g:0,b:204},{r:255,g:0,b:153},{r:255,g:0,b:102},{r:255,g:0,b:51},{r:255,g:0,b:0},{r:255,g:51,b:0},{r:255,g:102,b:0},{r:255,g:153,b:0},{r:255,g:204,b:0},{r:255,g:255,b:0},{r:204,g:255,b:0},{r:153,g:255,b:0},{r:102,g:255,b:0},{r:51,g:255,b:0},{r:0,g:255,b:0},{r:0,g:255,b:51},{r:0,g:255,b:102},{r:0,g:255,b:153},{r:0,g:255,b:204},{r:102,g:102,b:102},{r:0,g:204,b:204},{r:0,g:204,b:204},{r:0,g:153,b:204},{r:0,g:102,b:204},{r:0,g:51,b:204},{r:0,g:0,b:204},{r:51,g:0,b:204},{r:102,g:0,b:204},{r:153,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:153},{r:204,g:0,b:102},{r:204,g:0,b:51},{r:204,g:0,b:0},{r:204,g:51,b:0},{r:204,g:102,b:0},{r:204,g:153,b:0},{r:204,g:204,b:0},{r:204,g:204,b:0},{r:204,g:204,b:0},{r:153,g:204,b:0},{r:102,g:204,b:0},{r:51,g:204,b:0},{r:0,g:204,b:0},{r:0,g:204,b:51},{r:0,g:204,b:102},{r:0,g:204,b:153},{r:0,g:204,b:204},{r:102,g:102,b:102},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:0,g:102,b:153},{r:0,g:51,b:153},{r:0,g:0,b:153},{r:51,g:0,b:153},{r:102,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:102},{r:153,g:0,b:51},{r:153,g:0,b:0},{r:153,g:51,b:0},{r:153,g:102,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:102,g:153,b:0},{r:51,g:153,b:0},{r:0,g:153,b:0},{r:0,g:153,b:51},{r:0,g:153,b:102},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:51,g:51,b:51},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:51,b:102},{r:0,g:0,b:102},{r:51,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:51},{r:102,g:0,b:0},{r:102,g:51,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:51,g:102,b:0},{r:0,g:102,b:0},{r:0,g:102,b:51},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:0,b:0},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:0,g:51,b:0},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:51,g:51,b:51}],columns:31,rows:9}},t.exports=e["default"]},function(t,e,r){var n;(function(t,i){(function(){function o(t,e,r){for(var n=(r||0)-1,i=t?t.length:0;++n<i;)if(t[n]===e)return n;return-1}function a(t,e){var r=typeof e;if(t=t.cache,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var n="number"==r?e:E+e;return t=(t=t[r])&&t[n],"object"==r?t&&o(t,e)>-1?0:-1:t?0:-1}function u(t){var e=this.cache,r=typeof t;if("boolean"==r||null==t)e[t]=!0;else{"number"!=r&&"string"!=r&&(r="object");var n="number"==r?t:E+t,i=e[r]||(e[r]={});"object"==r?(i[n]||(i[n]=[])).push(t):i[n]=!0}}function s(t){return t.charCodeAt(0)}function l(t,e){for(var r=t.criteria,n=e.criteria,i=-1,o=r.length;++i<o;){var a=r[i],u=n[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return t.index-e.index}function c(t){var e=-1,r=t.length,n=t[0],i=t[r/2|0],o=t[r-1];if(n&&"object"==typeof n&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var a=p();a["false"]=a["null"]=a["true"]=a.undefined=!1;var s=p();for(s.array=t,s.cache=a,s.push=u;++e<r;)s.push(t[e]);return s}function f(t){return"\\"+it[t]}function h(){return _.pop()||[]}function p(){return x.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function g(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function d(t){t.length=0,_.length<R&&_.push(t)}function v(t){var e=t.cache;e&&v(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,x.length<R&&x.push(t)}function b(t,e,r){e||(e=0),"undefined"==typeof r&&(r=t?t.length:0);for(var n=-1,i=r-e||0,o=Array(0>i?0:i);++n<i;)o[n]=t[e+n];return o}function m(t){function e(t){return t&&"object"==typeof t&&!fn(t)&&Yr.call(t,"__wrapped__")?t:new r(t)}function r(t,e){this.__chain__=!!e,this.__wrapped__=t}function n(t){function e(){if(n){var t=b(n);Gr.apply(t,arguments)}if(this instanceof e){var o=u(r.prototype),a=r.apply(o,t||arguments);return Ut(a)?a:o}return r.apply(i,t||arguments)}var r=t[0],n=t[2],i=t[4];return cn(e,t),e}function i(t,e,r,n,o){if(r){var a=r(t);if("undefined"!=typeof a)return a}var u=Ut(t);if(!u)return t;var s=Or.call(t);if(!J[s]||!sn.nodeClass&&g(t))return t;var l=an[s];switch(s){case q:case W:return new l(+t);case Q:case H:return new l(t);case K:return a=l(t.source,L.exec(t)),a.lastIndex=t.lastIndex,a}var c=fn(t);if(e){var f=!n;n||(n=h()),o||(o=h());for(var p=n.length;p--;)if(n[p]==t)return o[p];a=c?l(t.length):{}}else a=c?b(t):Cn({},t);return c&&(Yr.call(t,"index")&&(a.index=t.index),Yr.call(t,"input")&&(a.input=t.input)),e?(n.push(t),o.push(a),(c?xn:wn)(t,function(t,u){a[u]=i(t,e,r,n,o)}),f&&(d(n),d(o)),a):a}function u(t,e){return Ut(t)?$r(t):{}}function _(t,e,r){if("function"!=typeof t)return ir;if("undefined"==typeof e||!("prototype"in t))return t;var n=t.__bindData__;if("undefined"==typeof n&&(sn.funcNames&&(n=!t.name),n=n||!sn.funcDecomp,!n)){var i=Br.call(t);sn.funcNames||(n=!I.test(i)),n||(n=j.test(i),cn(t,n))}if(n===!1||n!==!0&&1&n[1])return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)}}return Be(t,e)}function x(t){function e(){var t=l?a:this;if(i){var g=b(i);Gr.apply(g,arguments)}if((o||f)&&(g||(g=b(arguments)),o&&Gr.apply(g,o),f&&g.length<s))return n|=16,x([r,h?n:-4&n,g,null,a,s]);if(g||(g=arguments),c&&(r=t[p]),this instanceof e){t=u(r.prototype);var d=r.apply(t,g);return Ut(d)?d:t}return r.apply(t,g)}var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=1&n,c=2&n,f=4&n,h=8&n,p=r;
return cn(e,t),e}function R(t,e){var r=-1,n=dt(),i=t?t.length:0,u=i>=w&&n===o,s=[];if(u){var l=c(e);l?(n=a,e=l):u=!1}for(;++r<i;){var f=t[r];n(e,f)<0&&s.push(f)}return u&&v(e),s}function it(t,e,r,n){for(var i=(n||0)-1,o=t?t.length:0,a=[];++i<o;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(fn(u)||yt(u))){e||(u=it(u,e,r));var s=-1,l=u.length,c=a.length;for(a.length+=l;++s<l;)a[c++]=u[s]}else r||a.push(u)}return a}function at(t,e,r,n,i,o){if(r){var a=r(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var u=typeof t,s=typeof e;if(!(t!==t||t&&nt[u]||e&&nt[s]))return!1;if(null==t||null==e)return t===e;var l=Or.call(t),c=Or.call(e);if(l==Y&&(l=$),c==Y&&(c=$),l!=c)return!1;switch(l){case q:case W:return+t==+e;case Q:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case K:case H:return t==Ar(e)}var f=l==G;if(!f){var p=Yr.call(t,"__wrapped__"),v=Yr.call(e,"__wrapped__");if(p||v)return at(p?t.__wrapped__:t,v?e.__wrapped__:e,r,n,i,o);if(l!=$||!sn.nodeClass&&(g(t)||g(e)))return!1;var b=!sn.argsObject&&yt(t)?Pr:t.constructor,m=!sn.argsObject&&yt(e)?Pr:e.constructor;if(b!=m&&!(Ot(b)&&b instanceof b&&Ot(m)&&m instanceof m)&&"constructor"in t&&"constructor"in e)return!1}var y=!i;i||(i=h()),o||(o=h());for(var _=i.length;_--;)if(i[_]==t)return o[_]==e;var x=0;if(a=!0,i.push(t),o.push(e),f){if(_=t.length,x=e.length,a=x==_,a||n)for(;x--;){var C=_,T=e[x];if(n)for(;C--&&!(a=at(t[C],T,r,n,i,o)););else if(!(a=at(t[x],T,r,n,i,o)))break}}else En(e,function(e,u,s){return Yr.call(s,u)?(x++,a=Yr.call(t,u)&&at(t[u],e,r,n,i,o)):void 0}),a&&!n&&En(t,function(t,e,r){return Yr.call(r,e)?a=--x>-1:void 0});return i.pop(),o.pop(),y&&(d(i),d(o)),a}function ut(t,e,r,n,i){(fn(e)?ne:wn)(e,function(e,o){var a,u,s=e,l=t[o];if(e&&((u=fn(e))||Rn(e))){for(var c=n.length;c--;)if(a=n[c]==e){l=i[c];break}if(!a){var f;r&&(s=r(l,e),(f="undefined"!=typeof s)&&(l=s)),f||(l=u?fn(l)?l:[]:Rn(l)?l:{}),n.push(e),i.push(l),f||ut(l,e,r,n,i)}}else r&&(s=r(l,e),"undefined"==typeof s&&(s=e)),"undefined"!=typeof s&&(l=s);t[o]=l})}function st(t,e){return t+Xr(on()*(e-t+1))}function ct(t,e,r){var n=-1,i=dt(),u=t?t.length:0,s=[],l=!e&&u>=w&&i===o,f=r||l?h():s;if(l){var p=c(f);i=a,f=p}for(;++n<u;){var g=t[n],b=r?r(g,n,t):g;(e?!n||f[f.length-1]!==b:i(f,b)<0)&&((r||l)&&f.push(b),s.push(g))}return l?(d(f.array),v(f)):r&&d(f),s}function ft(t){return function(r,n,i){var o={};if(n=e.createCallback(n,i,3),fn(r))for(var a=-1,u=r.length;++a<u;){var s=r[a];t(o,s,n(s,a,r),r)}else xn(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function ht(t,e,r,i,o,a){var u=1&e,s=2&e,l=4&e,c=16&e,f=32&e;if(!s&&!Ot(t))throw new Sr;c&&!r.length&&(e&=-17,c=r=!1),f&&!i.length&&(e&=-33,f=i=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=b(h),h[2]&&(h[2]=b(h[2])),h[3]&&(h[3]=b(h[3])),!u||1&h[1]||(h[4]=o),!u&&1&h[1]&&(e|=8),!l||4&h[1]||(h[5]=a),c&&Gr.apply(h[2]||(h[2]=[]),r),f&&Zr.apply(h[3]||(h[3]=[]),i),h[1]|=e,ht.apply(null,h);var p=1==e||17===e?n:x;return p([t,e,r,i,o,a])}function pt(){rt.shadowedProps=B,rt.array=rt.bottom=rt.loop=rt.top="",rt.init="iterable",rt.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var r in t)rt[r]=t[r];var n=rt.args;rt.firstArg=/^[^,]+/.exec(n)[0];var i=Er("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+n+") {\n"+ln(rt)+"\n}");return i(_,V,Lr,Yr,T,yt,fn,zt,rt.keys,Ir,nt,un,H,kr,Or)}function gt(t){return bn[t]}function dt(){var t=(t=e.indexOf)===Ee?o:t;return t}function vt(t){return"function"==typeof t&&Ur.test(t)}function bt(t){var e,r;return!t||Or.call(t)!=$||(e=t.constructor,Ot(e)&&!(e instanceof e))||!sn.argsClass&&yt(t)||!sn.nodeClass&&g(t)?!1:sn.ownLast?(En(t,function(t,e,n){return r=Yr.call(n,e),!1}),r!==!1):(En(t,function(t,e){r=e}),"undefined"==typeof r||Yr.call(t,r))}function mt(t){return mn[t]}function yt(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Or.call(t)==Y||!1}function _t(t,e,r,n){return"boolean"!=typeof e&&null!=e&&(n=r,r=e,e=!1),i(t,e,"function"==typeof r&&_(r,n,1))}function xt(t,e,r){return i(t,!0,"function"==typeof e&&_(e,r,1))}function Ct(t,e){var r=u(t);return e?Cn(r,e):r}function Tt(t,r,n){var i;return r=e.createCallback(r,n,3),wn(t,function(t,e,n){return r(t,e,n)?(i=e,!1):void 0}),i}function Et(t,r,n){var i;return r=e.createCallback(r,n,3),Rt(t,function(t,e,n){return r(t,e,n)?(i=e,!1):void 0}),i}function wt(t,e,r){var n=[];En(t,function(t,e){n.push(e,t)});var i=n.length;for(e=_(e,r,3);i--&&e(n[i--],n[i],t)!==!1;);return t}function Rt(t,e,r){var n=pn(t),i=n.length;for(e=_(e,r,3);i--;){var o=n[i];if(e(t[o],o,t)===!1)break}return t}function Pt(t){var e=[];return En(t,function(t,r){Ot(t)&&e.push(r)}),e.sort()}function Mt(t,e){return t?Yr.call(t,e):!1}function At(t){for(var e=-1,r=pn(t),n=r.length,i={};++e<n;){var o=r[e];i[t[o]]=o}return i}function St(t){return t===!0||t===!1||t&&"object"==typeof t&&Or.call(t)==q||!1}function Dt(t){return t&&"object"==typeof t&&Or.call(t)==W||!1}function Lt(t){return t&&1===t.nodeType||!1}function It(t){var e=!0;if(!t)return e;var r=Or.call(t),n=t.length;return r==G||r==H||(sn.argsClass?r==Y:yt(t))||r==$&&"number"==typeof n&&Ot(t.splice)?!n:(wn(t,function(){return e=!1}),e)}function kt(t,e,r,n){return at(t,e,"function"==typeof r&&_(r,n,2))}function Ft(t){return Hr(t)&&!Jr(parseFloat(t))}function Ot(t){return"function"==typeof t}function Ut(t){return!(!t||!nt[typeof t])}function jt(t){return Xt(t)&&t!=+t}function Nt(t){return null===t}function Xt(t){return"number"==typeof t||t&&"object"==typeof t&&Or.call(t)==Q||!1}function Bt(t){return t&&nt[typeof t]&&Or.call(t)==K||!1}function zt(t){return"string"==typeof t||t&&"object"==typeof t&&Or.call(t)==H||!1}function Yt(t){return"undefined"==typeof t}function Gt(t,r,n){var i={};return r=e.createCallback(r,n,3),wn(t,function(t,e,n){i[e]=r(t,e,n)}),i}function qt(t){var e=arguments,r=2;if(!Ut(t))return t;if("number"!=typeof e[2]&&(r=e.length),r>3&&"function"==typeof e[r-2])var n=_(e[--r-1],e[r--],2);else r>2&&"function"==typeof e[r-1]&&(n=e[--r]);for(var i=b(arguments,1,r),o=-1,a=h(),u=h();++o<r;)ut(t,i[o],n,a,u);return d(a),d(u),t}function Wt(t,r,n){var i={};if("function"!=typeof r){var o=[];En(t,function(t,e){o.push(e)}),o=R(o,it(arguments,!0,!1,1));for(var a=-1,u=o.length;++a<u;){var s=o[a];i[s]=t[s]}}else r=e.createCallback(r,n,3),En(t,function(t,e,n){r(t,e,n)||(i[e]=t)});return i}function Vt(t){for(var e=-1,r=pn(t),n=r.length,i=_r(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function Zt(t,r,n){var i={};if("function"!=typeof r)for(var o=-1,a=it(arguments,!0,!1,1),u=Ut(t)?a.length:0;++o<u;){var s=a[o];s in t&&(i[s]=t[s])}else r=e.createCallback(r,n,3),En(t,function(t,e,n){r(t,e,n)&&(i[e]=t)});return i}function Qt(t,r,n,i){var o=fn(t);if(null==n)if(o)n=[];else{var a=t&&t.constructor,s=a&&a.prototype;n=u(s)}return r&&(r=e.createCallback(r,i,4),(o?xn:wn)(t,function(t,e,i){return r(n,t,e,i)})),n}function $t(t){for(var e=-1,r=pn(t),n=r.length,i=_r(n);++e<n;)i[e]=t[r[e]];return i}function Kt(t){var e=arguments,r=-1,n=it(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:n.length,o=_r(i);for(sn.unindexedChars&&zt(t)&&(t=t.split(""));++r<i;)o[r]=t[n[r]];return o}function Ht(t,e,r){var n=-1,i=dt(),o=t?t.length:0,a=!1;return r=(0>r?en(0,o+r):r)||0,fn(t)?a=i(t,e,r)>-1:"number"==typeof o?a=(zt(t)?t.indexOf(e,r):i(t,e,r))>-1:xn(t,function(t){return++n>=r?!(a=t===e):void 0}),a}function Jt(t,r,n){var i=!0;if(r=e.createCallback(r,n,3),fn(t))for(var o=-1,a=t.length;++o<a&&(i=!!r(t[o],o,t)););else xn(t,function(t,e,n){return i=!!r(t,e,n)});return i}function te(t,r,n){var i=[];if(r=e.createCallback(r,n,3),fn(t))for(var o=-1,a=t.length;++o<a;){var u=t[o];r(u,o,t)&&i.push(u)}else xn(t,function(t,e,n){r(t,e,n)&&i.push(t)});return i}function ee(t,r,n){if(r=e.createCallback(r,n,3),!fn(t)){var i;return xn(t,function(t,e,n){return r(t,e,n)?(i=t,!1):void 0}),i}for(var o=-1,a=t.length;++o<a;){var u=t[o];if(r(u,o,t))return u}}function re(t,r,n){var i;return r=e.createCallback(r,n,3),ie(t,function(t,e,n){return r(t,e,n)?(i=t,!1):void 0}),i}function ne(t,e,r){if(e&&"undefined"==typeof r&&fn(t))for(var n=-1,i=t.length;++n<i&&e(t[n],n,t)!==!1;);else xn(t,e,r);return t}function ie(t,e,r){var n=t,i=t?t.length:0;if(e=e&&"undefined"==typeof r?e:_(e,r,3),fn(t))for(;i--&&e(t[i],i,t)!==!1;);else{if("number"!=typeof i){var o=pn(t);i=o.length}else sn.unindexedChars&&zt(t)&&(n=t.split(""));xn(t,function(t,r,a){return r=o?o[--i]:--i,e(n[r],r,a)})}return t}function oe(t,e){var r=b(arguments,2),n=-1,i="function"==typeof e,o=t?t.length:0,a=_r("number"==typeof o?o:0);return ne(t,function(t){a[++n]=(i?e:t[e]).apply(t,r)}),a}function ae(t,r,n){var i=-1,o=t?t.length:0,a=_r("number"==typeof o?o:0);if(r=e.createCallback(r,n,3),fn(t))for(;++i<o;)a[i]=r(t[i],i,t);else xn(t,function(t,e,n){a[++i]=r(t,e,n)});return a}function ue(t,r,n){var i=-(1/0),o=i;if("function"!=typeof r&&n&&n[r]===t&&(r=null),null==r&&fn(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];l>o&&(o=l)}else r=null==r&&zt(t)?s:e.createCallback(r,n,3),xn(t,function(t,e,n){var a=r(t,e,n);a>i&&(i=a,o=t)});return o}function se(t,r,n){var i=1/0,o=i;if("function"!=typeof r&&n&&n[r]===t&&(r=null),null==r&&fn(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];o>l&&(o=l)}else r=null==r&&zt(t)?s:e.createCallback(r,n,3),xn(t,function(t,e,n){var a=r(t,e,n);i>a&&(i=a,o=t)});return o}function le(t,r,n,i){var o=arguments.length<3;if(r=e.createCallback(r,i,4),fn(t)){var a=-1,u=t.length;for(o&&(n=t[++a]);++a<u;)n=r(n,t[a],a,t)}else xn(t,function(t,e,i){n=o?(o=!1,t):r(n,t,e,i)});return n}function ce(t,r,n,i){var o=arguments.length<3;return r=e.createCallback(r,i,4),ie(t,function(t,e,i){n=o?(o=!1,t):r(n,t,e,i)}),n}function fe(t,r,n){return r=e.createCallback(r,n,3),te(t,function(t,e,n){return!r(t,e,n)})}function he(t,e,r){if(t&&"number"!=typeof t.length?t=$t(t):sn.unindexedChars&&zt(t)&&(t=t.split("")),null==e||r)return t?t[st(0,t.length-1)]:y;var n=pe(t);return n.length=rn(en(0,e),n.length),n}function pe(t){var e=-1,r=t?t.length:0,n=_r("number"==typeof r?r:0);return ne(t,function(t){var r=st(0,++e);n[e]=n[r],n[r]=t}),n}function ge(t){var e=t?t.length:0;return"number"==typeof e?e:pn(t).length}function de(t,r,n){var i;if(r=e.createCallback(r,n,3),fn(t))for(var o=-1,a=t.length;++o<a&&!(i=r(t[o],o,t)););else xn(t,function(t,e,n){return!(i=r(t,e,n))});return!!i}function ve(t,r,n){var i=-1,o=fn(r),a=t?t.length:0,u=_r("number"==typeof a?a:0);for(o||(r=e.createCallback(r,n,3)),ne(t,function(t,e,n){var a=u[++i]=p();o?a.criteria=ae(r,function(e){return t[e]}):(a.criteria=h())[0]=r(t,e,n),a.index=i,a.value=t}),a=u.length,u.sort(l);a--;){var s=u[a];u[a]=s.value,o||d(s.criteria),v(s)}return u}function be(t){return t&&"number"==typeof t.length?sn.unindexedChars&&zt(t)?t.split(""):b(t):$t(t)}function me(t){for(var e=-1,r=t?t.length:0,n=[];++e<r;){var i=t[e];i&&n.push(i)}return n}function ye(t){return R(t,it(arguments,!0,!0,1))}function _e(t,r,n){var i=-1,o=t?t.length:0;for(r=e.createCallback(r,n,3);++i<o;)if(r(t[i],i,t))return i;return-1}function xe(t,r,n){var i=t?t.length:0;for(r=e.createCallback(r,n,3);i--;)if(r(t[i],i,t))return i;return-1}function Ce(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var a=-1;for(r=e.createCallback(r,n,3);++a<o&&r(t[a],a,t);)i++}else if(i=r,null==i||n)return t?t[0]:y;return b(t,0,rn(en(0,i),o))}function Te(t,e,r,n){return"boolean"!=typeof e&&null!=e&&(n=r,r="function"!=typeof e&&n&&n[e]===t?null:e,e=!1),null!=r&&(t=ae(t,r,n)),it(t,e)}function Ee(t,e,r){if("number"==typeof r){var n=t?t.length:0;r=0>r?en(0,n+r):r||0}else if(r){var i=Ie(t,e);return t[i]===e?i:-1}return o(t,e,r)}function we(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var a=o;for(r=e.createCallback(r,n,3);a--&&r(t[a],a,t);)i++}else i=null==r||n?1:r||i;return b(t,0,rn(en(0,o-i),o))}function Re(){for(var t=[],e=-1,r=arguments.length,n=h(),i=dt(),u=i===o,s=h();++e<r;){var l=arguments[e];(fn(l)||yt(l))&&(t.push(l),n.push(u&&l.length>=w&&c(e?t[e]:s)))}var f=t[0],p=-1,g=f?f.length:0,b=[];t:for(;++p<g;){var m=n[0];if(l=f[p],(m?a(m,l):i(s,l))<0){for(e=r,(m||s).push(l);--e;)if(m=n[e],(m?a(m,l):i(t[e],l))<0)continue t;b.push(l)}}for(;r--;)m=n[r],m&&v(m);return d(n),d(s),b}function Pe(t,r,n){var i=0,o=t?t.length:0;if("number"!=typeof r&&null!=r){var a=o;for(r=e.createCallback(r,n,3);a--&&r(t[a],a,t);)i++}else if(i=r,null==i||n)return t?t[o-1]:y;return b(t,en(0,o-i))}function Me(t,e,r){var n=t?t.length:0;for("number"==typeof r&&(n=(0>r?en(0,n+r):rn(r,n-1))+1);n--;)if(t[n]===e)return n;return-1}function Ae(t){for(var e=arguments,r=0,n=e.length,i=t?t.length:0;++r<n;)for(var o=-1,a=e[r];++o<i;)t[o]===a&&(Vr.call(t,o--,1),i--);return t}function Se(t,e,r){t=+t||0,r="number"==typeof r?r:+r||1,null==e&&(e=t,t=0);for(var n=-1,i=en(0,jr((e-t)/(r||1))),o=_r(i);++n<i;)o[n]=t,t+=r;return o}function De(t,r,n){var i=-1,o=t?t.length:0,a=[];for(r=e.createCallback(r,n,3);++i<o;){var u=t[i];r(u,i,t)&&(a.push(u),Vr.call(t,i--,1),o--)}return a}function Le(t,r,n){if("number"!=typeof r&&null!=r){var i=0,o=-1,a=t?t.length:0;for(r=e.createCallback(r,n,3);++o<a&&r(t[o],o,t);)i++}else i=null==r||n?1:en(0,r);return b(t,i)}function Ie(t,r,n,i){var o=0,a=t?t.length:o;for(n=n?e.createCallback(n,i,1):ir,r=n(r);a>o;){var u=o+a>>>1;n(t[u])<r?o=u+1:a=u}return o}function ke(){return ct(it(arguments,!0,!0))}function Fe(t,r,n,i){return"boolean"!=typeof r&&null!=r&&(i=n,n="function"!=typeof r&&i&&i[r]===t?null:r,r=!1),null!=n&&(n=e.createCallback(n,i,3)),ct(t,r,n)}function Oe(t){return R(t,b(arguments,1))}function Ue(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if(fn(r)||yt(r))var n=n?ct(R(n,r).concat(R(r,n))):r}return n||[]}function je(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,r=t?ue(Sn(t,"length")):0,n=_r(0>r?0:r);++e<r;)n[e]=Sn(t,e);return n}function Ne(t,e){var r=-1,n=t?t.length:0,i={};for(e||!n||fn(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function Xe(t,e){if(!Ot(e))throw new Sr;return function(){return--t<1?e.apply(this,arguments):void 0}}function Be(t,e){return arguments.length>2?ht(t,17,b(arguments,2),null,e):ht(t,1,null,null,e)}function ze(t){for(var e=arguments.length>1?it(arguments,!0,!1,1):Pt(t),r=-1,n=e.length;++r<n;){var i=e[r];t[i]=ht(t[i],1,null,null,t)}return t}function Ye(t,e){return arguments.length>2?ht(e,19,b(arguments,2),null,t):ht(e,3,null,null,t)}function Ge(){for(var t=arguments,e=t.length;e--;)if(!Ot(t[e]))throw new Sr;return function(){for(var e=arguments,r=t.length;r--;)e=[t[r].apply(this,e)];return e[0]}}function qe(t,e){return e="number"==typeof e?e:+e||t.length,ht(t,4,null,null,null,e)}function We(t,e,r){var n,i,o,a,u,s,l,c=0,f=!1,h=!0;if(!Ot(t))throw new Sr;if(e=en(0,e)||0,r===!0){var p=!0;h=!1}else Ut(r)&&(p=r.leading,f="maxWait"in r&&(en(e,r.maxWait)||0),h="trailing"in r?r.trailing:h);var g=function(){var r=e-(Ln()-a);if(0>=r){i&&Nr(i);var f=l;i=s=l=y,f&&(c=Ln(),o=t.apply(u,n),s||i||(n=u=null))}else s=Wr(g,r)},d=function(){s&&Nr(s),i=s=l=y,(h||f!==e)&&(c=Ln(),o=t.apply(u,n),s||i||(n=u=null))};return function(){if(n=arguments,a=Ln(),u=this,l=h&&(s||!p),f===!1)var r=p&&!s;else{i||p||(c=a);var v=f-(a-c),b=0>=v;b?(i&&(i=Nr(i)),c=a,o=t.apply(u,n)):i||(i=Wr(d,v))}return b&&s?s=Nr(s):s||e===f||(s=Wr(g,e)),r&&(b=!0,o=t.apply(u,n)),!b||s||i||(n=u=null),o}}function Ve(t){if(!Ot(t))throw new Sr;var e=b(arguments,1);return Wr(function(){t.apply(y,e)},1)}function Ze(t,e){if(!Ot(t))throw new Sr;var r=b(arguments,2);return Wr(function(){t.apply(y,r)},e)}function Qe(t,e){if(!Ot(t))throw new Sr;var r=function(){var n=r.cache,i=e?e.apply(this,arguments):E+arguments[0];return Yr.call(n,i)?n[i]:n[i]=t.apply(this,arguments)};return r.cache={},r}function $e(t){var e,r;if(!Ot(t))throw new Sr;return function(){return e?r:(e=!0,r=t.apply(this,arguments),t=null,r)}}function Ke(t){return ht(t,16,b(arguments,1))}function He(t){return ht(t,32,null,b(arguments,1))}function Je(t,e,r){var n=!0,i=!0;if(!Ot(t))throw new Sr;return r===!1?n=!1:Ut(r)&&(n="leading"in r?r.leading:n,i="trailing"in r?r.trailing:i),tt.leading=n,tt.maxWait=e,tt.trailing=i,We(t,e,tt)}function tr(t,e){return ht(e,16,[t])}function er(t){return function(){return t}}function rr(t,e,r){var n=typeof t;if(null==t||"function"==n)return _(t,e,r);if("object"!=n)return sr(t);var i=pn(t),o=i[0],a=t[o];return 1!=i.length||a!==a||Ut(a)?function(e){for(var r=i.length,n=!1;r--&&(n=at(e[i[r]],t[i[r]],null,!0)););return n}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function nr(t){return null==t?"":Ar(t).replace(_n,gt)}function ir(t){return t}function or(t,n,i){var o=!0,a=n&&Pt(n);n&&(i||a.length)||(null==i&&(i=n),u=r,n=t,t=e,a=Pt(n)),i===!1?o=!1:Ut(i)&&"chain"in i&&(o=i.chain);var u=t,s=Ot(u);ne(a,function(e){var r=t[e]=n[e];s&&(u.prototype[e]=function(){var e=this.__chain__,n=this.__wrapped__,i=[n];Gr.apply(i,arguments);var a=r.apply(t,i);if(o||e){if(n===a&&Ut(a))return this;a=new u(a),a.__chain__=e}return a})})}function ar(){return t._=Fr,this}function ur(){}function sr(t){return function(e){return e[t]}}function lr(t,e,r){var n=null==t,i=null==e;if(null==r&&("boolean"==typeof t&&i?(r=t,t=1):i||"boolean"!=typeof e||(r=e,i=!0)),n&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=on();return rn(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return st(t,e)}function cr(t,e){if(t){var r=t[e];return Ot(r)?t[e]():r}}function fr(t,r,n){var i=e.templateSettings;t=Ar(t||""),n=Tn({},n,i);var o,a=Tn({},n.imports,i.imports),u=pn(a),s=$t(a),l=0,c=n.interpolate||U,h="__p += '",p=Mr((n.escape||U).source+"|"+c.source+"|"+(c===F?D:U).source+"|"+(n.evaluate||U).source+"|$","g");t.replace(p,function(e,r,n,i,a,u){return n||(n=i),h+=t.slice(l,u).replace(N,f),r&&(h+="' +\n__e("+r+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),h+="';\n";var g=n.variable,d=g;d||(g="obj",h="with ("+g+") {\n"+h+"\n}\n"),h=(o?h.replace(M,""):h).replace(A,"$1").replace(S,"$1;"),h="function("+g+") {\n"+(d?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+z++ +"]")+"\n*/";try{var b=Er(u,"return "+h+v).apply(y,s)}catch(m){throw m.source=h,m}return r?b(r):(b.source=h,b)}function hr(t,e,r){t=(t=+t)>-1?t:0;var n=-1,i=_r(t);for(e=_(e,r,1);++n<t;)i[n]=e(n);return i}function pr(t){return null==t?"":Ar(t).replace(yn,mt)}function gr(t){var e=++C;return Ar(null==t?"":t)+e}function dr(t){return t=new r(t),t.__chain__=!0,t}function vr(t,e){return e(t),t}function br(){return this.__chain__=!0,this}function mr(){return Ar(this.__wrapped__)}function yr(){return this.__wrapped__}t=t?lt.defaults(ot.Object(),t,lt.pick(ot,X)):ot;var _r=t.Array,xr=t.Boolean,Cr=t.Date,Tr=t.Error,Er=t.Function,wr=t.Math,Rr=t.Number,Pr=t.Object,Mr=t.RegExp,Ar=t.String,Sr=t.TypeError,Dr=[],Lr=Tr.prototype,Ir=Pr.prototype,kr=Ar.prototype,Fr=t._,Or=Ir.toString,Ur=Mr("^"+Ar(Or).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),jr=wr.ceil,Nr=t.clearTimeout,Xr=wr.floor,Br=Er.prototype.toString,zr=vt(zr=Pr.getPrototypeOf)&&zr,Yr=Ir.hasOwnProperty,Gr=Dr.push,qr=Ir.propertyIsEnumerable,Wr=t.setTimeout,Vr=Dr.splice,Zr=Dr.unshift,Qr=function(){try{var t={},e=vt(e=Pr.defineProperty)&&e,r=e(t,t,t)&&e}catch(n){}return r}(),$r=vt($r=Pr.create)&&$r,Kr=vt(Kr=_r.isArray)&&Kr,Hr=t.isFinite,Jr=t.isNaN,tn=vt(tn=Pr.keys)&&tn,en=wr.max,rn=wr.min,nn=t.parseInt,on=wr.random,an={};an[G]=_r,an[q]=xr,an[W]=Cr,an[Z]=Er,an[$]=Pr,an[Q]=Rr,an[K]=Mr,an[H]=Ar;var un={};un[G]=un[W]=un[Q]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},un[q]=un[H]={constructor:!0,toString:!0,valueOf:!0},un[V]=un[Z]=un[K]={constructor:!0,toString:!0},un[$]={constructor:!0},function(){for(var t=B.length;t--;){var e=B[t];for(var r in un)Yr.call(un,r)&&!Yr.call(un[r],e)&&(un[r][e]=!1)}}(),r.prototype=e.prototype;var sn=e.support={};!function(){var e=function(){this.x=1},r={0:1,length:1},n=[];e.prototype={valueOf:1,y:1};for(var i in new e)n.push(i);for(i in arguments);sn.argsClass=Or.call(arguments)==Y,sn.argsObject=arguments.constructor==Pr&&!(arguments instanceof _r),sn.enumErrorProps=qr.call(Lr,"message")||qr.call(Lr,"name"),sn.enumPrototypes=qr.call(e,"prototype"),sn.funcDecomp=!vt(t.WinRTError)&&j.test(m),sn.funcNames="string"==typeof Er.name,sn.nonEnumArgs=0!=i,sn.nonEnumShadows=!/valueOf/.test(n),sn.ownLast="x"!=n[0],sn.spliceObjects=(Dr.splice.call(r,0,1),!r[0]),sn.unindexedChars="x"[0]+Pr("x")[0]!="xx";try{sn.nodeClass=!(Or.call(document)==$&&!({toString:0}+""))}catch(o){sn.nodeClass=!0}}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:e}};var ln=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",sn.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):sn.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),sn.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),sn.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var r=[];if(sn.enumPrototypes&&r.push('!(skipProto && index == "prototype")'),sn.enumErrorProps&&r.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",r.length&&(e+="    if ("+r.join(" && ")+") {\n  "),e+=t.loop+";    ",r.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&r.push("hasOwnProperty.call(iterable, index)"),r.length&&(e+="    if ("+r.join(" && ")+") {\n  "),e+=t.loop+";    ",r.length&&(e+="\n    }"),e+="\n  }    ",sn.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||sn.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};$r||(u=function(){function e(){}return function(r){if(Ut(r)){e.prototype=r;var n=new e;e.prototype=null}return n||t.Object()}}());var cn=Qr?function(t,e){et.value=e,Qr(t,"__bindData__",et),et.value=null}:ur;sn.argsClass||(yt=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Yr.call(t,"callee")&&!qr.call(t,"callee")||!1});var fn=Kr||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Or.call(t)==G||!1},hn=pt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pn=tn?function(t){return Ut(t)?sn.enumPrototypes&&"function"==typeof t||sn.nonEnumArgs&&t.length&&yt(t)?hn(t):tn(t):[]}:hn,gn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pn,loop:"if (callback(iterable[index], index, collection) === false) return result"},dn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pn,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},vn={top:"if (!objectTypes[typeof iterable]) return result;\n"+gn.top,array:!1},bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mn=At(bn),yn=Mr("("+pn(mn).join("|")+")","g"),_n=Mr("["+pn(bn).join("")+"]","g"),xn=pt(gn),Cn=pt(dn,{top:dn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Tn=pt(dn),En=pt(gn,vn,{useHas:!1}),wn=pt(gn,vn);Ot(/x/)&&(Ot=function(t){return"function"==typeof t&&Or.call(t)==Z});var Rn=zr?function(t){if(!t||Or.call(t)!=$||!sn.argsClass&&yt(t))return!1;var e=t.valueOf,r=vt(e)&&(r=zr(e))&&zr(r);return r?t==r||zr(t)==r:bt(t)}:bt,Pn=ft(function(t,e,r){Yr.call(t,r)?t[r]++:t[r]=1}),Mn=ft(function(t,e,r){(Yr.call(t,r)?t[r]:t[r]=[]).push(e)}),An=ft(function(t,e,r){t[r]=e}),Sn=ae,Dn=te,Ln=vt(Ln=Cr.now)&&Ln||function(){return(new Cr).getTime()},In=8==nn(P+"08")?nn:function(t,e){return nn(zt(t)?t.replace(O,""):t,e||0)};return e.after=Xe,e.assign=Cn,e.at=Kt,e.bind=Be,e.bindAll=ze,e.bindKey=Ye,e.chain=dr,e.compact=me,e.compose=Ge,e.constant=er,e.countBy=Pn,e.create=Ct,e.createCallback=rr,e.curry=qe,e.debounce=We,e.defaults=Tn,e.defer=Ve,e.delay=Ze,e.difference=ye,e.filter=te,e.flatten=Te,e.forEach=ne,e.forEachRight=ie,e.forIn=En,e.forInRight=wt,e.forOwn=wn,e.forOwnRight=Rt,e.functions=Pt,e.groupBy=Mn,e.indexBy=An,e.initial=we,e.intersection=Re,e.invert=At,e.invoke=oe,e.keys=pn,e.map=ae,e.mapValues=Gt,e.max=ue,e.memoize=Qe,e.merge=qt,e.min=se,e.omit=Wt,e.once=$e,e.pairs=Vt,e.partial=Ke,e.partialRight=He,e.pick=Zt,e.pluck=Sn,e.property=sr,e.pull=Ae,e.range=Se,e.reject=fe,e.remove=De,e.rest=Le,e.shuffle=pe,e.sortBy=ve,e.tap=vr,e.throttle=Je,e.times=hr,e.toArray=be,e.transform=Qt,e.union=ke,e.uniq=Fe,e.values=$t,e.where=Dn,e.without=Oe,e.wrap=tr,e.xor=Ue,e.zip=je,e.zipObject=Ne,e.collect=ae,e.drop=Le,e.each=ne,e.eachRight=ie,e.extend=Cn,e.methods=Pt,e.object=Ne,e.select=te,e.tail=Le,e.unique=Fe,e.unzip=je,or(e),e.clone=_t,e.cloneDeep=xt,e.contains=Ht,e.escape=nr,e.every=Jt,e.find=ee,e.findIndex=_e,e.findKey=Tt,e.findLast=re,e.findLastIndex=xe,e.findLastKey=Et,e.has=Mt,e.identity=ir,e.indexOf=Ee,e.isArguments=yt,e.isArray=fn,e.isBoolean=St,e.isDate=Dt,e.isElement=Lt,e.isEmpty=It,e.isEqual=kt,e.isFinite=Ft,e.isFunction=Ot,e.isNaN=jt,e.isNull=Nt,e.isNumber=Xt,e.isObject=Ut,e.isPlainObject=Rn,e.isRegExp=Bt,e.isString=zt,e.isUndefined=Yt,e.lastIndexOf=Me,e.mixin=or,e.noConflict=ar,e.noop=ur,e.now=Ln,e.parseInt=In,e.random=lr,e.reduce=le,e.reduceRight=ce,e.result=cr,e.runInContext=m,e.size=ge,e.some=de,e.sortedIndex=Ie,e.template=fr,e.unescape=pr,e.uniqueId=gr,e.all=Jt,e.any=de,e.detect=ee,e.findWhere=ee,e.foldl=le,e.foldr=ce,e.include=Ht,e.inject=le,or(function(){var t={};return wn(e,function(r,n){e.prototype[n]||(t[n]=r)}),t}(),!1),e.first=Ce,e.last=Pe,e.sample=he,e.take=Ce,e.head=Ce,wn(e,function(t,n){var i="sample"!==n;e.prototype[n]||(e.prototype[n]=function(e,n){var o=this.__chain__,a=t(this.__wrapped__,e,n);return o||null!=e&&(!n||i&&"function"==typeof e)?new r(a,o):a})}),e.VERSION="2.4.2",e.prototype.chain=br,e.prototype.toString=mr,e.prototype.value=yr,e.prototype.valueOf=yr,xn(["join","pop","shift"],function(t){var n=Dr[t];e.prototype[t]=function(){var t=this.__chain__,e=n.apply(this.__wrapped__,arguments);return t?new r(e,t):e}}),xn(["push","reverse","sort","unshift"],function(t){var r=Dr[t];e.prototype[t]=function(){return r.apply(this.__wrapped__,arguments),this}}),xn(["concat","slice","splice"],function(t){var n=Dr[t];e.prototype[t]=function(){return new r(n.apply(this.__wrapped__,arguments),this.__chain__)}}),sn.spliceObjects||xn(["pop","shift","splice"],function(t){var n=Dr[t],i="splice"==t;e.prototype[t]=function(){var t=this.__chain__,e=this.__wrapped__,o=n.apply(e,arguments);return 0===e.length&&delete e[0],t||i?new r(o,t):o}}),e}var y,_=[],x=[],C=0,T={},E=+new Date+"",w=75,R=40,P=" 	\f\ufeff\n\r\u2028\u2029",M=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,S=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,L=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,O=RegExp("^["+P+"]*0+(?=.$)"),U=/($^)/,j=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,X=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],B=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],z=0,Y="[object Arguments]",G="[object Array]",q="[object Boolean]",W="[object Date]",V="[object Error]",Z="[object Function]",Q="[object Number]",$="[object Object]",K="[object RegExp]",H="[object String]",J={};J[Z]=!1,J[Y]=J[G]=J[q]=J[W]=J[Q]=J[$]=J[K]=J[H]=!0;var tt={leading:!1,maxWait:0,trailing:!1},et={configurable:!1,enumerable:!1,value:null,writable:!1},rt={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},nt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},it={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},ot=nt[typeof window]&&window||this,at=nt[typeof e]&&e&&!e.nodeType&&e,ut=nt[typeof t]&&t&&!t.nodeType&&t,st=(ut&&ut.exports===at&&at,nt[typeof i]&&i);!st||st.global!==st&&st.window!==st||(ot=st);var lt=m();ot._=lt,n=function(){return lt}.call(e,r,e,t),!(n!==y&&(t.exports=n))}).call(this)}).call(e,r(18)(t),function(){return this}())},function(t,e,r){function n(t,e,r){o(t,function(n,o){return i(t,o)?e.call(r,t[o],o,t):void 0})}var i=r(6),o=r(49);t.exports=n},function(t,e,r){var n;n=function(){function t(t){return!!t&&"object"==typeof t&&t.constructor===Object}return t}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,r){var n,i;n=[r(8),r(57)],i=function(t,e){function r(r,n,i){e(r,function(e,o){return t(r,o)?n.call(i,r[o],o,r):void 0})}return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports="\nprecision mediump float;\n\nuniform sampler2D compositeSampler;\nuniform sampler2D layerSampler;\nvarying vec2 v_texCoord;\n\nvoid main() {\n    // Sample the texture containing what we have composited so far\n    vec4 color = texture2D(compositeSampler, v_texCoord);\n\n    // Sample the new layer to be composited in\n    vec4 compColor = texture2D(layerSampler, v_texCoord);\n\n/*\n    // Choose the fragment with the greater depth value\n    if (color.a > compColor.a) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = compColor;\n    }\n*/\n\n    // Another way to choose the fragment with the greater depth value\n    float stepVal = step((compColor.a - color.a), 0.0);\n    gl_FragColor = (stepVal * color) + ((1.0 - stepVal) * compColor);\n\n}\n"},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,r){var n=r(10),i={};i.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},i.fromValues=function(t,e,r){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},i.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],
t[2]=e[2]*r[2],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},i.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2];return t[0]=i*s-o*u,t[1]=o*a-n*s,t[2]=n*u-i*a,t},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},i.hermite=function(t,e,r,n,i,o){var a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=e[0]*u+r[0]*s+n[0]*l+i[0]*c,t[1]=e[1]*u+r[1]*s+n[1]*l+i[1]*c,t[2]=e[2]*u+r[2]*s+n[2]*l+i[2]*c,t},i.bezier=function(t,e,r,n,i,o){var a=1-o,u=a*a,s=o*o,l=u*a,c=3*o*u,f=3*s*a,h=s*o;return t[0]=e[0]*l+r[0]*c+n[0]*f+i[0]*h,t[1]=e[1]*l+r[1]*c+n[1]*f+i[1]*h,t[2]=e[2]*l+r[2]*c+n[2]*f+i[2]*h,t},i.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},i.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t},i.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var u,s;for(r||(r=3),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;s>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}(),i.angle=function(t,e){var r=i.fromValues(t[0],t[1],t[2]),n=i.fromValues(e[0],e[1],e[2]);i.normalize(r,r),i.normalize(n,n);var o=i.dot(r,n);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=i},function(t,e,r){var n=r(10),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var e=new n.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},i.fromValues=function(t,e,r,i){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=e,o[2]=r,o[3]=i,o},i.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},i.set=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t},i.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t},i.subtract=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t},i.sub=i.subtract,i.multiply=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t},i.mul=i.multiply,i.divide=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t},i.div=i.divide,i.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t},i.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t},i.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t},i.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t},i.distance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)},i.len=i.length,i.squaredLength=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},i.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},i.normalize=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},i.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=u+n*(r[3]-u),t},i.random=function(t,e){return e=e||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),i.normalize(t,t),i.scale(t,t,e),t},i.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t},i.transformQuat=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],u=r[1],s=r[2],l=r[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t[3]=e[3],t},i.forEach=function(){var t=i.create();return function(e,r,n,i,o,a){var u,s;for(r||(r=4),n||(n=0),s=i?Math.min(i*r+n,e.length):e.length,u=n;s>u;u+=r)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=i},function(t,e,r){"use strict";function n(t,e){var r=this;this.queryDataModel=t,this.pipelineModel=e,this.metadata=t.originalData.CompositePipeline,this.pushMethod="pushToFrontAsBuffer",this.compositeMap={},this.offsetMap={},this.spriteSize=o(this.metadata.offset),this.query=null,this.composite=null,this.bgCanvas=new i(this.metadata.dimensions[0],this.metadata.dimensions[1]),this.fgCanvas=null,this.dataSubscription=t.onDataChange(function(t,e){r.sprite=t.sprite,r.composite=t.composite.data["pixel-order"].split("+"),r.updateCompositeMap(r.query,r.composite),r.render()}),this.pipelineSubscription=this.pipelineModel.onChange(function(t,e){r.setPipelineQuery(t)}),this.setPipelineQuery(this.pipelineModel.getPipelineQuery())}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(2),o=r(5),a=r(1),u="image-ready";a.mixInto(n),n.prototype.updateOffsetMap=function(t){var e=this.metadata.layers,r=e.length,n=this.metadata.offset;this.offsetMap={},this.compositeMap={};for(var i=0;r>i;i++){var o=t[2*i+1];"_"===o?this.offsetMap[e[i]]=-1:this.offsetMap[e[i]]=this.spriteSize-n[e[i]+o]}},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.setPushMethodAsBuffer=function(){this.pushMethod="pushToFrontAsBuffer"},n.prototype.setPushMethodAsImage=function(){this.pushMethod="pushToFrontAsImage"},n.prototype.setPipelineQuery=function(t){this.query!==t&&(this.query=t,this.updateOffsetMap(t),this.updateCompositeMap(t,this.composite),this.render())},n.prototype.updateCompositeMap=function(t,e){if(null!==t&&null!==e)for(var r=e,n=r.length,i=this.compositeMap;n--;){var o=r[n];if("@"===o[0]);else if(i.hasOwnProperty(o));else{for(var a=-1,u=0,s=o.length;s>u;u++)a=this.offsetMap[o[u]],-1!==a&&(u=s);i[o]=a}}},n.prototype.render=function(){function t(t){u+=t,s+=Math.floor(u/l),u%=l}var e=this;if(!this.sprite)return void this.queryDataModel.fetchData();if(null!==this.query){var r=this.bgCanvas.get2DContext(),n=this.metadata.dimensions,i=1,o=this.composite,a=o.length,u=0,s=0,l=n[0];if(this.sprite.image.complete){this.sprite.image.onload&&(this.sprite.image.onload=null),r.clearRect(0,0,n[0],n[1]);for(var c=0;a>c;c++){var f=o[c];"@"===f[0]?t(Number(f.replace(/@/,"+"))):(i=this.compositeMap[f],-1!==i&&r.drawImage(this.sprite.image,u,s+n[1]*i,1,1,u,s,1,1),t(1))}this.pushToFront(n[0],n[1])}else this.sprite.image.onload=function(){e.render()}}},n.prototype.pushToFront=function(t,e){this[this.pushMethod](t,e)},n.prototype.pushToFrontAsImage=function(t,e){var r=null;this.fgCanvas?this.fgCanvas.size(t,e):this.fgCanvas=new i(t,e),r=this.fgCanvas.get2DContext(),r.drawImage(this.bgCanvas.el,0,0,t,e,0,0,t,e);var n={url:this.fgCanvas.toDataURL(),builder:this};this.emit(u,n)},n.prototype.pushToFrontAsBuffer=function(t,e){var r={canvas:this.bgCanvas.el,imageData:this.bgCanvas.el.getContext("2d").getImageData(0,0,t,e),area:[0,0,t,e],outputSize:[t,e],builder:this};this.emit(u,r)},n.prototype.onImageReady=function(t){return this.on(u,t)},n.prototype.destroy=function(){this.off(u),this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.pipelineSubscription.unsubscribe(),this.pipelineSubscription=null,this.queryDataModel=null,this.bgCanvas.destroy(),this.bgCanvas=null},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.getControlWidgets=function(){return["CompositeControl","QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getPipelineModel=function(){return this.pipelineModel},t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){var r=this;this.queryDataModel=t,this.metadata=t.originalData.InSituDataProber,this.lookupTableManager=e,this.fieldIndex=0,this.renderMethodMutable=!0,this.renderMethod="XY",this.lastImageStack=null,this.workImage=new Image,this.triggerProbeLines=!1,this.broadcastCrossHair=!0,this.scalars={},this.probeValue=0,this.probeXYZ=[Math.floor(this.metadata.dimensions[0]/2),Math.floor(this.metadata.dimensions[1]/2),Math.floor(this.metadata.dimensions[2]/2)],this.setField(this.metadata.fields[this.fieldIndex]),this.pushMethod="pushToFrontAsBuffer",this.lookupTableManager.addFields(this.metadata.ranges);for(var n=0,o=0;3>o;++o){var a=this.metadata.dimensions[o];n=a>n?a:n}this.bgCanvas=new i(n,n),this.fgCanvas=null,this.dataSubscription=t.onDataChange(function(t,e){r.lastImageStack=t;var n=!0,i=function(){r.render()};for(var o in t){var a=t[o].image;a.addEventListener("load",i),n=n&&a.complete}n&&r.render()}),this.lutChangeSubscription=this.lookupTableManager.onChange(function(t,e){r.update()});var u=this;this.mouseListener={click:function(t,e){if(!t.activeArea)return!1;var r=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=u.metadata.dimensions,o=t.activeArea,a=(t.relative.x-o[0])/o[2],s=(t.relative.y-o[1])/o[3];if(t.modifier)return!1;a=0>a?0:a>1?1:a,s=0>s?0:s>1?1:s;var l=Math.floor(a*i[n[0]]),c=Math.floor(s*i[n[1]]);return r[n[0]]=l,r[n[1]]=c,u.setProbe(r[0],r[1],r[2]),!0},drag:function(t,e){if(!t.activeArea)return!1;var r=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=u.metadata.dimensions,o=t.activeArea,a=(t.relative.x-o[0])/o[2],s=(t.relative.y-o[1])/o[3];if(t.modifier)return!1;a=0>a?0:a>1?1:a,s=0>s?0:s>1?1:s;var l=Math.floor(a*i[n[0]]),c=Math.floor(s*i[n[1]]);return r[n[0]]=l,r[n[1]]=c,u.setProbe(r[0],r[1],r[2]),!0},zoom:function(t,e){var r=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=n[2];return t.modifier?!1:(r[i]+=t.deltaY<0?-1:1,r[i]<0?(r[i]=0,!0):r[i]>=u.metadata.dimensions[i]?(r[i]=u.metadata.dimensions[i]-1,!0):(u.setProbe(r[0],r[1],r[2]),!0))}}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(2),o=r(1),a="image-ready",u="ProbeImageBuilder.chart.data.ready",s="ProbeImageBuilder.probe.location.change",l="ProbeImageBuilder.crosshair.visibility.change",c="ProbeImageBuilder.render.change",f={XY:{idx:[0,1,2],hasChange:function(t,e,r,n){return t[2]!==n},updateProbeValue:function(t,e,r,n){var i=t.metadata.dimensions[0],o=e+r*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}},XZ:{idx:[0,2,1],hasChange:function(t,e,r,n){return t[1]!==r},updateProbeValue:function(t,e,r,n){var i=t.metadata.dimensions[0],o=e+n*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}},ZY:{idx:[2,1,0],hasChange:function(t,e,r,n){return t[0]!==e},updateProbeValue:function(t,e,r,n){var i=t.metadata.dimensions[2],o=n+r*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}}};o.mixInto(n),n.prototype.setPushMethodAsBuffer=function(){this.pushMethod="pushToFrontAsBuffer"},n.prototype.setPushMethodAsImage=function(){this.pushMethod="pushToFrontAsImage"},n.prototype.setProbeLineNotification=function(t){this.triggerProbeLines=t},n.prototype.getYOffset=function(t){return void 0===t&&(t=this.probeXYZ[2]),this.metadata.sprite_size-t%this.metadata.sprite_size-1},n.prototype.getImage=function(t,e){void 0===t&&(t=this.probeXYZ[2]);var r=this.metadata.slices.length-1,n=Math.floor(t/this.metadata.sprite_size);n=0>n?0:n>r?r:n;var i=this.lastImageStack[this.metadata.slices[n]],o=i.image;o?o.complete?e.call(o):o.addEventListener("load",e):(this.workImage.addEventListener("load",e),this.workImage.src=i.url)},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.setProbe=function(t,e,r){var n=f[this.renderMethod].hasChange,i=f[this.renderMethod].idx,o=[].concat(this.probeXYZ);if(Array.isArray(t)&&(r=t[2],e=t[1],t=t[0]),n(this.probeXYZ,t,e,r))this.probeXYZ=[t,e,r],this.render();else{this.probeXYZ=[t,e,r];var a=this.metadata.dimensions,u=this.metadata.spacing;f[this.renderMethod].updateProbeValue(this,t,e,r),this.pushToFront(a[i[0]],a[i[1]],u[i[0]],u[i[1]],this.probeXYZ[i[0]],this.probeXYZ[i[1]])}(o[0]!==t||o[1]!==e||o[2]!==r)&&this.emit(s,[t,e,r])},n.prototype.getProbe=function(){return this.probeXYZ},n.prototype.getFieldValueAtProbeLocation=function(){return this.probeValue},n.prototype.getProbeLine=function(t){for(var e={name:this.getField(),data:[]},r={xRange:[0,100],fields:[e]},n=-1,i=f[this.renderMethod].idx,o=0;2>o;o++)t===i[o]&&(n=o);if(-1!==n){var a=this.scalars[e.name],u=this.metadata.dimensions,s=u[i[0]],l=u[i[1]],c=0===n?1:s,h=0===n?this.probeXYZ[i[1]]*s:this.probeXYZ[i[0]],p=0===n?s:l;if(this.metadata.origin&&this.metadata.spacing&&(r.xRange[0]=this.metadata.origin[t],r.xRange[1]=this.metadata.origin[t]+this.metadata.spacing[t]*u[t]),a)for(var g=0;p>g;g++)e.data.push(a[h+g*c])}return r},n.prototype.render=function(){this.lastImageStack&&(this["render"+this.renderMethod](),f[this.renderMethod].updateProbeValue(this,this.probeXYZ[0],this.probeXYZ[1],this.probeXYZ[2]))},n.prototype.pushToFront=function(t,e,r,n,i,o){this[this.pushMethod](t,e,r,n,i,o),this.triggerProbeLines&&this.emit(u,{x:this.getProbeLine(0),y:this.getProbeLine(1),z:this.getProbeLine(2)})},n.prototype.pushToFrontAsImage=function(t,e,r,n,o,u){var s=Math.floor(t*r),l=Math.floor(e*n),c=null;this.fgCanvas?this.fgCanvas.size(s,l):this.fgCanvas=new i(s,l),c=this.fgCanvas.get2DContext(),c.drawImage(this.bgCanvas.el,0,0,t,e,0,0,s,l),c.beginPath(),c.moveTo(o*r,0),c.lineTo(o*r,l),c.moveTo(0,u*n),c.lineTo(s,u*n),c.strokeStyle="#ffffff",c.lineWidth=1,c.stroke();var f={url:this.fgCanvas.toDataURL(),type:this.renderMethod,builder:this};this.emit(a,f)},n.prototype.pushToFrontAsBuffer=function(t,e,r,n,i,o){var u=Math.floor(t*r),s=Math.floor(e*n),l={canvas:this.bgCanvas.el,imageData:this.bgCanvas.el.getContext("2d").getImageData(0,0,t,e),area:[0,0,t,e],outputSize:[u,s],type:this.renderMethod,builder:this};this.broadcastCrossHair&&(l.crosshair=[i,o]),this.emit(a,l)},n.prototype.renderXY=function(){var t=this,e=this.bgCanvas.get2DContext(),r=this.getYOffset(),n=this.probeXYZ,i=this.metadata.dimensions,o=this.metadata.spacing;this.getImage(this.probeXYZ[2],function(){var a=this;e.drawImage(a,0,i[1]*r,i[0],i[1],0,0,i[0],i[1]),t.extractNumericalValues(i[0],i[1]),t.applyLookupTable(i[0],i[1]),t.pushToFront(i[0],i[1],o[0],o[1],n[0],n[1])})},n.prototype.renderZY=function(){function t(){var u=e.getYOffset(o),s=this;r.drawImage(s,n[0],i[1]*u,1,i[1],o,0,1,i[1]),o--?e.getImage(o,t):(e.extractNumericalValues(i[2],i[1]),e.applyLookupTable(i[2],i[1]),e.pushToFront(i[2],i[1],a[2],a[1],n[2],n[1]))}var e=this,r=this.bgCanvas.get2DContext(),n=(this.getYOffset(),this.probeXYZ),i=this.metadata.dimensions,o=i[2],a=this.metadata.spacing;o--&&e.getImage(o,t)},n.prototype.renderXZ=function(){function t(){var u=e.getYOffset(a),s=this;r.drawImage(s,0,i[1]*u+n[1],i[0],1,0,a,i[0],1),a--?e.getImage(a,t):(e.extractNumericalValues(i[0],i[2]),e.applyLookupTable(i[0],i[2]),e.pushToFront(i[0],i[2],o[0],o[2],n[0],n[2]))}var e=this,r=this.bgCanvas.get2DContext(),n=(this.getYOffset(),this.probeXYZ),i=this.metadata.dimensions,o=this.metadata.spacing,a=i[2];a--&&e.getImage(a,t)},n.prototype.isCrossHairEnabled=function(){return this.broadcastCrossHair},n.prototype.setCrossHairEnable=function(t){this.broadcastCrossHair!==t&&(this.broadcastCrossHair=t,this.emit(l,t),this.setProbe(this.probeXYZ[0],this.probeXYZ[1],this.probeXYZ[2]))},n.prototype.extractNumericalValues=function(t,e){for(var r=this.bgCanvas.get2DContext(),n=this.getField(),i=r.getImageData(0,0,t,e),o=i.data,a=o.length,u=0,s=this.metadata.ranges[n],l=s[1]-s[0],c=0,f=new Float32Array(t*e);a>u;){var h=(o[u]+256*o[u+1]+65536*o[u+2])/16777216*l+s[0];f[c++]=h,u+=4}this.scalars[n]=f},n.prototype.applyLookupTable=function(t,e){var r=this.bgCanvas.get2DContext(),n=this.getField(),i=this.lookupTableManager.getLookupTable(n),o=r.getImageData(0,0,t,e),a=o.data,u=a.length,s=0,l=0,c=this.scalars[n];if(i){for(;u>s;){var f=i.getColor(c[l++]);a[s]=Math.floor(255*f[0]),a[s+1]=Math.floor(255*f[1]),a[s+2]=Math.floor(255*f[2]),s+=4}r.putImageData(o,0,0)}},n.prototype.setField=function(t){this.queryDataModel.setValue("field",t)},n.prototype.getField=function(){return this.queryDataModel.getValue("field")},n.prototype.getFields=function(){return this.metadata.fields},n.prototype.setRenderMethod=function(t){this.renderMethodMutable&&this.renderMethod!==t&&(this.renderMethod=t,this.render(),this.emit(c,t))},n.prototype.getRenderMethod=function(){return this.renderMethod},n.prototype.getRenderMethods=function(){return["XY","ZY","XZ"]},n.prototype.isRenderMethodMutable=function(){return this.renderMethodMutable},n.prototype.setRenderMethodImutable=function(){this.renderMethodMutable=!1},n.prototype.setRenderMethodMutable=function(){this.renderMethodMutable=!0},n.prototype.getListeners=function(){return this.mouseListener},n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.onProbeLineReady=function(t){return this.on(u,t)},n.prototype.onProbeChange=function(t){return this.on(s,t)},n.prototype.onRenderMethodChange=function(t){return this.on(c,t)},n.prototype.onCrosshairVisibilityChange=function(t){return this.on(l,t)},n.prototype.destroy=function(){this.off(),this.lutChangeSubscription.unsubscribe(),this.lutChangeSubscription=null,this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.queryDataModel=null,this.bgCanvas.destroy(),this.bgCanvas=null,this.workImage=null},n.prototype.getControlWidgets=function(){return["LookupTableWidget","ProbeControl","QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getLookupTable=function(){return this.lookupTableManager.getLookupTable(this.getField())},n.prototype.getLookupTableManager=function(){return this.lookupTableManager},t.exports=e["default"]},function(t,e,r){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?"a-b":arguments[0],e=arguments.length<=1||void 0===arguments[1]?["a","b"]:arguments[1];this.data={},this.listeners={},this.dataSize=[200,200],this.operation=t,this.dependency=e,this.bgCanvas=new i(this.dataSize[0],this.dataSize[1])}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(2),o=r(1),a="image-ready";o.mixInto(n),n.prototype.setOperation=function(t){this.operation=t,this.processData()},n.prototype.getOperation=function(){return this.operation},n.prototype.setDependencies=function(t){this.dependency=t},n.prototype.updateOperationFunction=function(){var t=this,e=[],r=!0;for(var n in this.data)e.push("var X = data.X[i];".replace(/X/g,n));return this.dependency.forEach(function(e){r=t.data[e]&&r}),e.push("return X;".replace(/X/g,this.operation)),this.fnOperation=new Function("data","i",e.join("")),r},n.prototype.updateData=function(t,e){var r=this,n=e.area,i=e.canvas,o=n[0],a=n[1],u=n[2],s=n[3],l=this.bgCanvas.get2DContext(),c=new Uint8ClampedArray(u*s*4),f=null;this.bgCanvas.size(u,s),l.drawImage(i,o,a,u,s,0,0,u,s),f=l.getImageData(0,0,u,s),c.set(f.data),this.data[t]=c,this.dataSize=[u,s];var h=!0;this.dependency.forEach(function(t){r.data[t]||(h=!1)}),h&&this.processData()},n.prototype.updateDataFromImage=function(t,e){var r=this,n=function i(){e.removeEventListener("load",i);var n=e.width,o=e.height,a=r.bgCanvas.get2DContext(),u=new Uint8ClampedArray(n*o*4),s=null;r.bgCanvas.size(n,o),a.drawImage(e,0,0),s=a.getImageData(0,0,n,o),u.set(s.data),r.data[t]=u,r.dataSize=[n,o];var l=!0;r.dependency.forEach(function(t){r.data[t]||(l=!1)}),l&&r.processData()};e.complete?n():e.addEventListener("load",n)},n.prototype.updateDataFromClampedArray=function(t,e,r){var n=this;this.data[t]=e,this.dataSize=r||this.dataSize;var i=!0;this.dependency.forEach(function(t){n.data[t]||(i=!1)}),i&&this.processData()},n.prototype.processData=function(){if(this.updateOperationFunction()){var t=-1,e=!0;for(var r in this.data){var n=this.data[r];-1===t?t=n.length:e=e&&t===n.length}if(!e||-1===t)return void console.log("The array size are invalid!!!",t);if(this.dataSize[0]*this.dataSize[1]*4!==t)return void console.log("The array size are invalid!!!",t,this.dataSize);for(var i=0,o=new Uint8ClampedArray(t);t>i;)o[i]=this.fnOperation(this.data,i),o[i+1]=this.fnOperation(this.data,i+1),o[i+2]=this.fnOperation(this.data,i+2),o[i+3]=255,i+=4;this.bgCanvas.size(this.dataSize[0],this.dataSize[1]);var u=this.bgCanvas.get2DContext(),s=u.getImageData(0,0,this.dataSize[0],this.dataSize[1]);s.data.set(o),u.putImageData(s,0,0);var l={canvas:this.bgCanvas.el,area:[0,0].concat(this.dataSize),outputSize:this.dataSize,builder:this};this.emit(a,l)}},n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.destroy=function(){this.bgCanvas.destroy()},n.prototype.getListeners=function(){return this.listeners},n.prototype.setListeners=function(t){this.listeners=t},n.prototype.getControlWidgets=function(){return["PixelOperatorControl"]},t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=this;this.queryDataModel=t,this.lastQueryImage=null,this.onLoadCallback=function(){e.lastQueryImage.removeEventListener("load",e.onLoadCallback),e.render()},this.dataSubscription=t.onDataChange(function(t,r){e.lastQueryImage&&e.lastQueryImage.removeEventListener("load",e.onLoadCallback),e.lastQueryImage=t.image.image,e.render()})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(1),o="image-ready";i.mixInto(n),n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.render=function(){if(!this.lastQueryImage)return void this.queryDataModel.fetchData();if(this.lastQueryImage.complete){var t=this.lastQueryImage.width,e=this.lastQueryImage.height;this.emit(o,{canvas:this.lastQueryImage,area:[0,0,t,e],outputSize:[t,e],builder:this})}else this.lastQueryImage.addEventListener("load",this.onLoadCallback)},n.prototype.onImageReady=function(t){return this.on(o,t)},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.destroy=function(){this.off(),this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.queryDataModel=null},n.prototype.getControlWidgets=function(){return["QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){for(var r in o)if(i(t,r))return new o[r](e);return console.error("No compositor found for type",t),null}Object.defineProperty(e,"__esModule",{value:!0}),e.createCompositor=n;var i=r(51),o={rgbd:r(28),"sxyz-light":r(29),"raw-rgbd":r(27)}},function(t,e,r){"use strict";function n(t,e,r){var n=this;this.queryDataModel=t,this.pipelineModel=e,this.lookupTableManager=r,this.compositePipeline=t.originalData.CompositePipeline,this.query=null,this.compositor=o.createCompositor(t.originalData.type,{queryDataModel:t,lookupTableManager:r,imageBuilder:this}),this.controlWidgets=this.compositor.WIDGETS||["CompositeControl","QueryDataModelWidget"],this.setPipelineQuery(this.pipelineModel.getPipelineQuery()),this.pipelineSubscription=this.pipelineModel.onChange(function(t,e){n.setPipelineQuery(t)})}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(1),o=r(25),a="image-ready";i.mixInto(n),n.prototype.setPipelineQuery=function(t){this.query!==t&&(this.query=t,this.compositor.updateQuery(t),this.render())},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.render=function(){this.query&&this.compositor.render()},n.prototype.destroy=function(){this.pipelineSubscription.unsubscribe(),this.pipelineSubscription=null,this.compositor.destroy(),this.compositor=null},n.prototype.IMAGE_READY_TOPIC=a,n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.setLightProperties=function(t){this.compositor.setLightProperties(t)},n.prototype.getControlWidgets=function(){return this.controlWidgets},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getPipelineModel=function(){return this.pipelineModel},n.prototype.getLookupTableManager=function(){return this.lookupTableManager},n.prototype.getLightProperties=function(){return this.compositor.getLightProperties()},t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=this,n=t.queryDataModel,u=t.imageBuilder;return this.queryDataModel=n,this.imageBuilder=u,this.rgbdData=null,this.offsetList=[],this.spriteSize=a(this.queryDataModel.originalData.CompositePipeline.offset),this.dataSubscription=n.onDataChange(function(t,r){e.rgbdData=t.rgbdSprite.data,e.render()}),this.width=this.queryDataModel.originalData.CompositePipeline.dimensions[0],this.height=this.queryDataModel.originalData.CompositePipeline.dimensions[1],this.glCanvas=new i(this.width,this.height),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:r(3),fragmentShader:r(9),mapping:"default"},compositeProgram:{vertexShader:r(3),fragmentShader:r(17),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"texture2D",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"ping",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"pong",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=o.createGLResources(this.gl,this.glConfig),void(this.pingPong=new o.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(2),o=r(4),a=r(5);n.prototype.extractLayerData=function(t,e){var r=0,n=e,i=4*(n*this.width+r),o=this.width*this.height*4;return new Uint8Array(t,i,o)},n.prototype.updateQuery=function(t){var e=this.queryDataModel.originalData.CompositePipeline.layers,r=e.length,n=this.queryDataModel.originalData.CompositePipeline.offset;this.offsetList=[];for(var i=0;r>i;i++){var o=t[2*i+1];"_"!==o&&this.offsetList.push(this.spriteSize-n[e[i]+o])}},n.prototype.render=function(){var t=this;if(!this.rgbdData)return null;this.pingPong.clearFbo(),this.offsetList.forEach(function(e){t.drawCompositePass(t.extractLayerData(t.rgbdData,e*t.height))}),this.drawDisplayPass();var e={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,e)},n.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},n.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish()},n.prototype.drawCompositePass=function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeProgram),this.gl.viewport(0,0,this.width,this.height);var e=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"layerSampler");this.gl.uniform1i(e,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.texture2D),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t);var r=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"compositeSampler");this.gl.uniform1i(r,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap()},t.exports=e["default"]},function(t,e,r){"use strict";function n(t){var e=this,n=t.queryDataModel,u=t.imageBuilder;return this.queryDataModel=n,this.imageBuilder=u,this.rgbdSprite=null,this.offsetList=[],this.spriteSize=a(this.queryDataModel.originalData.CompositePipeline.offset),this.removeLoadCallback=!1,this.closureRenderMethod=function(){e.render()},this.dataSubscription=n.onDataChange(function(t,r){
e.rgbdSprite=t.rgbdSprite.image,e.rgbdSprite.complete?e.render():(e.removeLoadCallback=!0,e.rgbdSprite.addEventListener("load",e.closureRenderMethod))}),this.width=this.queryDataModel.originalData.CompositePipeline.dimensions[0],this.height=this.queryDataModel.originalData.CompositePipeline.dimensions[1],this.glCanvas=new i(this.width,this.height),this.compositeCanvas=new i(this.width,this.height),this.compositeCtx=this.compositeCanvas.get2DContext(),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:r(3),fragmentShader:r(9),mapping:"default"},compositeProgram:{vertexShader:r(3),fragmentShader:r(17),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"texture2D",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"ping",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"pong",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=o.createGLResources(this.gl,this.glConfig),void(this.pingPong=new o.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(2),o=r(4),a=r(5);n.prototype.updateQuery=function(t){var e=this.queryDataModel.originalData.CompositePipeline.layers,r=e.length,n=this.queryDataModel.originalData.CompositePipeline.offset;this.offsetList=[];for(var i=0;r>i;i++){var o=t[2*i+1];"_"!==o&&this.offsetList.push(this.spriteSize-n[e[i]+o])}},n.prototype.render=function(){var t=this;if(!this.rgbdSprite||!this.rgbdSprite.complete)return null;this.removeLoadCallback&&(this.rgbdSprite.removeEventListener("load",this.closureRenderMethod),this.removeLoadCallback=!1),this.pingPong.clearFbo(),this.offsetList.forEach(function(e){var r=e*t.height;t.compositeCtx.clearRect(0,0,t.width,t.height),t.compositeCtx.drawImage(t.rgbdSprite,0,r,t.width,t.height,0,0,t.width,t.height),t.drawCompositePass()}),this.drawDisplayPass();var e={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,e)},n.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},n.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish()},n.prototype.drawCompositePass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeProgram),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"layerSampler");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.texture2D),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.compositeCanvas.el);var e=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"compositeSampler");this.gl.uniform1i(e,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap()},t.exports=e["default"]},function(t,e,r){"use strict";function n(t,e){var r=parseFloat(t),n=parseFloat(e),i=(180-r)*Math.PI/180,o=(180-n)*Math.PI/180;return[Math.sin(o)*Math.cos(i),Math.sin(o)*Math.sin(i),Math.cos(o)]}function i(t,e){var r=n(t.getValue("phi"),t.getValue("theta")),i=s.fromValues(r[0],r[1],r[2]),o=s.fromValues(0,0,0),a=s.fromValues(0,0,1),u=s.create();s.add(u,a,i),s.normalize(u,u);var l=s.create();s.subtract(l,o,i);var c=s.create();s.subtract(c,u,i);var f=s.create();s.cross(f,l,c),s.normalize(f,f),s.subtract(l,f,i),s.subtract(c,o,i);var h=s.create();s.cross(h,l,c),s.normalize(h,h);var p=s.create();s.scale(p,f,e.x);var g=s.create();s.scale(g,h,e.y);var d=s.create();s.scale(d,i,.3);var v=s.create();return s.add(v,d,p),s.add(v,v,g),s.normalize(v,v),{lightDir:v,viewDir:i}}function o(t){var e=this,n=t.queryDataModel,i=t.imageBuilder,o=t.lookupTableManager;this.queryDataModel=n,this.compositePipeline=this.queryDataModel.originalData.CompositePipeline,this.width=this.compositePipeline.dimensions[0],this.height=this.compositePipeline.dimensions[1],this.spriteSize=u(this.compositePipeline.offset),this.offsetList=[],this.sxyzSprite=null,this.removeLoadCallback=!1,this.closureRenderMethod=function(){e.render()},this.dataSubscription=n.onDataChange(function(t,r){e.sxyzSprite=t.sxyzSprite.image,e.sxyzSprite.complete?e.render():(e.removeLoadCallback=!0,e.sxyzSprite.addEventListener("load",e.closureRenderMethod))}),this.imageBuilder=i,this.lookupTableManager=o,this.lookupTableManager.addFields(this.compositePipeline.ranges),this.numLutSamples=1024,this.lutMap={};for(var s in this.compositePipeline.ranges)this.lutMap[s]=new Uint8Array(4*this.numLutSamples),this.resampleLookupTable(s);return this.lookupTableManager.onChange(function(t,r){"__internal"!==t.lut.name&&e.resampleLookupTable(t.lut.name)}),this.bgColor=[1,1,1],this.lightingTextureNames=["nx","ny","nz","scalars"],this.lightingTextures={},this.lightProperties={lightTerms:{ka:.1,kd:.6,ks:.3,alpha:20},lightPosition:{x:-1,y:1},lightColor:[.8,.8,.8]},this.glCanvas=new a(this.width,this.height),this.compositeCanvas=new a(this.width,this.height),this.compositeCtx=this.compositeCanvas.get2DContext(),this.scalarCanvas=new a(this.width,this.height),this.scalarCtx=this.scalarCanvas.get2DContext(),this.nxCanvas=new a(this.width,this.height),this.nxCtx=this.nxCanvas.get2DContext(),this.nyCanvas=new a(this.width,this.height),this.nyCtx=this.nyCanvas.get2DContext(),this.nzCanvas=new a(this.width,this.height),this.nzCtx=this.nzCanvas.get2DContext(),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:r(3),fragmentShader:r(9),mapping:"default"},compositeLightProgram:{vertexShader:r(3),fragmentShader:r(61),mapping:"default"},backgroundProgram:{vertexShader:r(3),fragmentShader:r(60),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"scalars",pixelStore:p,texParameter:h},{id:"nx",pixelStore:p,texParameter:h},{id:"ny",pixelStore:p,texParameter:h},{id:"nz",pixelStore:p,texParameter:h},{id:"lutTexture",pixelStore:p,texParameter:h},{id:"ping",pixelStore:p,texParameter:h},{id:"pong",pixelStore:p,texParameter:h}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=c.createGLResources(this.gl,this.glConfig),void(this.pingPong=new c.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=o;var a=r(2),u=r(5),s=r(19),l=r(20),c=r(4),f=r(58),h=[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]],p=[["UNPACK_FLIP_Y_WEBGL",!0]];o.prototype.WIDGETS=["LookupTableManagerWidget","LightPropertiesWidget","CompositeControl","QueryDataModelWidget"],o.prototype.getLightProperties=function(){return this.lightProperties},o.prototype.setLightProperties=function(t){this.lightProperties=f(this.lightProperties,t),this.render()},o.prototype.resampleLookupTable=function(t){for(var e=this.lookupTableManager.getLookupTable(t),r=this.compositePipeline.ranges[t],n=(r[1]-r[0])/this.numLutSamples,i=this.lutMap[t],o=0;o<this.numLutSamples;++o){var a=r[0]+o*n,u=4*o,s=e.getColor(a);i[u]=Math.round(255*s[0]),i[u+1]=Math.round(255*s[1]),i[u+2]=Math.round(255*s[2]),i[u+3]=1}this.render()},o.prototype.updateQuery=function(t){var e=this.compositePipeline.layers,r=e.length,n=this.compositePipeline.offset,i=this.compositePipeline.color_by_dependencies;this.offsetList=[];for(var o=0;r>o;o++){var a=t[2*o+1];if("_"!==a&&i[a]){var u=i[a];if(u.normal){var s=u.normal[0],l=u.normal[1],c=u.normal[2];this.offsetList.push({fieldName:this.compositePipeline.fields[a],scalar:this.spriteSize-n[e[o]+a],nx:this.spriteSize-n[e[o]+s],ny:this.spriteSize-n[e[o]+l],nz:this.spriteSize-n[e[o]+c]})}}}},o.prototype.render=function(){if(!this.sxyzSprite||!this.sxyzSprite.complete)return void console.log("Not enough data to render");this.removeLoadCallback&&(this.sxyzSprite.removeEventListener("load",this.closureRenderMethod),this.removeLoadCallback=!1),this.pingPong.clearFbo();var t=i(this.queryDataModel,this.lightProperties.lightPosition),e=t.lightDir,r=t.viewDir,n=0,o=0,a=this.width,u=this.height;this.compositeCtx.clearRect(0,0,a,u),this.compositeCtx.drawImage(this.sxyzSprite,0,this.spriteSize*u,a,u,0,0,a,u),this.drawBackgroundPass(this.bgColor);for(var s=0,l=this.offsetList.length;l>s;s+=1){var c=this.offsetList[s],f=c.fieldName;o=0,o=c.nx*u,this.nxCtx.clearRect(0,0,a,u),this.nxCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.ny*u,this.nyCtx.clearRect(0,0,a,u),this.nyCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.nz*u,this.nzCtx.clearRect(0,0,a,u),this.nzCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.scalar*u,this.scalarCtx.clearRect(0,0,a,u),this.scalarCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),this.drawLitCompositePass(r,e,this.lightProperties,this.lutMap[f])}this.drawDisplayPass();var h={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,h)},o.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},o.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},o.prototype.drawBackgroundPass=function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.backgroundProgram),this.gl.viewport(0,0,this.width,this.height);var e=l.fromValues(t[0],t[1],t[2],1),r=this.gl.getUniformLocation(this.glResources.programs.backgroundProgram,"backgroundColor");this.gl.uniform4fv(r,e);var n=this.gl.getUniformLocation(this.glResources.programs.backgroundProgram,"backgroundSampler");this.gl.uniform1i(n,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.compositeCanvas.el),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},o.prototype.drawLitCompositePass=function(t,e,r,n){var i=r.lightTerms,o=r.lightColor;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeLightProgram),this.gl.viewport(0,0,this.width,this.height);var a=l.fromValues(t[0],t[1],t[2],0),u=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"viewDir");this.gl.uniform4fv(u,a);var s=l.fromValues(e[0],e[1],e[2],0),c=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightDir");this.gl.uniform4fv(c,s);var f=l.fromValues(i.ka,i.kd,i.ks,i.alpha),h=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightTerms");this.gl.uniform4fv(h,f);var p=l.fromValues(o[0],o[1],o[2],1),g=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightColor");this.gl.uniform4fv(g,p);var d=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"scalarSampler");this.gl.uniform1i(d,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.scalars),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.scalarCanvas.el);var v=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nxSampler");this.gl.uniform1i(v,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.nx),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nxCanvas.el);var b=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nySampler");this.gl.uniform1i(b,2),this.gl.activeTexture(this.gl.TEXTURE0+2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.ny),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nyCanvas.el);var m=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nzSampler");this.gl.uniform1i(m,3),this.gl.activeTexture(this.gl.TEXTURE0+3),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.nz),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nzCanvas.el);var y=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"compositeSampler");this.gl.uniform1i(y,4),this.gl.activeTexture(this.gl.TEXTURE0+4),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture());var _=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lutSampler");this.gl.uniform1i(_,5),this.gl.activeTexture(this.gl.TEXTURE0+5),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.lutTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.numLutSamples,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap();for(var x=0;6>x;x+=1)this.gl.activeTexture(this.gl.TEXTURE0+x),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},t.exports=e["default"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),i=r(22),o=r(23),a=r(24),u=r(26);e.Composite=n,e.DataProber=i,e.PixelOperator=o,e.QueryDataModel=a,e.WebGlComposite=u},function(t,e,r){"use strict";function n(){var t=this;this.luts={},this.lutSubscriptions={},this.onChangeCallback=function(e,r){t.emit(a,e)}}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(11),o=(r(6),r(1)),a="LookupTable.change",u="LookupTable.list.change";o.mixInto(n),n.prototype.addLookupTable=function(t,e,r){var n=this.luts[t];return void 0===n&&(n=new i(t),this.luts[t]=n,this.lutSubscriptions[t]=n.onChange(this.onChangeCallback)),n.setPreset(r||"spectralflip"),n.setScalarRange(e[0],e[1]),this.emit(u,this),n},n.prototype.removeLookupTable=function(t){this.luts.hasOwn(t)&&(this.lutSubscriptions[t].unsubscribe(),this.luts[t].destroy(),delete this.luts[t],delete this.lutSubscriptions[t],this.emit(u,this))},n.prototype.getLookupTable=function(t){return this.luts[t]},n.prototype.addFields=function(t){for(var e in t)this.addLookupTable(e,t[e])},n.prototype.onChange=function(t){return this.on(a,t)},n.prototype.onFieldsChange=function(t){return this.on(u,t)},t.exports=e["default"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),i=r(31),o=r(12);e.LookupTable=n,e.LookupTableManager=i,e.Presets=o},function(t,e,r){"use strict";function n(t){function e(t){if(!n||t.length>1)return!0;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r=e.indexOf(t[0]);return"_"!==n[2*r+1]}var r=this;this.originalData=t,this.visibilityState={},this.activeState={},this.editMode={},this.activeColors={},this.noTrigger=!0;var n=t.CompositePipeline.default_pipeline;t.CompositePipeline.pipeline.forEach(function(t){r.setLayerVisible(t.ids.join(""),!0)}),t.CompositePipeline.layers.forEach(function(n){r.activeState[n]=e(n),r.activeColors[n]=t.CompositePipeline.layer_fields[n][0]}),this.noTrigger=!1,this.triggerChange()}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var i=r(1),o="pipeline.change";i.mixInto(n),n.prototype.onChange=function(t){return this.on(o,t)},n.prototype.TopicChange=function(){return o},n.prototype.triggerChange=function(){if(!this.noTrigger){var t=this.getPipelineQuery();this.emit(o,t)}},n.prototype.isLayerActive=function(t){return this.activeState[t]},n.prototype.setLayerActive=function(t,e){this.activeState[t]!==e&&(this.activeState[t]=e,this.triggerChange())},n.prototype.toggleLayerActive=function(t){this.activeState[t]=!this.activeState[t],this.triggerChange()},n.prototype.isLayerVisible=function(t){return this.visibilityState[t]},n.prototype.setLayerVisible=function(t,e){if(this.visibilityState[t]!==e){this.visibilityState[t]=e;for(var r=t.length;r--;)this.visibilityState[t[r]]=e;this.triggerChange()}},n.prototype.toggleLayerVisible=function(t){this.setLayerVisible(t,!this.visibilityState[t])},n.prototype.toggleEditMode=function(t){this.editMode[t]=!this.editMode[t],this.triggerChange()},n.prototype.isLayerInEditMode=function(t){for(var e in this.editMode)if(this.editMode[e]&&-1!==e.indexOf(t))return!0;return!1},n.prototype.getColor=function(t){return this.originalData.CompositePipeline.layer_fields[t[0]]},n.prototype.getColorToLabel=function(t){return this.originalData.CompositePipeline.fields[t]},n.prototype.isActiveColor=function(t,e){return this.activeColors[t[0]]===e},n.prototype.setActiveColor=function(t,e){for(var r=t.length;r--;)this.activeColors[t[r]]=e;this.triggerChange()},n.prototype.getPipelineQuery=function(){var t=this,e="";return this.originalData.CompositePipeline.layers.forEach(function(r){var n=t.isLayerActive(r)&&t.isLayerVisible(r)?t.activeColors[r]:"_";e+=r,e+=n}),e},n.prototype.getPipelineDescription=function(){return this.originalData.CompositePipeline.pipeline},t.exports=e["default"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(32),i=r(33);e.LookupTable=n,e.PipelineState=i},function(t,e,r){"use strict";function n(t){var e=arguments.length<=1||void 0===arguments[1]?"#0000FF":arguments[1],r=arguments.length<=2||void 0===arguments[2]?["#e1002a","#417dc0","#1d9a57","#e9bc2f","#9b3880"]:arguments[2];this.data=null,this.colors=r,this.markerColor=e,this.markerLocation=-1,this.showMarker=!0,this.title=t}function i(t,e,r,n){function i(t){return s+c-Math.floor((f[t]-o)*v)}for(var o=Number.MAX_VALUE,a=Number.MIN_VALUE,u=e.x,s=e.y,l=e.width,c=e.height,f=r.data,h=f.length,p=h,g=new Uint16Array(p);p--;){var d=f[p];o=Math.min(o,d),a=Math.max(a,d),g[p]=u+Math.floor(l*(p/(h-1)))}n&&(o=n[0],a=n[1]);var v=c/(a-o);t.beginPath(),t.lineWidth=1,t.strokeStyle=r.color,t.moveTo(g[0],i(0));for(var b=1;h>b;b++)t.lineTo(g[b],i(b));t.stroke()}function o(t,e,r,n){if(!(0>r||r>1)){var i=e.y,o=i+e.height,a=e.x+Math.floor(r*e.width);t.beginPath(),t.lineWidth=1,t.strokeStyle=n,t.moveTo(a,i),t.lineTo(a,o),t.stroke()}}function a(t,e,r,n,i){var o=arguments.length<=5||void 0===arguments[5]?"#000000":arguments[5];t.fillStyle=o,t.font="20px serif",t.textBaseline="top",t.fillText(i,e.x+r,e.y+n)}Object.defineProperty(e,"__esModule",{value:!0}),e["default"]=n;var u=r(1),s="painter-ready";u.mixInto(n),n.prototype.updateData=function(t){var e=this;this.data=t;var r=0;t.fields.forEach(function(t){t.color||(t.color=e.colors[r++%e.colors.length])}),this.emit(s,this)},n.prototype.setTitle=function(t){this.title=t,this.emit(s,this)},n.prototype.setMarkerLocation=function(t){this.markerLocation=t,this.emit(s,this)},n.prototype.enableMarker=function(t){this.showMarker!==t&&(this.showMarker=t,this.emit(s,this))},n.prototype.isReady=function(){return null!==this.data},n.prototype.paint=function(t,e){if(this.data&&(t.clearRect(e.x-1,e.y-1,e.width+2,e.height+2),this.data.fields.forEach(function(r){i(t,e,r)}),this.showMarker&&o(t,e,this.markerLocation,this.markerColor),this.title)){var r=((this.data.xRange[1]-this.data.xRange[0])*this.markerLocation+this.data.xRange[0]).toFixed(5);a(t,e,10,10,this.title.replace(/{x}/g,r))}},n.prototype.onPainterReady=function(t){return this.on(s,t)},n.prototype.getControlWidgets=function(){return[]},t.exports=e["default"]},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(35);e.LineChart=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(4);e.CanvasOffscreenBuffer=n,e.WebGl=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(30),i=r(34),o=r(36),a=r(37);e.builder=n,e.model=i,e.painter=o,e.util=a},function(t,e,r){var n;(function(t,i){(function(){function o(t,e){if(t!==e){var r=null===t,n=t===P,i=t===t,o=null===e,a=e===P,u=e===e;if(t>e&&!o||!i||r&&!a&&u||n&&u)return 1;if(e>t&&!r||!u||o&&!n&&i||a&&i)return-1}return 0}function a(t,e,r){for(var n=t.length,i=r?n:-1;r?i--:++i<n;)if(e(t[i],i,t))return i;return-1}function u(t,e,r){if(e!==e)return m(t,r);for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}function s(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function c(t,e){for(var r=-1,n=t.length;++r<n&&e.indexOf(t.charAt(r))>-1;);return r}function f(t,e){for(var r=t.length;r--&&e.indexOf(t.charAt(r))>-1;);return r}function h(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function p(t,e,r){for(var n=-1,i=t.criteria,a=e.criteria,u=i.length,s=r.length;++n<u;){var l=o(i[n],a[n]);if(l){if(n>=s)return l;var c=r[n];return l*("asc"===c||c===!0?1:-1)}}return t.index-e.index}function g(t){return Wt[t]}function d(t){return Vt[t]}function v(t,e,r){return e?t=$t[t]:r&&(t=Kt[t]),"\\"+t}function b(t){return"\\"+Kt[t]}function m(t,e,r){for(var n=t.length,i=e+(r?0:-1);r?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function _(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;)t[r]===e&&(t[r]=W,o[++i]=r);return o}function C(t,e){for(var r,n=-1,i=t.length,o=-1,a=[];++n<i;){var u=t[n],s=e?e(u,n,t):u;n&&r===s||(r=s,a[++o]=u)}return a}function T(t){for(var e=-1,r=t.length;++e<r&&_(t.charCodeAt(e)););return e}function E(t){for(var e=t.length;e--&&_(t.charCodeAt(e)););return e}function w(t){return Zt[t]}function R(t){function e(t){if(y(t)&&!Au(t)&&!(t instanceof i)){if(t instanceof n)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pn(t)}return new n(t)}function r(){}function n(t,e,r){this.__wrapped__=t,this.__actions__=r||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ma,this.__views__=[]}function _(){var t=new i(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function J(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function nt(){var t=this.__wrapped__.value(),e=this.__dir__,r=Au(t),n=0>e,i=r?t.length:0,o=qr(0,i,this.__views__),a=o.start,u=o.end,s=u-a,l=n?u:a-1,c=this.__iteratees__,f=c.length,h=0,p=Ta(s,this.__takeCount__);if(!r||z>i||i==s&&p==s)return rr(n&&r?t.reverse():t,this.__actions__);var g=[];t:for(;s--&&p>h;){l+=e;for(var d=-1,v=t[l];++d<f;){var b=c[d],m=b.iteratee,y=b.type,_=m(v);if(y==G)v=_;else if(!_){if(y==Y)continue t;break t}}g[h++]=v}return g}function ot(){this.__data__={}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Vt(t){return"__proto__"==t?P:this.__data__[t]}function Zt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function Qt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function $t(t){var e=t?t.length:0;for(this.data={hash:ba(null),set:new fa};e--;)this.push(t[e])}function Kt(t,e){var r=t.data,n="string"==typeof e||ki(e)?r.set.has(e):r.hash[e];return n?0:-1}function Ht(t){var e=this.data;"string"==typeof t||ki(t)?e.set.add(t):e.hash[t]=!0}function Jt(t,e){for(var r=-1,n=t.length,i=-1,o=e.length,a=Bo(n+o);++r<n;)a[r]=t[r];for(;++i<o;)a[r++]=e[i];return a}function te(t,e){var r=-1,n=t.length;for(e||(e=Bo(n));++r<n;)e[r]=t[r];return e}function ee(t,e){for(var r=-1,n=t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function re(t,e){for(var r=t.length;r--&&e(t[r],r,t)!==!1;);return t}function oe(t,e){for(var r=-1,n=t.length;++r<n;)if(!e(t[r],r,t))return!1;return!0}function ae(t,e,r,n){for(var i=-1,o=t.length,a=n,u=a;++i<o;){var s=t[i],l=+e(s);r(l,a)&&(a=l,u=s)}return u}function ue(t,e){for(var r=-1,n=t.length,i=-1,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[++i]=a)}return o}function se(t,e){for(var r=-1,n=t.length,i=Bo(n);++r<n;)i[r]=e(t[r],r,t);return i}function le(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}function ce(t,e,r,n){var i=-1,o=t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}function fe(t,e,r,n){var i=t.length;for(n&&i&&(r=t[--i]);i--;)r=e(r,t[i],i,t);return r}function he(t,e){for(var r=-1,n=t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function pe(t,e){for(var r=t.length,n=0;r--;)n+=+e(t[r])||0;return n}function ge(t,e){return t===P?e:t}function de(t,e,r,n){return t!==P&&ea.call(n,r)?t:e}function ve(t,e,r){for(var n=-1,i=Xu(e),o=i.length;++n<o;){var a=i[n],u=t[a],s=r(u,e[a],a,t,e);(s===s?s===u:u!==u)&&(u!==P||a in t)||(t[a]=s)}return t}function be(t,e){return null==e?t:ye(e,Xu(e),t)}function me(t,e){for(var r=-1,n=null==t,i=!n&&$r(t),o=i?t.length:0,a=e.length,u=Bo(a);++r<a;){var s=e[r];i?u[r]=Kr(s,o)?t[s]:P:u[r]=n?P:t[s]}return u}function ye(t,e,r){r||(r={});for(var n=-1,i=e.length;++n<i;){var o=e[n];r[o]=t[o]}return r}function _e(t,e,r){var n=typeof t;return"function"==n?e===P?t:or(t,e,r):null==t?Mo:"object"==n?Ne(t):e===P?ko(t):Xe(t,e)}function xe(t,e,r,n,i,o,a){var u;if(r&&(u=i?r(t,n,i):r(t)),u!==P)return u;if(!ki(t))return t;var s=Au(t);if(s){if(u=Wr(t),!e)return te(t,u)}else{var l=na.call(t),c=l==H;if(l!=et&&l!=V&&(!c||i))return qt[l]?Zr(t,l,e):i?t:{};if(u=Vr(c?{}:t),!e)return be(u,t)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==t)return a[f];return o.push(t),a.push(u),(s?ee:De)(t,function(n,i){u[i]=xe(n,e,r,i,t,o,a)}),u}function Ce(t,e,r){if("function"!=typeof t)throw new $o(q);return ha(function(){t.apply(P,r)},e)}function Te(t,e){var r=t?t.length:0,n=[];if(!r)return n;var i=-1,o=zr(),a=o==u,s=a&&e.length>=z?gr(e):null,l=e.length;s&&(o=Kt,a=!1,e=s);t:for(;++i<r;){var c=t[i];if(a&&c===c){for(var f=l;f--;)if(e[f]===c)continue t;n.push(c)}else o(e,c,0)<0&&n.push(c)}return n}function Ee(t,e){var r=!0;return Oa(t,function(t,n,i){return r=!!e(t,n,i)}),r}function we(t,e,r,n){var i=n,o=i;return Oa(t,function(t,a,u){var s=+e(t,a,u);(r(s,i)||s===n&&s===o)&&(i=s,o=t)}),o}function Re(t,e,r,n){var i=t.length;for(r=null==r?0:+r||0,0>r&&(r=-r>i?0:i+r),n=n===P||n>i?i:+n||0,0>n&&(n+=i),i=r>n?0:n>>>0,r>>>=0;i>r;)t[r++]=e;return t}function Pe(t,e){var r=[];return Oa(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r}function Me(t,e,r,n){var i;return r(t,function(t,r,o){return e(t,r,o)?(i=n?r:t,!1):void 0}),i}function Ae(t,e,r,n){n||(n=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];y(a)&&$r(a)&&(r||Au(a)||wi(a))?e?Ae(a,e,r,n):le(n,a):r||(n[n.length]=a)}return n}function Se(t,e){return ja(t,e,to)}function De(t,e){return ja(t,e,Xu)}function Le(t,e){return Na(t,e,Xu)}function Ie(t,e){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var a=e[r];Ii(t[a])&&(o[++i]=a)}return o}function ke(t,e,r){if(null!=t){r!==P&&r in fn(t)&&(e=[r]);for(var n=0,i=e.length;null!=t&&i>n;)t=t[e[n++]];return n&&n==i?t:P}}function Fe(t,e,r,n,i,o){return t===e?!0:null==t||null==e||!ki(t)&&!y(e)?t!==t&&e!==e:Oe(t,e,Fe,r,n,i,o)}function Oe(t,e,r,n,i,o,a){var u=Au(t),s=Au(e),l=Z,c=Z;u||(l=na.call(t),l==V?l=et:l!=et&&(u=Yi(t))),s||(c=na.call(e),c==V?c=et:c!=et&&(s=Yi(e)));var f=l==et,h=c==et,p=l==c;if(p&&!u&&!f)return jr(t,e,l);if(!i){var g=f&&ea.call(t,"__wrapped__"),d=h&&ea.call(e,"__wrapped__");if(g||d)return r(g?t.value():t,d?e.value():e,n,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var b=(u?Ur:Nr)(t,e,r,n,i,o,a);return o.pop(),a.pop(),b}function Ue(t,e,r){var n=e.length,i=n,o=!r;if(null==t)return!i;for(t=fn(t);n--;){var a=e[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<i;){a=e[n];var u=a[0],s=t[u],l=a[1];if(o&&a[2]){if(s===P&&!(u in t))return!1}else{var c=r?r(s,l,u):P;if(!(c===P?Fe(l,s,r,!0):c))return!1}}return!0}function je(t,e){var r=-1,n=$r(t)?Bo(t.length):[];return Oa(t,function(t,i,o){n[++r]=e(t,i,o)}),n}function Ne(t){var e=Yr(t);if(1==e.length&&e[0][2]){var r=e[0][0],n=e[0][1];return function(t){return null==t?!1:t[r]===n&&(n!==P||r in fn(t))}}return function(t){return Ue(t,e)}}function Xe(t,e){var r=Au(t),n=Jr(t)&&rn(e),i=t+"";return t=hn(t),function(o){if(null==o)return!1;var a=i;if(o=fn(o),(r||!n)&&!(a in o)){if(o=1==t.length?o:ke(o,Ze(t,0,-1)),null==o)return!1;a=Rn(t),o=fn(o)}return o[a]===e?e!==P||a in o:Fe(e,o[a],P,!0)}}function Be(t,e,r,n,i){if(!ki(t))return t;var o=$r(e)&&(Au(e)||Yi(e)),a=o?P:Xu(e);return ee(a||e,function(u,s){if(a&&(s=u,u=e[s]),y(u))n||(n=[]),i||(i=[]),ze(t,e,s,Be,r,n,i);else{var l=t[s],c=r?r(l,u,s,t,e):P,f=c===P;f&&(c=u),c===P&&(!o||s in t)||!f&&(c===c?c===l:l!==l)||(t[s]=c)}}),t}function ze(t,e,r,n,i,o,a){for(var u=o.length,s=e[r];u--;)if(o[u]==s)return void(t[r]=a[u]);var l=t[r],c=i?i(l,s,r,t,e):P,f=c===P;f&&(c=s,$r(s)&&(Au(s)||Yi(s))?c=Au(l)?l:$r(l)?te(l):[]:Xi(s)||wi(s)?c=wi(l)?Zi(l):Xi(l)?l:{}:f=!1),o.push(s),a.push(c),f?t[r]=n(c,s,i,o,a):(c===c?c!==l:l===l)&&(t[r]=c)}function Ye(t){return function(e){return null==e?P:e[t]}}function Ge(t){var e=t+"";return t=hn(t),function(r){return ke(r,t,e)}}function qe(t,e){for(var r=t?e.length:0;r--;){var n=e[r];if(n!=i&&Kr(n)){var i=n;pa.call(t,n,1)}}return t}function We(t,e){return t+ma(Ra()*(e-t+1))}function Ve(t,e,r,n,i){
return i(t,function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)}),r}function Ze(t,e,r){var n=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),r=r===P||r>i?i:+r||0,0>r&&(r+=i),i=e>r?0:r-e>>>0,e>>>=0;for(var o=Bo(i);++n<i;)o[n]=t[n+e];return o}function Qe(t,e){var r;return Oa(t,function(t,n,i){return r=e(t,n,i),!r}),!!r}function $e(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}function Ke(t,e,r){var n=Xr(),i=-1;e=se(e,function(t){return n(t)});var o=je(t,function(t){var r=se(e,function(e){return e(t)});return{criteria:r,index:++i,value:t}});return $e(o,function(t,e){return p(t,e,r)})}function He(t,e){var r=0;return Oa(t,function(t,n,i){r+=+e(t,n,i)||0}),r}function Je(t,e){var r=-1,n=zr(),i=t.length,o=n==u,a=o&&i>=z,s=a?gr():null,l=[];s?(n=Kt,o=!1):(a=!1,s=e?[]:l);t:for(;++r<i;){var c=t[r],f=e?e(c,r,t):c;if(o&&c===c){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),l.push(c)}else n(s,f,0)<0&&((e||a)&&s.push(f),l.push(c))}return l}function tr(t,e){for(var r=-1,n=e.length,i=Bo(n);++r<n;)i[r]=t[e[r]];return i}function er(t,e,r,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&e(t[o],o,t););return r?Ze(t,n?0:o,n?o+1:i):Ze(t,n?o+1:0,n?i:o)}function rr(t,e){var r=t;r instanceof i&&(r=r.value());for(var n=-1,o=e.length;++n<o;){var a=e[n];r=a.func.apply(a.thisArg,le([r],a.args))}return r}function nr(t,e,r){var n=0,i=t?t.length:n;if("number"==typeof e&&e===e&&Da>=i){for(;i>n;){var o=n+i>>>1,a=t[o];(r?e>=a:e>a)&&null!==a?n=o+1:i=o}return i}return ir(t,e,Mo,r)}function ir(t,e,r,n){e=r(e);for(var i=0,o=t?t.length:0,a=e!==e,u=null===e,s=e===P;o>i;){var l=ma((i+o)/2),c=r(t[l]),f=c!==P,h=c===c;if(a)var p=h||n;else p=u?h&&f&&(n||null!=c):s?h&&(n||f):null==c?!1:n?e>=c:e>c;p?i=l+1:o=l}return Ta(o,Sa)}function or(t,e,r){if("function"!=typeof t)return Mo;if(e===P)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 3:return function(r,n,i){return t.call(e,r,n,i)};case 4:return function(r,n,i,o){return t.call(e,r,n,i,o)};case 5:return function(r,n,i,o,a){return t.call(e,r,n,i,o,a)}}return function(){return t.apply(e,arguments)}}function ar(t){var e=new aa(t.byteLength),r=new ga(e);return r.set(new ga(t)),e}function ur(t,e,r){for(var n=r.length,i=-1,o=Ca(t.length-n,0),a=-1,u=e.length,s=Bo(u+o);++a<u;)s[a]=e[a];for(;++i<n;)s[r[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function sr(t,e,r){for(var n=-1,i=r.length,o=-1,a=Ca(t.length-i,0),u=-1,s=e.length,l=Bo(a+s);++o<a;)l[o]=t[o];for(var c=o;++u<s;)l[c+u]=e[u];for(;++n<i;)l[c+r[n]]=t[o++];return l}function lr(t,e){return function(r,n,i){var o=e?e():{};if(n=Xr(n,i,3),Au(r))for(var a=-1,u=r.length;++a<u;){var s=r[a];t(o,s,n(s,a,r),r)}else Oa(r,function(e,r,i){t(o,e,n(e,r,i),i)});return o}}function cr(t){return bi(function(e,r){var n=-1,i=null==e?0:r.length,o=i>2?r[i-2]:P,a=i>2?r[2]:P,u=i>1?r[i-1]:P;for("function"==typeof o?(o=or(o,u,5),i-=2):(o="function"==typeof u?u:P,i-=o?1:0),a&&Hr(r[0],r[1],a)&&(o=3>i?P:o,i=1);++n<i;){var s=r[n];s&&t(e,s,o)}return e})}function fr(t,e){return function(r,n){var i=r?za(r):0;if(!en(i))return t(r,n);for(var o=e?i:-1,a=fn(r);(e?o--:++o<i)&&n(a[o],o,a)!==!1;);return r}}function hr(t){return function(e,r,n){for(var i=fn(e),o=n(e),a=o.length,u=t?a:-1;t?u--:++u<a;){var s=o[u];if(r(i[s],s,i)===!1)break}return e}}function pr(t,e){function r(){var i=this&&this!==ne&&this instanceof r?n:t;return i.apply(e,arguments)}var n=vr(t);return r}function gr(t){return ba&&fa?new $t(t):null}function dr(t){return function(e){for(var r=-1,n=wo(co(e)),i=n.length,o="";++r<i;)o=t(o,n[r],r);return o}}function vr(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var r=Fa(t.prototype),n=t.apply(r,e);return ki(n)?n:r}}function br(t){function e(r,n,i){i&&Hr(r,n,i)&&(n=P);var o=Or(r,t,P,P,P,P,P,n);return o.placeholder=e.placeholder,o}return e}function mr(t,e){return bi(function(r){var n=r[0];return null==n?n:(r.push(e),t.apply(P,r))})}function yr(t,e){return function(r,n,i){if(i&&Hr(r,n,i)&&(n=P),n=Xr(n,i,3),1==n.length){r=Au(r)?r:cn(r);var o=ae(r,n,t,e);if(!r.length||o!==e)return o}return we(r,n,t,e)}}function _r(t,e){return function(r,n,i){if(n=Xr(n,i,3),Au(r)){var o=a(r,n,e);return o>-1?r[o]:P}return Me(r,n,t)}}function xr(t){return function(e,r,n){return e&&e.length?(r=Xr(r,n,3),a(e,r,t)):-1}}function Cr(t){return function(e,r,n){return r=Xr(r,n,3),Me(e,r,t,!0)}}function Tr(t){return function(){for(var e,r=arguments.length,i=t?r:-1,o=0,a=Bo(r);t?i--:++i<r;){var u=a[o++]=arguments[i];if("function"!=typeof u)throw new $o(q);!e&&n.prototype.thru&&"wrapper"==Br(u)&&(e=new n([],!0))}for(i=e?-1:r;++i<r;){u=a[i];var s=Br(u),l="wrapper"==s?Ba(u):P;e=l&&tn(l[0])&&l[1]==(O|L|k|U)&&!l[4].length&&1==l[9]?e[Br(l[0])].apply(e,l[3]):1==u.length&&tn(u)?e[s]():e.thru(u)}return function(){var t=arguments,n=t[0];if(e&&1==t.length&&Au(n)&&n.length>=z)return e.plant(n).value();for(var i=0,o=r?a[i].apply(this,t):n;++i<r;)o=a[i].call(this,o);return o}}}function Er(t,e){return function(r,n,i){return"function"==typeof n&&i===P&&Au(r)?t(r,n):e(r,or(n,i,3))}}function wr(t){return function(e,r,n){return("function"!=typeof r||n!==P)&&(r=or(r,n,3)),t(e,r,to)}}function Rr(t){return function(e,r,n){return("function"!=typeof r||n!==P)&&(r=or(r,n,3)),t(e,r)}}function Pr(t){return function(e,r,n){var i={};return r=Xr(r,n,3),De(e,function(e,n,o){var a=r(e,n,o);n=t?a:n,e=t?e:a,i[n]=e}),i}}function Mr(t){return function(e,r,n){return e=l(e),(t?e:"")+Lr(e,r,n)+(t?"":e)}}function Ar(t){var e=bi(function(r,n){var i=x(n,e.placeholder);return Or(r,t,P,n,i)});return e}function Sr(t,e){return function(r,n,i,o){var a=arguments.length<3;return"function"==typeof n&&o===P&&Au(r)?t(r,n,i,a):Ve(r,Xr(n,o,4),i,a,e)}}function Dr(t,e,r,n,i,o,a,u,s,l){function c(){for(var m=arguments.length,y=m,_=Bo(m);y--;)_[y]=arguments[y];if(n&&(_=ur(_,n,i)),o&&(_=sr(_,o,a)),g||v){var C=c.placeholder,T=x(_,C);if(m-=T.length,l>m){var E=u?te(u):P,w=Ca(l-m,0),R=g?T:P,M=g?P:T,D=g?_:P,L=g?P:_;e|=g?k:F,e&=~(g?F:k),d||(e&=~(A|S));var I=[t,e,r,D,R,L,M,E,s,w],O=Dr.apply(P,I);return tn(t)&&Ya(O,I),O.placeholder=C,O}}var U=h?r:this,j=p?U[t]:t;return u&&(_=sn(_,u)),f&&s<_.length&&(_.length=s),this&&this!==ne&&this instanceof c&&(j=b||vr(t)),j.apply(U,_)}var f=e&O,h=e&A,p=e&S,g=e&L,d=e&D,v=e&I,b=p?P:vr(t);return c}function Lr(t,e,r){var n=t.length;if(e=+e,n>=e||!_a(e))return"";var i=e-n;return r=null==r?" ":r+"",bo(r,va(i/r.length)).slice(0,i)}function Ir(t,e,r,n){function i(){for(var e=-1,u=arguments.length,s=-1,l=n.length,c=Bo(l+u);++s<l;)c[s]=n[s];for(;u--;)c[s++]=arguments[++e];var f=this&&this!==ne&&this instanceof i?a:t;return f.apply(o?r:this,c)}var o=e&A,a=vr(t);return i}function kr(t){var e=qo[t];return function(t,r){return r=r===P?0:+r||0,r?(r=la(10,r),e(t*r)/r):e(t)}}function Fr(t){return function(e,r,n,i){var o=Xr(n);return null==n&&o===_e?nr(e,r,t):ir(e,r,o(n,i,1),t)}}function Or(t,e,r,n,i,o,a,u){var s=e&S;if(!s&&"function"!=typeof t)throw new $o(q);var l=n?n.length:0;if(l||(e&=~(k|F),n=i=P),l-=i?i.length:0,e&F){var c=n,f=i;n=i=P}var h=s?P:Ba(t),p=[t,e,r,n,i,c,f,o,a,u];if(h&&(nn(p,h),e=p[1],u=p[9]),p[9]=null==u?s?0:t.length:Ca(u-l,0)||0,e==A)var g=pr(p[0],p[2]);else g=e!=k&&e!=(A|k)||p[4].length?Dr.apply(P,p):Ir.apply(P,p);var d=h?Xa:Ya;return d(g,p)}function Ur(t,e,r,n,i,o,a){var u=-1,s=t.length,l=e.length;if(s!=l&&!(i&&l>s))return!1;for(;++u<s;){var c=t[u],f=e[u],h=n?n(i?f:c,i?c:f,u):P;if(h!==P){if(h)continue;return!1}if(i){if(!he(e,function(t){return c===t||r(c,t,n,i,o,a)}))return!1}else if(c!==f&&!r(c,f,n,i,o,a))return!1}return!0}function jr(t,e,r){switch(r){case Q:case $:return+t==+e;case K:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case rt:case it:return t==e+""}return!1}function Nr(t,e,r,n,i,o,a){var u=Xu(t),s=u.length,l=Xu(e),c=l.length;if(s!=c&&!i)return!1;for(var f=s;f--;){var h=u[f];if(!(i?h in e:ea.call(e,h)))return!1}for(var p=i;++f<s;){h=u[f];var g=t[h],d=e[h],v=n?n(i?d:g,i?g:d,h):P;if(!(v===P?r(g,d,n,i,o,a):v))return!1;p||(p="constructor"==h)}if(!p){var b=t.constructor,m=e.constructor;if(b!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m))return!1}return!0}function Xr(t,r,n){var i=e.callback||Ro;return i=i===Ro?_e:i,n?i(t,r,n):i}function Br(t){for(var e=t.name,r=ka[e],n=r?r.length:0;n--;){var i=r[n],o=i.func;if(null==o||o==t)return i.name}return e}function zr(t,r,n){var i=e.indexOf||En;return i=i===En?u:i,t?i(t,r,n):i}function Yr(t){for(var e=eo(t),r=e.length;r--;)e[r][2]=rn(e[r][1]);return e}function Gr(t,e){var r=null==t?P:t[e];return Ui(r)?r:P}function qr(t,e,r){for(var n=-1,i=r.length;++n<i;){var o=r[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ta(e,t+a);break;case"takeRight":t=Ca(t,e-a)}}return{start:t,end:e}}function Wr(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function Vr(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Vo),new e}function Zr(t,e,r){var n=t.constructor;switch(e){case at:return ar(t);case Q:case $:return new n(+t);case ut:case st:case lt:case ct:case ft:case ht:case pt:case gt:case dt:var i=t.buffer;return new n(r?ar(i):i,t.byteOffset,t.length);case tt:case it:return new n(t);case rt:var o=new n(t.source,kt.exec(t));o.lastIndex=t.lastIndex}return o}function Qr(t,e,r){null==t||Jr(e,t)||(e=hn(e),t=1==e.length?t:ke(t,Ze(e,0,-1)),e=Rn(e));var n=null==t?t:t[e];return null==n?P:n.apply(t,r)}function $r(t){return null!=t&&en(za(t))}function Kr(t,e){return t="number"==typeof t||Ut.test(t)?+t:-1,e=null==e?La:e,t>-1&&t%1==0&&e>t}function Hr(t,e,r){if(!ki(r))return!1;var n=typeof e;if("number"==n?$r(r)&&Kr(e,r.length):"string"==n&&e in r){var i=r[e];return t===t?t===i:i!==i}return!1}function Jr(t,e){var r=typeof t;if("string"==r&&Pt.test(t)||"number"==r)return!0;if(Au(t))return!1;var n=!Rt.test(t);return n||null!=e&&t in fn(e)}function tn(t){var r=Br(t);if(!(r in i.prototype))return!1;var n=e[r];if(t===n)return!0;var o=Ba(n);return!!o&&t===o[0]}function en(t){return"number"==typeof t&&t>-1&&t%1==0&&La>=t}function rn(t){return t===t&&!ki(t)}function nn(t,e){var r=t[1],n=e[1],i=r|n,o=O>i,a=n==O&&r==L||n==O&&r==U&&t[7].length<=e[8]||n==(O|U)&&r==L;if(!o&&!a)return t;n&A&&(t[2]=e[2],i|=r&A?0:D);var u=e[3];if(u){var s=t[3];t[3]=s?ur(s,u,e[4]):te(u),t[4]=s?x(t[3],W):te(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?sr(s,u,e[6]):te(u),t[6]=s?x(t[5],W):te(e[6])),u=e[7],u&&(t[7]=te(u)),n&O&&(t[8]=null==t[8]?e[8]:Ta(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function on(t,e){return t===P?e:Su(t,e,on)}function an(t,e){t=fn(t);for(var r=-1,n=e.length,i={};++r<n;){var o=e[r];o in t&&(i[o]=t[o])}return i}function un(t,e){var r={};return Se(t,function(t,n,i){e(t,n,i)&&(r[n]=t)}),r}function sn(t,e){for(var r=t.length,n=Ta(e.length,r),i=te(t);n--;){var o=e[n];t[n]=Kr(o,r)?i[o]:P}return t}function ln(t){for(var e=to(t),r=e.length,n=r&&t.length,i=!!n&&en(n)&&(Au(t)||wi(t)),o=-1,a=[];++o<r;){var u=e[o];(i&&Kr(u,n)||ea.call(t,u))&&a.push(u)}return a}function cn(t){return null==t?[]:$r(t)?ki(t)?t:Vo(t):oo(t)}function fn(t){return ki(t)?t:Vo(t)}function hn(t){if(Au(t))return t;var e=[];return l(t).replace(Mt,function(t,r,n,i){e.push(n?i.replace(Lt,"$1"):r||t)}),e}function pn(t){return t instanceof i?t.clone():new n(t.__wrapped__,t.__chain__,te(t.__actions__))}function gn(t,e,r){e=(r?Hr(t,e,r):null==e)?1:Ca(ma(e)||1,1);for(var n=0,i=t?t.length:0,o=-1,a=Bo(va(i/e));i>n;)a[++o]=Ze(t,n,n+=e);return a}function dn(t){for(var e=-1,r=t?t.length:0,n=-1,i=[];++e<r;){var o=t[e];o&&(i[++n]=o)}return i}function vn(t,e,r){var n=t?t.length:0;return n?((r?Hr(t,e,r):null==e)&&(e=1),Ze(t,0>e?0:e)):[]}function bn(t,e,r){var n=t?t.length:0;return n?((r?Hr(t,e,r):null==e)&&(e=1),e=n-(+e||0),Ze(t,0,0>e?0:e)):[]}function mn(t,e,r){return t&&t.length?er(t,Xr(e,r,3),!0,!0):[]}function yn(t,e,r){return t&&t.length?er(t,Xr(e,r,3),!0):[]}function _n(t,e,r,n){var i=t?t.length:0;return i?(r&&"number"!=typeof r&&Hr(t,e,r)&&(r=0,n=i),Re(t,e,r,n)):[]}function xn(t){return t?t[0]:P}function Cn(t,e,r){var n=t?t.length:0;return r&&Hr(t,e,r)&&(e=!1),n?Ae(t,e):[]}function Tn(t){var e=t?t.length:0;return e?Ae(t,!0):[]}function En(t,e,r){var n=t?t.length:0;if(!n)return-1;if("number"==typeof r)r=0>r?Ca(n+r,0):r;else if(r){var i=nr(t,e);return n>i&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return u(t,e,r||0)}function wn(t){return bn(t,1)}function Rn(t){var e=t?t.length:0;return e?t[e-1]:P}function Pn(t,e,r){var n=t?t.length:0;if(!n)return-1;var i=n;if("number"==typeof r)i=(0>r?Ca(n+r,0):Ta(r||0,n-1))+1;else if(r){i=nr(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return m(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Mn(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var r=0,n=zr(),i=t.length;++r<i;)for(var o=0,a=t[r];(o=n(e,a,o))>-1;)pa.call(e,o,1);return e}function An(t,e,r){var n=[];if(!t||!t.length)return n;var i=-1,o=[],a=t.length;for(e=Xr(e,r,3);++i<a;){var u=t[i];e(u,i,t)&&(n.push(u),o.push(i))}return qe(t,o),n}function Sn(t){return vn(t,1)}function Dn(t,e,r){var n=t?t.length:0;return n?(r&&"number"!=typeof r&&Hr(t,e,r)&&(e=0,r=n),Ze(t,e,r)):[]}function Ln(t,e,r){var n=t?t.length:0;return n?((r?Hr(t,e,r):null==e)&&(e=1),Ze(t,0,0>e?0:e)):[]}function In(t,e,r){var n=t?t.length:0;return n?((r?Hr(t,e,r):null==e)&&(e=1),e=n-(+e||0),Ze(t,0>e?0:e)):[]}function kn(t,e,r){return t&&t.length?er(t,Xr(e,r,3),!1,!0):[]}function Fn(t,e,r){return t&&t.length?er(t,Xr(e,r,3)):[]}function On(t,e,r,n){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(n=r,r=Hr(t,e,n)?P:e,e=!1);var o=Xr();return(null!=r||o!==_e)&&(r=o(r,n,3)),e&&zr()==u?C(t,r):Je(t,r)}function Un(t){if(!t||!t.length)return[];var e=-1,r=0;t=ue(t,function(t){return $r(t)?(r=Ca(t.length,r),!0):void 0});for(var n=Bo(r);++e<r;)n[e]=se(t,Ye(e));return n}function jn(t,e,r){var n=t?t.length:0;if(!n)return[];var i=Un(t);return null==e?i:(e=or(e,r,4),se(i,function(t){return ce(t,e,P,!0)}))}function Nn(){for(var t=-1,e=arguments.length;++t<e;){var r=arguments[t];if($r(r))var n=n?le(Te(n,r),Te(r,n)):r}return n?Je(n):[]}function Xn(t,e){var r=-1,n=t?t.length:0,i={};for(!n||e||Au(t[0])||(e=[]);++r<n;){var o=t[r];e?i[o]=e[r]:o&&(i[o[0]]=o[1])}return i}function Bn(t){var r=e(t);return r.__chain__=!0,r}function zn(t,e,r){return e.call(r,t),t}function Yn(t,e,r){return e.call(r,t)}function Gn(){return Bn(this)}function qn(){return new n(this.value(),this.__chain__)}function Wn(t){for(var e,n=this;n instanceof r;){var i=pn(n);e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e}function Vn(){var t=this.__wrapped__,e=function(t){return r&&r.__dir__<0?t:t.reverse()};if(t instanceof i){var r=t;return this.__actions__.length&&(r=new i(this)),r=r.reverse(),r.__actions__.push({func:Yn,args:[e],thisArg:P}),new n(r,this.__chain__)}return this.thru(e)}function Zn(){return this.value()+""}function Qn(){return rr(this.__wrapped__,this.__actions__)}function $n(t,e,r){var n=Au(t)?oe:Ee;return r&&Hr(t,e,r)&&(e=P),("function"!=typeof e||r!==P)&&(e=Xr(e,r,3)),n(t,e)}function Kn(t,e,r){var n=Au(t)?ue:Pe;return e=Xr(e,r,3),n(t,e)}function Hn(t,e){return iu(t,Ne(e))}function Jn(t,e,r,n){var i=t?za(t):0;return en(i)||(t=oo(t),i=t.length),r="number"!=typeof r||n&&Hr(e,r,n)?0:0>r?Ca(i+r,0):r||0,"string"==typeof t||!Au(t)&&zi(t)?i>=r&&t.indexOf(e,r)>-1:!!i&&zr(t,e,r)>-1}function ti(t,e,r){var n=Au(t)?se:je;return e=Xr(e,r,3),n(t,e)}function ei(t,e){return ti(t,ko(e))}function ri(t,e,r){var n=Au(t)?ue:Pe;return e=Xr(e,r,3),n(t,function(t,r,n){return!e(t,r,n)})}function ni(t,e,r){if(r?Hr(t,e,r):null==e){t=cn(t);var n=t.length;return n>0?t[We(0,n-1)]:P}var i=-1,o=Vi(t),n=o.length,a=n-1;for(e=Ta(0>e?0:+e||0,n);++i<e;){var u=We(i,a),s=o[u];o[u]=o[i],o[i]=s}return o.length=e,o}function ii(t){return ni(t,Ma)}function oi(t){var e=t?za(t):0;return en(e)?e:Xu(t).length}function ai(t,e,r){var n=Au(t)?he:Qe;return r&&Hr(t,e,r)&&(e=P),("function"!=typeof e||r!==P)&&(e=Xr(e,r,3)),n(t,e)}function ui(t,e,r){if(null==t)return[];r&&Hr(t,e,r)&&(e=P);var n=-1;e=Xr(e,r,3);var i=je(t,function(t,r,i){return{criteria:e(t,r,i),index:++n,value:t}});return $e(i,h)}function si(t,e,r,n){return null==t?[]:(n&&Hr(e,r,n)&&(r=P),Au(e)||(e=null==e?[]:[e]),Au(r)||(r=null==r?[]:[r]),Ke(t,e,r))}function li(t,e){return Kn(t,Ne(e))}function ci(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new $o(q);var r=t;t=e,e=r}return t=_a(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function fi(t,e,r){return r&&Hr(t,e,r)&&(e=P),e=t&&null==e?t.length:Ca(+e||0,0),Or(t,O,P,P,P,P,e)}function hi(t,e){var r;if("function"!=typeof e){if("function"!=typeof t)throw new $o(q);var n=t;t=e,e=n}return function(){return--t>0&&(r=e.apply(this,arguments)),1>=t&&(e=P),r}}function pi(t,e,r){function n(){p&&ua(p),l&&ua(l),d=0,l=p=g=P}function i(e,r){r&&ua(r),l=p=g=P,e&&(d=du(),c=t.apply(h,s),p||l||(s=h=P))}function o(){var t=e-(du()-f);0>=t||t>e?i(g,l):p=ha(o,t)}function a(){i(b,p)}function u(){if(s=arguments,f=du(),h=this,g=b&&(p||!m),v===!1)var r=m&&!p;else{l||m||(d=f);var n=v-(f-d),i=0>=n||n>v;i?(l&&(l=ua(l)),d=f,c=t.apply(h,s)):l||(l=ha(a,n))}return i&&p?p=ua(p):p||e===v||(p=ha(o,e)),r&&(i=!0,c=t.apply(h,s)),!i||p||l||(s=h=P),c}var s,l,c,f,h,p,g,d=0,v=!1,b=!0;if("function"!=typeof t)throw new $o(q);if(e=0>e?0:+e||0,r===!0){var m=!0;b=!1}else ki(r)&&(m=!!r.leading,v="maxWait"in r&&Ca(+r.maxWait||0,e),b="trailing"in r?!!r.trailing:b);return u.cancel=n,u}function gi(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new $o(q);var r=function(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a),a};return r.cache=new gi.Cache,r}function di(t){if("function"!=typeof t)throw new $o(q);return function(){return!t.apply(this,arguments)}}function vi(t){return hi(2,t)}function bi(t,e){if("function"!=typeof t)throw new $o(q);return e=Ca(e===P?t.length-1:+e||0,0),function(){for(var r=arguments,n=-1,i=Ca(r.length-e,0),o=Bo(i);++n<i;)o[n]=r[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,r[0],o);case 2:return t.call(this,r[0],r[1],o)}var a=Bo(e+1);for(n=-1;++n<e;)a[n]=r[n];return a[e]=o,t.apply(this,a)}}function mi(t){if("function"!=typeof t)throw new $o(q);return function(e){return t.apply(this,e)}}function yi(t,e,r){var n=!0,i=!0;if("function"!=typeof t)throw new $o(q);return r===!1?n=!1:ki(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),pi(t,e,{leading:n,maxWait:+e,trailing:i})}function _i(t,e){return e=null==e?Mo:e,Or(e,k,P,[t],[])}function xi(t,e,r,n){return e&&"boolean"!=typeof e&&Hr(t,e,r)?e=!1:"function"==typeof e&&(n=r,r=e,e=!1),"function"==typeof r?xe(t,e,or(r,n,1)):xe(t,e)}function Ci(t,e,r){return"function"==typeof e?xe(t,!0,or(e,r,1)):xe(t,!0)}function Ti(t,e){return t>e}function Ei(t,e){return t>=e}function wi(t){return y(t)&&$r(t)&&ea.call(t,"callee")&&!ca.call(t,"callee")}function Ri(t){return t===!0||t===!1||y(t)&&na.call(t)==Q}function Pi(t){return y(t)&&na.call(t)==$}function Mi(t){return!!t&&1===t.nodeType&&y(t)&&!Xi(t)}function Ai(t){return null==t?!0:$r(t)&&(Au(t)||zi(t)||wi(t)||y(t)&&Ii(t.splice))?!t.length:!Xu(t).length}function Si(t,e,r,n){r="function"==typeof r?or(r,n,3):P;var i=r?r(t,e):P;return i===P?Fe(t,e,r):!!i}function Di(t){return y(t)&&"string"==typeof t.message&&na.call(t)==K}function Li(t){return"number"==typeof t&&_a(t)}function Ii(t){return ki(t)&&na.call(t)==H}function ki(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Fi(t,e,r,n){return r="function"==typeof r?or(r,n,3):P,Ue(t,Yr(e),r)}function Oi(t){return Ni(t)&&t!=+t}function Ui(t){return null==t?!1:Ii(t)?oa.test(ta.call(t)):y(t)&&Ot.test(t)}function ji(t){return null===t}function Ni(t){return"number"==typeof t||y(t)&&na.call(t)==tt}function Xi(t){var e;if(!y(t)||na.call(t)!=et||wi(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var r;return Se(t,function(t,e){r=e}),r===P||ea.call(t,r)}function Bi(t){return ki(t)&&na.call(t)==rt}function zi(t){return"string"==typeof t||y(t)&&na.call(t)==it}function Yi(t){return y(t)&&en(t.length)&&!!Gt[na.call(t)]}function Gi(t){return t===P}function qi(t,e){return e>t}function Wi(t,e){return e>=t}function Vi(t){var e=t?za(t):0;return en(e)?e?te(t):[]:oo(t)}function Zi(t){return ye(t,to(t))}function Qi(t,e,r){var n=Fa(t);return r&&Hr(t,e,r)&&(e=P),e?be(n,e):n}function $i(t){return Ie(t,to(t))}function Ki(t,e,r){var n=null==t?P:ke(t,hn(e),e+"");return n===P?r:n}function Hi(t,e){if(null==t)return!1;var r=ea.call(t,e);if(!r&&!Jr(e)){if(e=hn(e),t=1==e.length?t:ke(t,Ze(e,0,-1)),null==t)return!1;e=Rn(e),r=ea.call(t,e)}return r||en(t.length)&&Kr(e,t.length)&&(Au(t)||wi(t))}function Ji(t,e,r){r&&Hr(t,e,r)&&(e=P);for(var n=-1,i=Xu(t),o=i.length,a={};++n<o;){var u=i[n],s=t[u];e?ea.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a}function to(t){if(null==t)return[];ki(t)||(t=Vo(t));var e=t.length;e=e&&en(e)&&(Au(t)||wi(t))&&e||0;for(var r=t.constructor,n=-1,i="function"==typeof r&&r.prototype===t,o=Bo(e),a=e>0;++n<e;)o[n]=n+"";for(var u in t)a&&Kr(u,e)||"constructor"==u&&(i||!ea.call(t,u))||o.push(u);return o}function eo(t){t=fn(t);for(var e=-1,r=Xu(t),n=r.length,i=Bo(n);++e<n;){var o=r[e];i[e]=[o,t[o]]}return i}function ro(t,e,r){var n=null==t?P:t[e];return n===P&&(null==t||Jr(e,t)||(e=hn(e),t=1==e.length?t:ke(t,Ze(e,0,-1)),n=null==t?P:t[Rn(e)]),n=n===P?r:n),Ii(n)?n.call(t):n}function no(t,e,r){if(null==t)return t;var n=e+"";e=null!=t[n]||Jr(e,t)?[n]:hn(e);for(var i=-1,o=e.length,a=o-1,u=t;null!=u&&++i<o;){var s=e[i];ki(u)&&(i==a?u[s]=r:null==u[s]&&(u[s]=Kr(e[i+1])?[]:{})),u=u[s]}return t}function io(t,e,r,n){var i=Au(t)||Yi(t);if(e=Xr(e,n,4),null==r)if(i||ki(t)){var o=t.constructor;r=i?Au(t)?new o:[]:Fa(Ii(o)?o.prototype:P)}else r={};return(i?ee:De)(t,function(t,n,i){return e(r,t,n,i)}),r}function oo(t){return tr(t,Xu(t))}function ao(t){return tr(t,to(t))}function uo(t,e,r){return e=+e||0,r===P?(r=e,e=0):r=+r||0,t>=Ta(e,r)&&t<Ca(e,r)}function so(t,e,r){r&&Hr(t,e,r)&&(e=r=P);var n=null==t,i=null==e;if(null==r&&(i&&"boolean"==typeof t?(r=t,t=1):"boolean"==typeof e&&(r=e,i=!0)),n&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,r||t%1||e%1){var o=Ra();return Ta(t+o*(e-t+sa("1e-"+((o+"").length-1))),e)}return We(t,e)}function lo(t){return t=l(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return t=l(t),t&&t.replace(jt,g).replace(Dt,"")}function fo(t,e,r){t=l(t),e+="";var n=t.length;return r=r===P?n:Ta(0>r?0:+r||0,n),r-=e.length,r>=0&&t.indexOf(e,r)==r}function ho(t){return t=l(t),t&&Ct.test(t)?t.replace(_t,d):t}function po(t){return t=l(t),t&&St.test(t)?t.replace(At,v):t||"(?:)"}function go(t,e,r){t=l(t),e=+e;var n=t.length;if(n>=e||!_a(e))return t;var i=(e-n)/2,o=ma(i),a=va(i);return r=Lr("",a,r),r.slice(0,o)+t+r}function vo(t,e,r){return(r?Hr(t,e,r):null==e)?e=0:e&&(e=+e),t=_o(t),wa(t,e||(Ft.test(t)?16:10))}function bo(t,e){var r="";if(t=l(t),e=+e,1>e||!t||!_a(e))return r;do e%2&&(r+=t),e=ma(e/2),t+=t;while(e);return r}function mo(t,e,r){return t=l(t),r=null==r?0:Ta(0>r?0:+r||0,t.length),t.lastIndexOf(e,r)==r}function yo(t,r,n){var i=e.templateSettings;n&&Hr(t,r,n)&&(r=n=P),t=l(t),r=ve(be({},n||r),i,de);var o,a,u=ve(be({},r.imports),i.imports,de),s=Xu(u),c=tr(u,s),f=0,h=r.interpolate||Nt,p="__p += '",g=Zo((r.escape||Nt).source+"|"+h.source+"|"+(h===wt?It:Nt).source+"|"+(r.evaluate||Nt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in r?r.sourceURL:"lodash.templateSources["+ ++Yt+"]")+"\n";t.replace(g,function(e,r,n,i,u,s){return n||(n=i),p+=t.slice(f,s).replace(Xt,b),r&&(o=!0,p+="' +\n__e("+r+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=s+e.length,e}),p+="';\n";var v=r.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(vt,""):p).replace(bt,"$1").replace(mt,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Ku(function(){return Go(s,d+"return "+p).apply(P,c)});if(m.source=p,Di(m))throw m;return m}function _o(t,e,r){var n=t;return(t=l(t))?(r?Hr(n,e,r):null==e)?t.slice(T(t),E(t)+1):(e+="",t.slice(c(t,e),f(t,e)+1)):t}function xo(t,e,r){var n=t;return t=l(t),t?(r?Hr(n,e,r):null==e)?t.slice(T(t)):t.slice(c(t,e+"")):t}function Co(t,e,r){var n=t;return t=l(t),t?(r?Hr(n,e,r):null==e)?t.slice(0,E(t)+1):t.slice(0,f(t,e+"")+1):t}function To(t,e,r){r&&Hr(t,e,r)&&(e=P);var n=j,i=N;if(null!=e)if(ki(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n,i="omission"in e?l(e.omission):i}else n=+e||0;if(t=l(t),n>=t.length)return t;var a=n-i.length;if(1>a)return i;var u=t.slice(0,a);if(null==o)return u+i;if(Bi(o)){if(t.slice(a).search(o)){var s,c,f=t.slice(0,a);for(o.global||(o=Zo(o.source,(kt.exec(o)||"")+"g")),o.lastIndex=0;s=o.exec(f);)c=s.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i}function Eo(t){return t=l(t),t&&xt.test(t)?t.replace(yt,w):t}function wo(t,e,r){return r&&Hr(t,e,r)&&(e=P),t=l(t),t.match(e||Bt)||[]}function Ro(t,e,r){return r&&Hr(t,e,r)&&(e=P),y(t)?Ao(t):_e(t,e)}function Po(t){return function(){return t}}function Mo(t){return t}function Ao(t){return Ne(xe(t,!0))}function So(t,e){return Xe(t,xe(e,!0))}function Do(t,e,r){if(null==r){var n=ki(e),i=n?Xu(e):P,o=i&&i.length?Ie(e,i):P;(o?o.length:n)||(o=!1,r=e,e=t,t=this)}o||(o=Ie(e,Xu(e)));var a=!0,u=-1,s=Ii(t),l=o.length;r===!1?a=!1:ki(r)&&"chain"in r&&(a=r.chain);for(;++u<l;){var c=o[u],f=e[c];t[c]=f,s&&(t.prototype[c]=function(e){return function(){var r=this.__chain__;if(a||r){var n=t(this.__wrapped__),i=n.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}return e.apply(t,le([this.value()],arguments))}}(f))}return t}function Lo(){return ne._=ia,this}function Io(){}function ko(t){return Jr(t)?Ye(t):Ge(t)}function Fo(t){return function(e){return ke(t,hn(e),e+"")}}function Oo(t,e,r){r&&Hr(t,e,r)&&(e=r=P),t=+t||0,r=null==r?1:+r||0,null==e?(e=t,t=0):e=+e||0;for(var n=-1,i=Ca(va((e-t)/(r||1)),0),o=Bo(i);++n<i;)o[n]=t,t+=r;return o}function Uo(t,e,r){if(t=ma(t),1>t||!_a(t))return[];var n=-1,i=Bo(Ta(t,Aa));for(e=or(e,r,1);++n<t;)Aa>n?i[n]=e(n):e(n);return i}function jo(t){var e=++ra;return l(t)+e}function No(t,e){return(+t||0)+(+e||0)}function Xo(t,e,r){return r&&Hr(t,e,r)&&(e=P),e=Xr(e,r,3),1==e.length?pe(Au(t)?t:cn(t),e):He(t,e)}t=t?ie.defaults(ne.Object(),t,ie.pick(ne,zt)):ne;var Bo=t.Array,zo=t.Date,Yo=t.Error,Go=t.Function,qo=t.Math,Wo=t.Number,Vo=t.Object,Zo=t.RegExp,Qo=t.String,$o=t.TypeError,Ko=Bo.prototype,Ho=Vo.prototype,Jo=Qo.prototype,ta=Go.prototype.toString,ea=Ho.hasOwnProperty,ra=0,na=Ho.toString,ia=ne._,oa=Zo("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,ua=t.clearTimeout,sa=t.parseFloat,la=qo.pow,ca=Ho.propertyIsEnumerable,fa=Gr(t,"Set"),ha=t.setTimeout,pa=Ko.splice,ga=t.Uint8Array,da=Gr(t,"WeakMap"),va=qo.ceil,ba=Gr(Vo,"create"),ma=qo.floor,ya=Gr(Bo,"isArray"),_a=t.isFinite,xa=Gr(Vo,"keys"),Ca=qo.max,Ta=qo.min,Ea=Gr(zo,"now"),wa=t.parseInt,Ra=qo.random,Pa=Wo.NEGATIVE_INFINITY,Ma=Wo.POSITIVE_INFINITY,Aa=4294967295,Sa=Aa-1,Da=Aa>>>1,La=9007199254740991,Ia=da&&new da,ka={};e.support={};e.templateSettings={escape:Tt,evaluate:Et,interpolate:wt,variable:"",imports:{_:e}};var Fa=function(){function t(){}return function(e){if(ki(e)){t.prototype=e;var r=new t;t.prototype=P}return r||{}}}(),Oa=fr(De),Ua=fr(Le,!0),ja=hr(),Na=hr(!0),Xa=Ia?function(t,e){return Ia.set(t,e),t}:Mo,Ba=Ia?function(t){return Ia.get(t)}:Io,za=Ye("length"),Ya=function(){var t=0,e=0;return function(r,n){var i=du(),o=B-(i-e);if(e=i,o>0){if(++t>=X)return r}else t=0;return Xa(r,n)}}(),Ga=bi(function(t,e){return y(t)&&$r(t)?Te(t,Ae(e,!1,!0)):[]}),qa=xr(),Wa=xr(!0),Va=bi(function(t){for(var e=t.length,r=e,n=Bo(f),i=zr(),o=i==u,a=[];r--;){var s=t[r]=$r(s=t[r])?s:[];n[r]=o&&s.length>=120?gr(r&&s):null}var l=t[0],c=-1,f=l?l.length:0,h=n[0];t:for(;++c<f;)if(s=l[c],(h?Kt(h,s):i(a,s,0))<0){for(var r=e;--r;){var p=n[r];if((p?Kt(p,s):i(t[r],s,0))<0)continue t}h&&h.push(s),a.push(s)}return a}),Za=bi(function(t,e){e=Ae(e);var r=me(t,e);return qe(t,e.sort(o)),r}),Qa=Fr(),$a=Fr(!0),Ka=bi(function(t){return Je(Ae(t,!1,!0))}),Ha=bi(function(t,e){return $r(t)?Te(t,e):[]}),Ja=bi(Un),tu=bi(function(t){var e=t.length,r=e>2?t[e-2]:P,n=e>1?t[e-1]:P;return e>2&&"function"==typeof r?e-=2:(r=e>1&&"function"==typeof n?(--e,n):P,n=P),t.length=e,jn(t,r,n)}),eu=bi(function(t){return t=Ae(t),this.thru(function(e){return Jt(Au(e)?e:[fn(e)],t)})}),ru=bi(function(t,e){return me(t,Ae(e))}),nu=lr(function(t,e,r){ea.call(t,r)?++t[r]:t[r]=1}),iu=_r(Oa),ou=_r(Ua,!0),au=Er(ee,Oa),uu=Er(re,Ua),su=lr(function(t,e,r){ea.call(t,r)?t[r].push(e):t[r]=[e]}),lu=lr(function(t,e,r){t[r]=e}),cu=bi(function(t,e,r){var n=-1,i="function"==typeof e,o=Jr(e),a=$r(t)?Bo(t.length):[];return Oa(t,function(t){var u=i?e:o&&null!=t?t[e]:P;a[++n]=u?u.apply(t,r):Qr(t,e,r)}),a}),fu=lr(function(t,e,r){t[r?0:1].push(e)},function(){return[[],[]]}),hu=Sr(ce,Oa),pu=Sr(fe,Ua),gu=bi(function(t,e){if(null==t)return[];var r=e[2];return r&&Hr(e[0],e[1],r)&&(e.length=1),Ke(t,Ae(e),[])}),du=Ea||function(){return(new zo).getTime()},vu=bi(function(t,e,r){var n=A;if(r.length){var i=x(r,vu.placeholder);n|=k}return Or(t,n,e,r,i)}),bu=bi(function(t,e){e=e.length?Ae(e):$i(t);for(var r=-1,n=e.length;++r<n;){var i=e[r];t[i]=Or(t[i],A,t)}return t}),mu=bi(function(t,e,r){var n=A|S;if(r.length){var i=x(r,mu.placeholder);n|=k}return Or(e,n,t,r,i)}),yu=br(L),_u=br(I),xu=bi(function(t,e){return Ce(t,1,e)}),Cu=bi(function(t,e,r){return Ce(t,e,r)}),Tu=Tr(),Eu=Tr(!0),wu=bi(function(t,e){if(e=Ae(e),"function"!=typeof t||!oe(e,s))throw new $o(q);var r=e.length;return bi(function(n){for(var i=Ta(n.length,r);i--;)n[i]=e[i](n[i]);return t.apply(this,n)})}),Ru=Ar(k),Pu=Ar(F),Mu=bi(function(t,e){return Or(t,U,P,P,P,Ae(e))}),Au=ya||function(t){return y(t)&&en(t.length)&&na.call(t)==Z},Su=cr(Be),Du=cr(function(t,e,r){return r?ve(t,e,r):be(t,e)}),Lu=mr(Du,ge),Iu=mr(Su,on),ku=Cr(De),Fu=Cr(Le),Ou=wr(ja),Uu=wr(Na),ju=Rr(De),Nu=Rr(Le),Xu=xa?function(t){var e=null==t?P:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&$r(t)?ln(t):ki(t)?xa(t):[]}:ln,Bu=Pr(!0),zu=Pr(),Yu=bi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=se(Ae(e),Qo);return an(t,Te(to(t),e))}var r=or(e[0],e[1],3);return un(t,function(t,e,n){return!r(t,e,n)})}),Gu=bi(function(t,e){return null==t?{}:"function"==typeof e[0]?un(t,or(e[0],e[1],3)):an(t,Ae(e))}),qu=dr(function(t,e,r){return e=e.toLowerCase(),t+(r?e.charAt(0).toUpperCase()+e.slice(1):e)}),Wu=dr(function(t,e,r){return t+(r?"-":"")+e.toLowerCase()}),Vu=Mr(),Zu=Mr(!0),Qu=dr(function(t,e,r){return t+(r?"_":"")+e.toLowerCase()}),$u=dr(function(t,e,r){return t+(r?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ku=bi(function(t,e){try{return t.apply(P,e)}catch(r){return Di(r)?r:new Yo(r)}}),Hu=bi(function(t,e){return function(r){return Qr(r,t,e)}}),Ju=bi(function(t,e){return function(r){return Qr(t,r,e)}}),ts=kr("ceil"),es=kr("floor"),rs=yr(Ti,Pa),ns=yr(qi,Ma),is=kr("round");return e.prototype=r.prototype,n.prototype=Fa(r.prototype),n.prototype.constructor=n,i.prototype=Fa(r.prototype),i.prototype.constructor=i,ot.prototype["delete"]=Wt,ot.prototype.get=Vt,ot.prototype.has=Zt,ot.prototype.set=Qt,$t.prototype.push=Ht,gi.Cache=ot,e.after=ci,e.ary=fi,e.assign=Du,e.at=ru,e.before=hi,e.bind=vu,e.bindAll=bu,e.bindKey=mu,e.callback=Ro,e.chain=Bn,e.chunk=gn,e.compact=dn,e.constant=Po,e.countBy=nu,
e.create=Qi,e.curry=yu,e.curryRight=_u,e.debounce=pi,e.defaults=Lu,e.defaultsDeep=Iu,e.defer=xu,e.delay=Cu,e.difference=Ga,e.drop=vn,e.dropRight=bn,e.dropRightWhile=mn,e.dropWhile=yn,e.fill=_n,e.filter=Kn,e.flatten=Cn,e.flattenDeep=Tn,e.flow=Tu,e.flowRight=Eu,e.forEach=au,e.forEachRight=uu,e.forIn=Ou,e.forInRight=Uu,e.forOwn=ju,e.forOwnRight=Nu,e.functions=$i,e.groupBy=su,e.indexBy=lu,e.initial=wn,e.intersection=Va,e.invert=Ji,e.invoke=cu,e.keys=Xu,e.keysIn=to,e.map=ti,e.mapKeys=Bu,e.mapValues=zu,e.matches=Ao,e.matchesProperty=So,e.memoize=gi,e.merge=Su,e.method=Hu,e.methodOf=Ju,e.mixin=Do,e.modArgs=wu,e.negate=di,e.omit=Yu,e.once=vi,e.pairs=eo,e.partial=Ru,e.partialRight=Pu,e.partition=fu,e.pick=Gu,e.pluck=ei,e.property=ko,e.propertyOf=Fo,e.pull=Mn,e.pullAt=Za,e.range=Oo,e.rearg=Mu,e.reject=ri,e.remove=An,e.rest=Sn,e.restParam=bi,e.set=no,e.shuffle=ii,e.slice=Dn,e.sortBy=ui,e.sortByAll=gu,e.sortByOrder=si,e.spread=mi,e.take=Ln,e.takeRight=In,e.takeRightWhile=kn,e.takeWhile=Fn,e.tap=zn,e.throttle=yi,e.thru=Yn,e.times=Uo,e.toArray=Vi,e.toPlainObject=Zi,e.transform=io,e.union=Ka,e.uniq=On,e.unzip=Un,e.unzipWith=jn,e.values=oo,e.valuesIn=ao,e.where=li,e.without=Ha,e.wrap=_i,e.xor=Nn,e.zip=Ja,e.zipObject=Xn,e.zipWith=tu,e.backflow=Eu,e.collect=ti,e.compose=Eu,e.each=au,e.eachRight=uu,e.extend=Du,e.iteratee=Ro,e.methods=$i,e.object=Xn,e.select=Kn,e.tail=Sn,e.unique=On,Do(e,e),e.add=No,e.attempt=Ku,e.camelCase=qu,e.capitalize=lo,e.ceil=ts,e.clone=xi,e.cloneDeep=Ci,e.deburr=co,e.endsWith=fo,e.escape=ho,e.escapeRegExp=po,e.every=$n,e.find=iu,e.findIndex=qa,e.findKey=ku,e.findLast=ou,e.findLastIndex=Wa,e.findLastKey=Fu,e.findWhere=Hn,e.first=xn,e.floor=es,e.get=Ki,e.gt=Ti,e.gte=Ei,e.has=Hi,e.identity=Mo,e.includes=Jn,e.indexOf=En,e.inRange=uo,e.isArguments=wi,e.isArray=Au,e.isBoolean=Ri,e.isDate=Pi,e.isElement=Mi,e.isEmpty=Ai,e.isEqual=Si,e.isError=Di,e.isFinite=Li,e.isFunction=Ii,e.isMatch=Fi,e.isNaN=Oi,e.isNative=Ui,e.isNull=ji,e.isNumber=Ni,e.isObject=ki,e.isPlainObject=Xi,e.isRegExp=Bi,e.isString=zi,e.isTypedArray=Yi,e.isUndefined=Gi,e.kebabCase=Wu,e.last=Rn,e.lastIndexOf=Pn,e.lt=qi,e.lte=Wi,e.max=rs,e.min=ns,e.noConflict=Lo,e.noop=Io,e.now=du,e.pad=go,e.padLeft=Vu,e.padRight=Zu,e.parseInt=vo,e.random=so,e.reduce=hu,e.reduceRight=pu,e.repeat=bo,e.result=ro,e.round=is,e.runInContext=R,e.size=oi,e.snakeCase=Qu,e.some=ai,e.sortedIndex=Qa,e.sortedLastIndex=$a,e.startCase=$u,e.startsWith=mo,e.sum=Xo,e.template=yo,e.trim=_o,e.trimLeft=xo,e.trimRight=Co,e.trunc=To,e.unescape=Eo,e.uniqueId=jo,e.words=wo,e.all=$n,e.any=ai,e.contains=Jn,e.eq=Si,e.detect=iu,e.foldl=hu,e.foldr=pu,e.head=xn,e.include=Jn,e.inject=hu,Do(e,function(){var t={};return De(e,function(r,n){e.prototype[n]||(t[n]=r)}),t}(),!1),e.sample=ni,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ni(e,t)}):ni(this.value())},e.VERSION=M,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){i.prototype[t]=function(r){var n=this.__filtered__;if(n&&!e)return new i(this);r=null==r?1:Ca(ma(r)||0,0);var o=this.clone();return n?o.__takeCount__=Ta(o.__takeCount__,r):o.__views__.push({size:r,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var r=e+1,n=r!=G;i.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:Xr(t,e,1),type:r}),i.__filtered__=i.__filtered__||n,i}}),ee(["first","last"],function(t,e){var r="take"+(e?"Right":"");i.prototype[t]=function(){return this[r](1).value()[0]}}),ee(["initial","rest"],function(t,e){var r="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[r](1)}}),ee(["pluck","where"],function(t,e){var r=e?"filter":"map",n=e?Ne:ko;i.prototype[t]=function(t){return this[r](n(t))}}),i.prototype.compact=function(){return this.filter(Mo)},i.prototype.reject=function(t,e){return t=Xr(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var r=this;return r.__filtered__&&(t>0||0>e)?new i(r):(0>t?r=r.takeRight(-t):t&&(r=r.drop(t)),e!==P&&(e=+e||0,r=0>e?r.dropRight(-e):r.take(e-t)),r)},i.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},i.prototype.toArray=function(){return this.take(Ma)},De(i.prototype,function(t,r){var o=/^(?:filter|map|reject)|While$/.test(r),a=/^(?:first|last)$/.test(r),u=e[a?"take"+("last"==r?"Right":""):r];u&&(e.prototype[r]=function(){var e=a?[1]:arguments,r=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,c=s instanceof i,f=e[0],h=c||Au(s);h&&o&&"function"==typeof f&&1!=f.length&&(c=h=!1);var p=function(t){return a&&r?u(t,1)[0]:u.apply(P,le([t],e))},g={func:Yn,args:[p],thisArg:P},d=c&&!l;if(a&&!r)return d?(s=s.clone(),s.__actions__.push(g),t.call(s)):u.call(P,this.value())[0];if(!a&&h){s=d?s:new i(this);var v=t.apply(s,e);return v.__actions__.push(g),new n(v,r)}return this.thru(p)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var r=(/^(?:replace|split)$/.test(t)?Jo:Ko)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?r.apply(this.value(),t):this[n](function(e){return r.apply(e,t)})}}),De(i.prototype,function(t,r){var n=e[r];if(n){var i=n.name,o=ka[i]||(ka[i]=[]);o.push({name:r,func:n})}}),ka[Dr(P,S).name]=[{name:"wrapper",func:P}],i.prototype.clone=_,i.prototype.reverse=J,i.prototype.value=nt,e.prototype.chain=Gn,e.prototype.commit=qn,e.prototype.concat=eu,e.prototype.plant=Wn,e.prototype.reverse=Vn,e.prototype.toString=Zn,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Qn,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var P,M="3.10.1",A=1,S=2,D=4,L=8,I=16,k=32,F=64,O=128,U=256,j=30,N="...",X=150,B=16,z=200,Y=1,G=2,q="Expected a function",W="__lodash_placeholder__",V="[object Arguments]",Z="[object Array]",Q="[object Boolean]",$="[object Date]",K="[object Error]",H="[object Function]",J="[object Map]",tt="[object Number]",et="[object Object]",rt="[object RegExp]",nt="[object Set]",it="[object String]",ot="[object WeakMap]",at="[object ArrayBuffer]",ut="[object Float32Array]",st="[object Float64Array]",lt="[object Int8Array]",ct="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",gt="[object Uint16Array]",dt="[object Uint32Array]",vt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,_t=/[&<>"'`]/g,xt=RegExp(yt.source),Ct=RegExp(_t.source),Tt=/<%-([\s\S]+?)%>/g,Et=/<%([\s\S]+?)%>/g,wt=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,At=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,St=RegExp(At.source),Dt=/[\u0300-\u036f\ufe20-\ufe23]/g,Lt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kt=/\w*$/,Ft=/^0[xX]/,Ot=/^\[object .+?Constructor\]$/,Ut=/^\d+$/,jt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Yt=-1,Gt={};Gt[ut]=Gt[st]=Gt[lt]=Gt[ct]=Gt[ft]=Gt[ht]=Gt[pt]=Gt[gt]=Gt[dt]=!0,Gt[V]=Gt[Z]=Gt[at]=Gt[Q]=Gt[$]=Gt[K]=Gt[H]=Gt[J]=Gt[tt]=Gt[et]=Gt[rt]=Gt[nt]=Gt[it]=Gt[ot]=!1;var qt={};qt[V]=qt[Z]=qt[at]=qt[Q]=qt[$]=qt[ut]=qt[st]=qt[lt]=qt[ct]=qt[ft]=qt[tt]=qt[et]=qt[rt]=qt[it]=qt[ht]=qt[pt]=qt[gt]=qt[dt]=!0,qt[K]=qt[H]=qt[J]=qt[nt]=qt[ot]=!1;var Wt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Zt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Qt={"function":!0,object:!0},$t={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Qt[typeof e]&&e&&!e.nodeType&&e,Jt=Qt[typeof t]&&t&&!t.nodeType&&t,te=Ht&&Jt&&"object"==typeof i&&i&&i.Object&&i,ee=Qt[typeof self]&&self&&self.Object&&self,re=Qt[typeof window]&&window&&window.Object&&window,ne=(Jt&&Jt.exports===Ht&&Ht,te||re!==(this&&this.window)&&re||ee||this),ie=R();ne._=ie,n=function(){return ie}.call(e,r,e,t),!(n!==P&&(t.exports=n))}).call(this)}).call(e,r(18)(t),function(){return this}())},function(t,e,r){var n,i;!function(o,a){"object"==typeof t&&t.exports?t.exports=a(r(13)):(n=[r(13)],i=function(t){return a(t,o)}.apply(e,n),!(void 0!==i&&(t.exports=i)))}(this,function(t,e,r){function n(e){return t.isArray(e)?"array":t.isDate(e)?"date":t.isRegExp(e)?"regex":typeof e}function i(t){var e=n(t);return s[e]?e:"*"}function o(e){return t.each(a.call(arguments,1),function(r){t.each(r,function(t,r){s[i(t)](e,r,t)})}),e}var a=Array.prototype.slice,u=function(){for(var t=a.call(arguments,0);t.length;)u.rivet(t.shift())},s={"*":function(t,e,r){t[e]=r},object:function(t,e,r){t[e]=o(t[e]||{},r)},array:function(e,r,n){e[r]=[],t.each(n,function(t,n){s[i(t)](e[r],n,t)},this)}};return u.rivet=function(t){t.hasOwnProperty("extend")||(t.extend=function(e,r,n){return u.extend(t,e,r,n)}),t.hasOwnProperty("compose")||(t.compose=function(){return u.compose.apply(this,[t].concat(a.call(arguments,0)))}),t.hasOwnProperty("inherits")||(t.inherits=function(e,r,n){return u.inherits(t,e,r,n)}),t.hasOwnProperty("mixin")||(t.mixin=function(){return u.mixin.apply(this,[t].concat(a.call(arguments,0)))}),t.hasOwnProperty("punch")||(t.punch=function(){return u.punch.apply(this,[t].concat(a.call(arguments,0)))})},u.inherits=function(e,r,n,i){i=i||{};var a,s=function(){},l=function(){r.apply(this,arguments)};return"object"==typeof e?(e.hasOwnProperty("constructor")&&(l=e.constructor),a=e):(l=e,a=e.prototype),u.rivet(l),i.deep?o(l,r,n):t.defaults(l,r,n),s.prototype=r.prototype,l.prototype=new s,i.deep?o(l.prototype,a,{constructor:l}):t.extend(l.prototype,a,{constructor:l}),l.__super=r,l.__super__=r.prototype,l},u.extend=function(t,e,r,n){return u.inherits(e,t,r,n)},u.compose=function(){var e=a.call(arguments,0),r=e.shift();u.rivet(r);var n=t.reduce(e,function(t,e){return e.hasOwnProperty("_preInit")&&t.preInit.push(e._preInit),e.hasOwnProperty("_postInit")&&t.postInit.push(e._postInit),e=e.mixin||e,t.items.push(e),t},{items:[],preInit:[],postInit:[]}),i=r.extend({constructor:function(){var e=a.call(arguments,0);t.each(n.preInit,function(t){t.apply(this,e)},this),r.prototype.constructor.apply(this,e),t.each(n.postInit,function(t){t.apply(this,e)},this)}});return u.rivet(i),t.defaults(i.prototype,t.extend.apply(null,[{}].concat(n.items))),i},u.mixin=function(){var e=a.call(arguments,0),r=e.shift();return u.rivet(r),t.defaults(r.prototype,t.extend.apply(null,[{}].concat(e))),r},u.punch=function(){var e=a.call(arguments,0),r=e.shift();return u.rivet(r),t.extend(r.prototype,t.extend.apply(null,[{}].concat(e))),r},u})},function(t,e,r){function n(t,e,r){if(null!=t&&t.length){if(t.length&&!e)return Math.max.apply(Math,t);e=i(e,r);for(var n,o,a,u=-(1/0),s=-1,l=t.length;++s<l;)o=t[s],a=e(o,s,t),a>u&&(u=a,n=o);return n}return 1/0}var i=r(43);t.exports=n},function(t,e){function r(t){return t}t.exports=r},function(t,e,r){function n(t,e){if(null==t)return i;switch(typeof t){case"function":return"undefined"!=typeof e?function(r,n,i){return t.call(e,r,n,i)}:t;case"object":return function(e){return a(e,t)};case"string":case"number":return o(t)}}var i=r(42),o=r(44),a=r(48);t.exports=n},function(t,e){function r(t){return function(e){return e[t]}}t.exports=r},function(t,e,r){var n=r(46),i=Array.isArray||function(t){return n(t,"Array")};t.exports=i},function(t,e,r){function n(t,e){return i(t)===e}var i=r(47);t.exports=n},function(t,e){function r(t){return null===t?"Null":t===n?"Undefined":i.exec(o.call(t))[1]}var n,i=/^\[object (.*)\]$/,o=Object.prototype.toString;t.exports=r},function(t,e,r){function n(t,e){for(var r=-1,n=t.length;++r<n;)if(a(t[r],e))return!0;return!1}function i(t,e){for(var r=-1,i=e.length;++r<i;)if(!n(t,e[r]))return!1;return!0}function o(t,e){var r=!0;return u(e,function(e,n){return a(t[n],e)?void 0:r=!1}),r}function a(t,e){return t&&"object"==typeof t?s(t)&&s(e)?i(t,e):o(t,e):t===e}var u=r(14),s=r(45);t.exports=a},function(t,e,r){function n(){u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=!0;for(var t in{toString:null})a=!1}function i(t,e,r){var i,l=0;null==a&&n();for(i in t)if(o(e,t,i,r)===!1)break;if(a)for(var c=t.constructor,f=!!c&&t===c.prototype;(i=u[l++])&&("constructor"===i&&(f||!s(t,i))||t[i]===Object.prototype[i]||o(e,t,i,r)!==!1););}function o(t,e,r,n){return t.call(n,e[r],r,e)}var a,u,s=r(6);t.exports=i},function(t,e,r){function n(t){var e=[];return i(t,function(t,r){e.push(t)}),e}var i=r(14);t.exports=n},function(t,e,r){var n,i;n=[r(52)],i=function(t){function e(e,r){return-1!==t(e,r)}return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n;n=function(){function t(t,e,r){if(r=r||0,null==t)return-1;for(var n=t.length,i=0>r?n+r:r;n>i;){if(t[i]===e)return i;i++}return-1}return t}.call(e,r,e,t),!(void 0!==n&&(t.exports=n))},function(t,e,r){var n,i;n=[r(7),r(15),r(59)],i=function(t,e,r){function n(e){switch(t(e)){case"Object":return i(e);case"Array":return u(e);case"RegExp":return o(e);case"Date":return a(e);default:return e}}function i(t){return e(t)?r({},t):t}function o(t){var e="";return e+=t.multiline?"m":"",e+=t.global?"g":"",e+=t.ignoreCase?"i":"",new RegExp(t.source,e)}function a(t){return new Date(+t)}function u(t){return t.slice()}return n}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(53),r(16),r(7),r(15)],i=function(t,e,r,n){function i(e,n){switch(r(e)){case"Object":return o(e,n);case"Array":return a(e,n);default:return t(e)}}function o(t,r){if(n(t)){var o={};return e(t,function(t,e){this[e]=i(t,r)},o),o}return r?r(t):t}function a(t,e){for(var r=[],n=-1,o=t.length;++n<o;)r[n]=i(t[n],e);return r}return i}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(7)],i=function(t){function e(e,r){return t(e)===r}return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(55)],i=function(t){function e(e){return t(e,"Object")}return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(8)],i=function(t){function e(){o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=!0;for(var t in{toString:null})i=!1}function r(r,a,u){var s,l=0;null==i&&e();for(s in r)if(n(a,r,s,u)===!1)break;if(i)for(var c=r.constructor,f=!!c&&r===c.prototype;(s=o[l++])&&("constructor"===s&&(f||!t(r,s))||r[s]===Object.prototype[s]||n(a,r,s,u)!==!1););}function n(t,e,r,n){return t.call(n,e[r],r,e)}var i,o;return r}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(8),r(54),r(56)],i=function(t,e,r){function n(){var i,o,a,u,s=1;for(u=e(arguments[0]);a=arguments[s++];)for(i in a)t(a,i)&&(o=a[i],r(o)&&r(u[i])?u[i]=n(u[i],o):u[i]=e(o));return u}return n}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e,r){var n,i;n=[r(16)],i=function(t){function e(e,n){for(var i,o=0,a=arguments.length;++o<a;)i=arguments[o],null!=i&&t(i,r,e);return e}function r(t,e){this[e]=t}return e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports="\nprecision mediump float;\n\nuniform sampler2D backgroundSampler;\n\nuniform vec4 backgroundColor;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec4 color = texture2D(backgroundSampler, v_texCoord);\n    gl_FragColor = vec4(backgroundColor.rgb, color.a);\n}\n"},function(t,e){t.exports="\nprecision mediump float;\n\nuniform sampler2D compositeSampler;\nuniform sampler2D nxSampler;\nuniform sampler2D nySampler;\nuniform sampler2D nzSampler;\nuniform sampler2D scalarSampler;\nuniform sampler2D lutSampler;\n\nuniform vec4 viewDir;\nuniform vec4 lightDir;\nuniform vec4 lightColor;\nuniform vec4 lightTerms;\n\nvarying vec2 v_texCoord;\n\n\nfloat convert(vec4 c) {\n    float r = c.r * 255.0;\n    float g = c.g * 255.0;\n    float b = c.b * 255.0;\n\n    float value = (r * 65536.0) + (g * 256.0) + b;\n    return ((value / 16777216.0) * 2.0) - 1.0;\n}\n\n\nvec4 scalarLookup(vec4 c) {\n    float r = c.r * 255.0;\n    float g = c.g * 255.0;\n    float b = c.b * 255.0;\n\n    float value = (r * 65536.0) + (g * 256.0) + b;\n    value = value / 16777216.0;\n\n    return texture2D(lutSampler, vec2(value, 0.5));\n}\n\n\nvoid main() {\n    // Sample the texture containing what we have composited so far\n    vec4 color = texture2D(compositeSampler, v_texCoord);\n\n    // Sample the new layer to be composited in\n    vec4 scalarColor = texture2D(scalarSampler, v_texCoord);\n\n    // Choose the fragment with the greater depth value\n    if (color.a > scalarColor.a) {\n        gl_FragColor = color;\n    } else {\n\n        vec4 nx = texture2D(nxSampler, v_texCoord);\n        vec4 ny = texture2D(nySampler, v_texCoord);\n        vec4 nz = texture2D(nzSampler, v_texCoord);\n        vec4 normal = normalize(vec4(convert(nx), convert(ny), convert(nz), 0.0));\n\n        vec4 lutColor = scalarLookup(scalarColor);\n\n        float ka = lightTerms[0];\n        float kd = lightTerms[1];\n        float ks = lightTerms[2];\n        float alpha = lightTerms[3];\n\n        vec4 vDir = normalize(viewDir);\n        vec4 lDir = normalize(lightDir);\n\n        // Calculate ambient term\n        vec4 ambientColor = lutColor * ka;\n\n        // This will be used in both diffuse and specular terms\n        float lDotN = dot(lDir, normal);\n\n        // Adding this check allows us to light whichever side is facing the light\n        if (lDotN < 0.0) {\n            normal = -1.0 * normal;\n            lDotN = dot(lDir, normal);\n        }\n\n        // Calculate diffuse term\n        vec4 diffuseColor = kd * lutColor * lDotN;\n\n        // Calculate specular term\n        vec4 R = (normal * 2.0 * lDotN) - lDir;\n        float specularTerm = ks * pow(dot(R, vDir), alpha);\n        vec4 specularColor = lightColor * specularTerm; // * step(-lDotN, 0.0);\n\n        // Clamp them individually and sum them up\n        vec3 fColor = clamp(ambientColor.rgb, 0.0, 1.0) + clamp(diffuseColor.rgb, 0.0, 1.0) + clamp(specularColor.rgb, 0.0, 1.0);\n        gl_FragColor = vec4(fColor.rgb, scalarColor.a);\n\n        // Various debugging outputs\n\n        // gl_FragColor = vec4(ambientColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(diffuseColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(specularColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(lutColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(((normal.rgb + 1.0) / 2.0), scalarColor.a);\n    }\n}\n"}]);