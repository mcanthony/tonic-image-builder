!function(t){function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var e={};return r.m=t,r.c=e,r.p="",r(0)}([function(t,r,e){(function(r){t.exports=r.TonicImageBuilder=e(38)}).call(r,function(){return this}())},function(t,r,e){var n,i;!function(o,a){n=[e(39),e(40)],i=function(t,r){return a(t,r,o)}.apply(r,n),!(void 0!==i&&(t.exports=i))}(this,function(t,r,e,n){function i(t,r){return function(){if(console.warn||console.log){var e="Warning, the "+t+" method has been deprecated. Please use "+r+" instead.";console.warn?console.warn(e):console.log(e)}return c.prototype[r].apply(this,arguments)}}function o(t,r,e){return function(n){m.resolver.compare(n.topic,t)&&(r.push(n),n.cacheKeys.push(t),e&&e(n))}}function a(t,r,e){return function(n,i,o){n===t&&o.splice(i,1),0===o.length&&delete e[r]}}function u(r,e,n,i){if(r.inactive=!0,i.splice(n,1),r.cacheKeys&&r.cacheKeys.length)for(var o;o=r.cacheKeys.pop();)t.each(e._cache[o],a(r,o,e._cache))}var s="|",l={cache:{},regex:{},compare:function(r,e){var n,i,o,a=this.cache[e+s+r];return a===!0?a:-1===r.indexOf("#")&&-1===r.indexOf("*")?a=this.cache[e+s+r]=e===r:((i=this.regex[r])||(n="^"+t.map(r.split("."),function(t){var r="";return o&&(r="#"!==o?"\\.\\b":"\\b"),r+="#"===t?"[\\s\\S]*":"*"===t?"[^.]+":t,o=t,r}).join("")+"$",i=this.regex[r]=new RegExp(n)),a=this.cache[e+s+r]=i.test(e))},reset:function(){this.cache={},this.regex={}},purge:function(r){var e=this,n=function(t,n){var i=n.split(s),o=i[0],a=i[1];"undefined"!=typeof r.topic&&r.topic!==o||"undefined"!=typeof r.binding&&r.binding!==a||delete e.cache[n]};"undefined"==typeof r?this.reset():t.each(this.cache,n)}},c=function(t,r,e){this.topic=t,this.callback=r,this.pipeline=[],this.cacheKeys=[],this._context=n,this.emitter=e},f=function(){var r;return function(e){var n=!1;return t.isString(e)?(n=e===r,r=e):(n=t.isEqual(e,r),r=t.clone(e)),!n}},h=function(){var r=[];return function(e){var n=!t.any(r,function(r){return t.isObject(e)||t.isArray(e)?t.isEqual(e,r):e===r});return n&&r.push(e),n}};c.prototype={"catch":function(t){var r=this.callback,e=function(){try{r.apply(this,arguments)}catch(e){t(e,arguments[0])}};return this.callback=e,this},defer:function(){return this.delay(0)},disposeAfter:function(r){if(!t.isNumber(r)||0>=r)throw new Error("The value provided to disposeAfter (maxCalls) must be a number greater than zero.");var e=this,n=t.after(r,t.bind(function(){e.unsubscribe()}));return e.pipeline.push(function(t,r,e){e(t,r),n()}),e},distinct:function(){return this.constraint(new h)},distinctUntilChanged:function(){return this.constraint(new f)},invokeSubscriber:function(t,r){if(!this.inactive){var e=this,n=e.pipeline,i=n.length,o=e._context,a=-1;if(i){n=n.concat([e.callback]);var u=function s(t,r){a+=1,i>a?n[a].call(o,t,r,s):e.callback.call(o,t,r)};u(t,r,0)}else e.callback.call(o,t,r)}},logError:function(){if(console){var t;t=console.warn?console.warn:console.log,this["catch"](t)}return this},once:function(){return this.disposeAfter(1)},unsubscribe:function(){this.inactive||this.emitter.off(this)},constraint:function(r){if(!t.isFunction(r))throw new Error("Predicate constraint must be a function");return this.pipeline.push(function(t,e,n){r.call(this,t,e)&&n(t,e)}),this},constraints:function(r){var e=this;return t.isArray(r)&&t.each(r,function(t){e.constraint(t)}),e},context:function(t){return this._context=t,this},debounce:function(r,e){if(!t.isNumber(r))throw new Error("Milliseconds must be a number");return this.pipeline.push(t.debounce(function(t,r,e){e(t,r)},r,!!e)),this},delay:function(r){if(!t.isNumber(r))throw new Error("Milliseconds must be a number");var e=this;return e.pipeline.push(function(t,e,n){setTimeout(function(){n(t,e)},r)}),this},throttle:function(r){if(!t.isNumber(r))throw new Error("Milliseconds must be a number");var e=function(t,r,e){e(t,r)};return this.pipeline.push(t.throttle(e,r)),this}},c.prototype.off=c.prototype.unsubscribe;for(var p=["withConstraint","withConstraints","withContext","withDebounce","withDelay","withThrottle"],g=["constraint","constraints","context","debounce","delay","throttle"],d=0;6>d;d++){var v=p[d];c.prototype[v]=i(v,g[d])}var b=Array.prototype.slice,m=function(){};return m.prototype={on:function(r,e){var n=this;n._subscriptions=n._subscriptions||{},n._subscriptions[r]=n._subscriptions[r]||[];var i=new c(r,e,n);return n._subscriptions[r].push(i),t.each(n._cache,function(t,r){o(r,t)(i)}),n._subscriptions[r][n._subscriptions[r].length-1]},once:function(t,r){return this.on(t,r).once()},off:function(r,e){var n=this;switch(n._subscriptions=n._subscriptions||{},n._cache=n._cache||{},arguments.length){case 0:t.each(n._subscriptions,function(r){t.each(r,function(t,e){u(t,n,e,r)})}),n._subscriptions={};break;case 1:var i="[object String]"===Object.prototype.toString.call(r)?"topic":r instanceof c?"def":"context";switch(i){case"topic":n._subscriptions[r]&&t.each(n._subscriptions[r],function(t,e){u(t,n,e,n._subscriptions[r])});break;case"context":t.each(n._subscriptions,function(e){t.each(t.clone(e),function(t,i){t._context===r&&u(t,n,i,e)})});break;default:t.each(n._subscriptions[r.topic],function(t,e){t===r&&u(t,n,e,n._subscriptions[r.topic])})}break;default:t.each(t.clone(n._subscriptions[r]),function(t,i){t._context===e&&u(t,n,i,n._subscriptions[r])})}},emit:function(r,e){var n=this.getEnvelope(r,e);this._cache=this._cache||{};var i=this._cache[r],a=function(t){t.invokeSubscriber(n.data,n)};if(i)t.each(b.call(i,0),a);else{i=this._cache[r]=[];var u=o(r,i,a);t.each(this._subscriptions,function(r){t.each(b.call(r,0),u)})}},getEnvelope:function(t,r){return{topic:t,timeStamp:new Date,data:r}}},m.resolver=l,m.debug=!1,m.SubscriptionDefinition=c,r(m),m.mixInto=function(t){r.punch(t,m.prototype)},m})},function(t,r){"use strict";function e(t,r){this.id="CanvasOffscreenBuffer_"+ ++n,this.el=document.createElement("canvas"),this.width=t,this.height=r,this.el.style.display="none",this.el.setAttribute("width",this.width),this.el.setAttribute("height",this.height),document.body.appendChild(this.el)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=e;var n=0;e.prototype.size=function(t,r){return t&&this.el.setAttribute("width",this.width=t),r&&this.el.setAttribute("height",this.height=r),[Number(this.width),Number(this.height)]},e.prototype.get2DContext=function(){return this.el.getContext("2d")},e.prototype.get3DContext=function(){return this.el.getContext("experimental-webgl",{preserveDrawingBuffer:!0})||this.el.getContext("webgl",{preserveDrawingBuffer:!0})},e.prototype.destroy=function(){this.el.parentNode.removeChild(this.el),this.el=null,this.width=null,this.height=null},e.prototype.toDataURL=function(t,r){return this.el.toDataURL(t,r)},t.exports=r["default"]},function(t,r){t.exports="\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n    gl_Position = vec4(a_position.xy, 0.0, 1.0);\n    v_texCoord = a_texCoord;\n}\n"},function(t,r){"use strict";function e(t){var r=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),n=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);console.log("vertex texture image units: "+r),console.log("fragment texture image units: "+e),console.log("combined texture image units: "+n)}function n(t,r,e){var n=t.createShader(e);t.shaderSource(n,r),t.compileShader(n);var i=t.getShaderParameter(n,t.COMPILE_STATUS);if(!i){var o=t.getShaderInfoLog(n);return console.error("Error compiling shader '"+n+"':"+o),t.deleteShader(n),null}return n}function i(t,r){for(var e=t.createProgram(),n=0;n<r.length;n+=1)t.attachShader(e,r[n]);t.linkProgram(e);var i=t.getProgramParameter(e,t.LINK_STATUS);if(!i){var o=t.getProgramInfoLog(e);return console.error("Error in program linking:"+o),t.deleteProgram(e),null}return e.shaders=r,t.useProgram(e),e}function o(t,r,e,o){var a=e.programs[r],u=n(t,a.vertexShader,t.VERTEX_SHADER),s=n(t,a.fragmentShader,t.FRAGMENT_SHADER),c=i(t,[u,s]);return o.programs[r]=c,a.mapping&&l(t,r,a.mapping,e,o),c}function a(t,r,e){t.bindFramebuffer(t.FRAMEBUFFER,r),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);var n=t.checkFramebufferStatus(t.FRAMEBUFFER);n!==t.FRAMEBUFFER_COMPLETE&&console.log("ERROR: There is a problem with the framebuffer: "+n),t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null)}function u(t){var r=t.gl;for(var e in t.programs){for(var n=t.programs[e],i=n.shaders,o=i.length;o--;)r.deleteShader(i[o]);r.deleteProgram(n)}for(var a in t.framebuffers)r.deleteFramebuffer(t.framebuffers[a]);for(var u in t.textures)r.deleteTexture(t.textures[u]);for(var s in t.buffers)r.deleteBuffer(t.buffers[s])}function s(t,r){var e={gl:t,buffers:{},textures:{},framebuffers:{},programs:{}},n=r.resources.buffers||[],i=r.resources.textures||[],a=r.resources.framebuffers||[];n.forEach(function(r){var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,r.data,t.STATIC_DRAW),e.buffers[r.id]=n}),i.forEach(function(r){var n=t.createTexture(),i=r.pixelStore||[],o=r.texParameter||[];t.bindTexture(t.TEXTURE_2D,n),i.forEach(function(r){t.pixelStorei(t[r[0]],r[1])}),o.forEach(function(r){t.texParameteri(t.TEXTURE_2D,t[r[0]],t[r[1]])}),e.textures[r.id]=n}),a.forEach(function(r){var n=t.createFramebuffer();n.width=r.width,n.height=r.height,e.framebuffers[r.id]=n});for(var s in r.programs)o(t,s,r,e);return e.destroy=function(){u(e)},e}function l(t,r,e,n,i){var o=i.programs[r],a=n.mappings[e];a.forEach(function(r){var e=i.buffers[r.id];t.bindBuffer(t.ARRAY_BUFFER,e),o[r.name]=t.getAttribLocation(o,r.attribute),t.enableVertexAttribArray(o[r.name]),t.vertexAttribPointer.apply(t,[o[r.name]].concat(r.format)),t.bindBuffer(t.ARRAY_BUFFER,null)})}function c(t,r,e){this.gl=t,this.idx=0,this.fbos=r,this.textures=e,a(this.gl,this.fbos[0],this.textures[1]),a(this.gl,this.fbos[1],this.textures[0])}Object.defineProperty(r,"__esModule",{value:!0}),r.showGlInfo=e,r.createGLResources=s,r.applyProgramDataMapping=l,r.PingPong=c,c.prototype.swap=function(){this.idx++,this.idx%=2},c.prototype.clearFbo=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[0]),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.fbos[1]),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.idx=0},c.prototype.getFramebuffer=function(){return this.fbos[this.idx]},c.prototype.getRenderingTexture=function(){return this.textures[this.idx]}},function(t,r,e){function n(t,r){return i(o(t),r)}var i=e(41),o=e(50);t.exports=n},function(t,r){function e(t,r){return Object.prototype.hasOwnProperty.call(t,r)}t.exports=e},function(t,r,e){var n;n=function(){function t(t){return null===t?"Null":t===r?"Undefined":e.exec(n.call(t))[1]}var r,e=/^\[object (.*)\]$/,n=Object.prototype.toString;return t}.call(r,e,r,t),!(void 0!==n&&(t.exports=n))},function(t,r,e){var n;n=function(){function t(t,r){return Object.prototype.hasOwnProperty.call(t,r)}return t}.call(r,e,r,t),!(void 0!==n&&(t.exports=n))},function(t,r){t.exports="\nprecision mediump float;\n\nuniform sampler2D u_image;\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec4 color = texture2D(u_image, v_texCoord);\n    gl_FragColor = vec4(color.rgb, 1.0);\n    // gl_FragColor = color;\n}\n"},function(t,r){var e={};e.EPSILON=1e-6,e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.setMatrixArrayType=function(t){GLMAT_ARRAY_TYPE=t};var n=Math.PI/180;e.toRadian=function(t){return t*n},t.exports=e},function(t,r,e){"use strict";function n(t,r,e){return(r-t)*e+t}function i(t,r,e){var i=(e-t[0])/(r[0]-t[0]);return[n(t[1],r[1],i),n(t[2],r[2],i),n(t[3],r[3],i)]}function o(t,r){return[t[r].x,t[r].r,t[r].g,t[r].b]}function a(t,r){return t.x-r.x}function u(t){this.name=t,this.scalarRange=[0,1],this.delta=1,this.controlPoints=null,this.colorTableSize=256,this.colorTable=null,this.setPreset("spectralflip"),this.build()}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=u;var s=e(12),l=e(1),c="lookuptable.change",f=[];for(var h in s.lookuptables)f.push(h);l.mixInto(u),u.prototype.getName=function(){return this.name},u.prototype.getPresets=function(){return f},u.prototype.setPreset=function(t){this.colorTable=null,this.controlPoints=[];for(var r=s.lookuptables[t].controlpoints,e=r.length,n=0;e>n;n++)this.controlPoints.push({x:r[n].x,r:r[n].r,g:r[n].g,b:r[n].b});this.build(),this.emit(c,{change:"preset",lut:this})},u.prototype.getScalarRange=function(){return this.scalarRange},u.prototype.setScalarRange=function(t,r){this.scalarRange=[t,r],this.delta=r-t,this.emit(c,{change:"scalarRange",lut:this})},u.prototype.build=function(t){if(!this.colorTable){this.colorTable=[];for(var r=0,e=0;e<this.colorTableSize;e++){var n=e/(this.colorTableSize-1),a=o(this.controlPoints,r),u=o(this.controlPoints,r+1);n>u[0]&&(r+=1,a=o(this.controlPoints,r),u=o(this.controlPoints,r+1)),this.colorTable.push(i(a,u,n))}t&&this.emit(c,{change:"controlPoints",lut:this})}},u.prototype.setNumberOfColors=function(t){this.colorTableSize=t,this.colorTable=null,this.build(),this.emit(c,{change:"numberOfColors",lut:this})},u.prototype.getNumberOfControlPoints=function(){return this.controlPoints?this.controlPoints.length:0},u.prototype.removeControlPoint=function(t){return t>0&&t<this.controlPoints.length-1?(this.controlPoints.splice(t,1),this.colorTable=null,this.build(!0),!0):!1},u.prototype.getControlPoint=function(t){return this.controlPoints[t]},u.prototype.updateControlPoint=function(t,r){this.controlPoints[t]=r;var e=r.x;this.controlPoints.sort(a),this.colorTable=null,this.build(!0);for(var n=0;n<this.controlPoints.length;n++)if(this.controlPoints[n].x===e)return n;return 0},u.prototype.addControlPoint=function(t){this.controlPoints.push(t);var r=t.x;this.controlPoints.sort(a),this.colorTable=null,this.build(!0);for(var e=0;e<this.controlPoints.length;e++)if(this.controlPoints[e].x===r)return e;return-1},u.prototype.drawToCanvas=function(t){for(var r=this.colorTable,e=r.length,n=t.getContext("2d"),i=n.getImageData(0,0,e,1),o=0;e>o;o++)i.data[4*o+0]=Math.floor(255*r[o][0]),i.data[4*o+1]=Math.floor(255*r[o][1]),i.data[4*o+2]=Math.floor(255*r[o][2]),i.data[4*o+3]=255;n.putImageData(i,0,0)},u.prototype.getColor=function(t){var r=Math.floor(this.colorTableSize*(t-this.scalarRange[0])/this.delta);return 0>r?this.colorTable[0]:r>=this.colorTableSize?this.colorTable[this.colorTable.length-1]:this.colorTable[r]},u.prototype.destroy=function(){this.off(c)},u.prototype.onChange=function(t){return this.on(c,t)},t.exports=r["default"]},function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r["default"]={lookuptables:{spectralflip:{controlpoints:[{x:0,r:.3686274509803922,g:.3098039215686275,b:.6352941176470588},{x:.1,r:.196078431372549,g:.5333333333333333,b:.7411764705882353},{x:.2,r:.4,g:.7607843137254902,b:.6470588235294118},{x:.3,r:.6705882352941176,g:.8666666666666667,b:.6431372549019608},{x:.4,r:.9019607843137255,g:.9607843137254902,b:.596078431372549},{x:.5,r:1,g:1,b:.7490196078431373},{x:.6,r:.996078431372549,g:.8784313725490196,b:.5450980392156862},{x:.7,r:.9921568627450981,g:.6823529411764706,b:.3803921568627451},{x:.8,r:.9568627450980393,g:.4274509803921568,b:.2627450980392157},{x:.9,r:.8352941176470589,g:.2431372549019608,b:.3098039215686275},{x:1,r:.6196078431372549,g:.00392156862745098,b:.2588235294117647}],range:[0,1]},cold2warm:{controlpoints:[{x:0,r:.23137254902,g:.298039215686,b:.752941176471},{x:.5,r:.865,g:.865,b:.865},{x:1,r:.705882352941,g:.0156862745098,b:.149019607843}],range:[0,1]},rainbow:{controlpoints:[{x:0,r:0,g:0,b:1},{x:.25,r:0,g:1,b:1},{x:.5,r:0,g:1,b:0},{x:.75,r:1,g:1,b:0},{x:1,r:1,g:0,b:0}],range:[0,1]},"gray scale":{controlpoints:[{x:0,r:0,g:0,b:0},{x:1,r:1,g:1,b:1}],range:[0,1]},"gray scale flip":{controlpoints:[{x:0,r:1,g:1,b:1},{x:1,r:0,g:0,b:0}],range:[0,1]},spectral:{controlpoints:[{x:0,r:.6196078431372549,g:.00392156862745098,b:.2588235294117647},{x:.1,r:.8352941176470589,g:.2431372549019608,b:.3098039215686275},{x:.2,r:.9568627450980393,g:.4274509803921568,b:.2627450980392157},{x:.3,r:.9921568627450981,g:.6823529411764706,b:.3803921568627451},{x:.4,r:.996078431372549,g:.8784313725490196,b:.5450980392156862},{x:.5,r:1,g:1,b:.7490196078431373},{x:.6,r:.9019607843137255,g:.9607843137254902,b:.596078431372549},{x:.7,r:.6705882352941176,g:.8666666666666667,b:.6431372549019608},{x:.8,r:.4,g:.7607843137254902,b:.6470588235294118},{x:.9,r:.196078431372549,g:.5333333333333333,b:.7411764705882353},{x:1,r:.3686274509803922,g:.3098039215686275,b:.6352941176470588}],range:[0,1]},warm:{controlpoints:[{x:0,r:.4745098039215686,g:.09019607843137255,b:.09019607843137255},{x:.2,r:.7098039215686275,g:.00392156862745098,b:.00392156862745098},{x:.4,r:.9372549019607843,g:.2784313725490196,b:.09803921568627451},{x:.6,r:.9764705882352941,g:.5137254901960784,b:.1411764705882353},{x:.8,r:1,g:.7058823529411765,b:0},{x:1,r:1,g:.8980392156862745,b:.02352941176470588}],range:[0,1]},cool:{controlpoints:[{x:0,r:.4588235294117647,g:.6941176470588235,b:.00392156862745098},{x:.1666666666666667,r:.3450980392156863,g:.5019607843137255,b:.1607843137254902},{x:.3333333333333333,r:.3137254901960784,g:.8431372549019608,b:.7490196078431373},{x:.5,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.6666666666666666,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.8333333333333334,r:.6039215686274509,g:.407843137254902,b:1},{x:1,r:.3725490196078431,g:.2,b:.5019607843137255}],range:[0,1]},blues:{controlpoints:[{x:0,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.1666666666666667,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.3333333333333333,r:.3058823529411765,g:.8509803921568627,b:.9176470588235294},{x:.5,r:.4509803921568628,g:.6039215686274509,b:.8352941176470589},{x:.6666666666666666,r:.2588235294117647,g:.2392156862745098,b:.6627450980392157},{x:.8333333333333334,r:.3137254901960784,g:.3294117647058823,b:.5294117647058824},{x:1,r:.06274509803921569,g:.1647058823529412,b:.3215686274509804}],range:[0,1]},wildflower:{controlpoints:[{x:0,r:.1098039215686274,g:.5843137254901961,b:.803921568627451},{x:.1666666666666667,r:.2313725490196079,g:.407843137254902,b:.6705882352941176},{x:.3333333333333333,r:.4,g:.2431372549019608,b:.7176470588235294},{x:.5,r:.6352941176470588,g:.3294117647058823,b:.8117647058823529},{x:.6666666666666666,r:.8705882352941177,g:.3803921568627451,b:.807843137254902},{x:.8333333333333334,r:.8627450980392157,g:.3803921568627451,b:.5843137254901961},{x:1,r:.2392156862745098,g:.06274509803921569,b:.3215686274509804}],range:[0,1]},citrus:{controlpoints:[{x:0,r:.396078431372549,g:.4862745098039216,b:.2156862745098039},{x:.2,r:.4588235294117647,g:.6941176470588235,b:.00392156862745098},{x:.4,r:.6980392156862745,g:.7294117647058823,b:.1882352941176471},{x:.6,r:1,g:.8980392156862745,b:.02352941176470588},{x:.8,r:1,g:.7058823529411765,b:0},{x:1,r:.9764705882352941,g:.5137254901960784,b:.1411764705882353}],range:[0,1]},organge2purple:{controlpoints:[{x:0,r:.4980392156862745,g:.2313725490196079,b:.03137254901960784},{x:.1,r:.7019607843137254,g:.3450980392156863,b:.02352941176470588},{x:.2,r:.8784313725490196,g:.5098039215686274,b:.0784313725490196},{x:.3,r:.9921568627450981,g:.7215686274509804,b:.3882352941176471},{x:.4,r:.996078431372549,g:.8784313725490196,b:.7137254901960784},{x:.5,r:.9686274509803922,g:.9686274509803922,b:.9686274509803922},{x:.6,r:.8470588235294118,g:.8549019607843137,b:.9215686274509803},{x:.7,r:.6980392156862745,g:.6705882352941176,b:.8235294117647058},{x:.8,r:.5019607843137255,g:.4509803921568628,b:.6745098039215687},{x:.9,r:.3294117647058823,g:.1529411764705882,b:.5333333333333333},{x:1,r:.1764705882352941,g:0,b:.2941176470588235}],range:[0,1]},brown2green:{controlpoints:[{x:0,r:.3294117647058823,g:.1882352941176471,b:.0196078431372549},{x:.1,r:.5490196078431373,g:.3176470588235294,b:.0392156862745098},{x:.2,r:.7490196078431373,g:.5058823529411764,b:.1764705882352941},{x:.3,r:.8745098039215686,g:.7607843137254902,b:.4901960784313725},{x:.4,r:.9647058823529412,g:.9098039215686274,b:.7647058823529411},{x:.5,r:.9607843137254902,g:.9607843137254902,b:.9607843137254902},{x:.6,r:.7803921568627451,g:.9176470588235294,b:.8980392156862745},{x:.7,r:.5019607843137255,g:.803921568627451,b:.7568627450980392},{x:.8,r:.207843137254902,g:.592156862745098,b:.5607843137254902},{x:.9,r:.00392156862745098,g:.4,b:.3686274509803922},{x:1,r:0,g:.2352941176470588,b:.1882352941176471}],range:[0,1]},blue2green:{controlpoints:[{x:0,r:.9686274509803922,g:.9882352941176471,b:.9921568627450981},{x:.125,r:.8980392156862745,g:.9607843137254902,b:.9764705882352941},{x:.25,r:.8,g:.9254901960784314,b:.9019607843137255},{x:.375,r:.6,g:.8470588235294118,b:.788235294117647},{x:.5,r:.4,g:.7607843137254902,b:.6431372549019608},{x:.625,r:.2549019607843137,g:.6823529411764706,b:.4627450980392157},{x:.75,r:.1372549019607843,g:.5450980392156862,b:.2705882352941176},{x:.875,r:0,g:.4274509803921568,b:.1725490196078431},{x:1,r:0,g:.2666666666666667,b:.1058823529411765}],range:[0,1]},yellow2brown:{controlpoints:[{x:0,r:1,g:1,b:.8980392156862745},{x:.125,r:1,g:.9686274509803922,b:.7372549019607844},{x:.25,r:.996078431372549,g:.8901960784313725,b:.5686274509803921},{x:.375,r:.996078431372549,g:.7686274509803922,b:.3098039215686275},{x:.5,r:.996078431372549,g:.6,b:.1607843137254902},{x:.625,r:.9254901960784314,g:.4392156862745098,b:.0784313725490196},{x:.75,r:.8,g:.2980392156862745,b:.00784313725490196},{x:.875,r:.6,g:.203921568627451,b:.01568627450980392},{x:1,r:.4,g:.1450980392156863,b:.02352941176470588}],range:[0,1]},blue2purple:{controlpoints:[{x:0,r:.9686274509803922,g:.9882352941176471,b:.9921568627450981},{x:.125,r:.8784313725490196,g:.9254901960784314,b:.9568627450980393},{x:.25,r:.7490196078431373,g:.8274509803921568,b:.9019607843137255},{x:.375,r:.6196078431372549,g:.7372549019607844,b:.8549019607843137},{x:.5,r:.5490196078431373,g:.5882352941176471,b:.7764705882352941},{x:.625,r:.5490196078431373,g:.4196078431372549,b:.6941176470588235},{x:.75,r:.5333333333333333,g:.2549019607843137,b:.615686274509804},{x:.875,r:.5058823529411764,g:.05882352941176471,b:.4862745098039216},{x:1,r:.3019607843137255,g:0,b:.2941176470588235}],range:[0,1]},ocean:{controlpoints:[{x:0,r:.039215,g:.090195,b:.25098},{x:.125,r:.133333,g:.364706,b:.521569},{x:.25,r:.321569,g:.760784,b:.8},{x:.375,r:.690196,g:.960784,b:.894118},{x:.5,r:.552941,g:.921569,b:.552941},{x:.625,r:.329412,g:.6,b:.239216},{x:.75,r:.211765,g:.34902,b:.078435},{x:.875,r:.011765,g:.207843,b:.023525},{x:1,r:.286275,g:.294118,b:.301961}],range:[0,1]},earth:{controlpoints:[{x:0,r:.392157,g:.392157,b:.392157},{x:.586175,r:.392157,g:.392157,b:.392157},{x:.589041,r:.141176,g:.345098,b:.478431},{x:.589042,r:.501961,g:.694118,b:.172549},{x:.617699,r:.74902,g:.560784,b:.188235},{x:.789648,r:.752941,g:.741176,b:.729412},{x:.993079,r:.796078,g:.780392,b:.772549},{x:1,r:.796078,g:.780392,b:.772549}],range:[0,1]}},swatches:{colors:[{r:255,g:255,b:255},{r:204,g:255,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:204,g:204,b:255},{r:255,g:204,b:255},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:204,b:204},{r:255,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:255,b:204},{r:204,g:204,b:204},{r:153,g:255,b:255},{r:153,g:204,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:153,g:153,b:255},{r:204,g:153,b:255},{r:255,g:153,b:255},{r:255,g:153,b:204},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:153,b:153},{r:255,g:204,b:153},{r:255,g:255,b:153},{r:204,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:153},{r:153,g:255,b:204},{r:204,g:204,b:204},{r:102,g:255,b:255},{r:102,g:204,b:255},{r:102,g:153,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:102,g:102,b:255},{r:153,g:102,b:255},{r:204,g:102,b:255},{r:255,g:102,b:255},{r:255,g:102,b:204},{r:255,g:102,b:153},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:102,b:102},{r:255,g:153,b:102},{r:255,g:204,b:102},{r:255,g:255,b:102},{r:204,g:255,b:102},{r:153,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:102},{r:102,g:255,b:153},{r:102,g:255,b:204},{r:153,g:153,b:153},{r:51,g:255,b:255},{r:51,g:204,b:255},{r:51,g:153,b:255},{r:51,g:102,b:255},{r:51,g:51,b:255},{r:51,g:51,b:255},{r:51,g:51,b:255},{r:102,g:51,b:255},{r:153,g:51,b:255},{r:204,g:51,b:255},{r:255,g:51,b:255},{r:255,g:51,b:204},{r:255,g:51,b:153},{r:255,g:51,b:102},{r:255,g:51,b:51},{r:255,g:51,b:51},{r:255,g:51,b:51},{r:255,g:102,b:51},{r:255,g:153,b:51},{r:255,g:204,b:51},{r:255,g:255,b:51},{r:204,g:255,b:51},{r:153,g:255,b:51},{r:102,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:51},{r:51,g:255,b:102},{r:51,g:255,b:153},{r:51,g:255,b:204},{r:153,g:153,b:153},{r:0,g:255,b:255},{r:0,g:204,b:255},{r:0,g:153,b:255},{r:0,g:102,b:255},{r:0,g:51,b:255},{r:0,g:0,b:255},{r:51,g:0,b:255},{r:102,g:0,b:255},{r:153,g:0,b:255},{r:204,g:0,b:255},{r:255,g:0,b:255},{r:255,g:0,b:204},{r:255,g:0,b:153},{r:255,g:0,b:102},{r:255,g:0,b:51},{r:255,g:0,b:0},{r:255,g:51,b:0},{r:255,g:102,b:0},{r:255,g:153,b:0},{r:255,g:204,b:0},{r:255,g:255,b:0},{r:204,g:255,b:0},{r:153,g:255,b:0},{r:102,g:255,b:0},{r:51,g:255,b:0},{r:0,g:255,b:0},{r:0,g:255,b:51},{r:0,g:255,b:102},{r:0,g:255,b:153},{r:0,g:255,b:204},{r:102,g:102,b:102},{r:0,g:204,b:204},{r:0,g:204,b:204},{r:0,g:153,b:204},{r:0,g:102,b:204},{r:0,g:51,b:204},{r:0,g:0,b:204},{r:51,g:0,b:204},{r:102,g:0,b:204},{r:153,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:204},{r:204,g:0,b:153},{r:204,g:0,b:102},{r:204,g:0,b:51},{r:204,g:0,b:0},{r:204,g:51,b:0},{r:204,g:102,b:0},{r:204,g:153,b:0},{r:204,g:204,b:0},{r:204,g:204,b:0},{r:204,g:204,b:0},{r:153,g:204,b:0},{r:102,g:204,b:0},{r:51,g:204,b:0},{r:0,g:204,b:0},{r:0,g:204,b:51},{r:0,g:204,b:102},{r:0,g:204,b:153},{r:0,g:204,b:204},{r:102,g:102,b:102},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:0,g:102,b:153},{r:0,g:51,b:153},{r:0,g:0,b:153},{r:51,g:0,b:153},{r:102,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:153},{r:153,g:0,b:102},{r:153,g:0,b:51},{r:153,g:0,b:0},{r:153,g:51,b:0},{r:153,g:102,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:153,g:153,b:0},{r:102,g:153,b:0},{r:51,g:153,b:0},{r:0,g:153,b:0},{r:0,g:153,b:51},{r:0,g:153,b:102},{r:0,g:153,b:153},{r:0,g:153,b:153},{r:51,g:51,b:51},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:51,b:102},{r:0,g:0,b:102},{r:51,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:102},{r:102,g:0,b:51},{r:102,g:0,b:0},{r:102,g:51,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:102,g:102,b:0},{r:51,g:102,b:0},{r:0,g:102,b:0},{r:0,g:102,b:51},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:102,b:102},{r:0,g:0,b:0},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:51},{r:51,g:0,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:51,g:51,b:0},{r:0,g:51,b:0},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:0,g:51,b:51},{r:51,g:51,b:51}],columns:31,rows:9}},t.exports=r["default"]},function(t,r,e){var n;(function(t,i){(function(){function o(t,r,e){for(var n=(e||0)-1,i=t?t.length:0;++n<i;)if(t[n]===r)return n;return-1}function a(t,r){var e=typeof r;if(t=t.cache,"boolean"==e||null==r)return t[r]?0:-1;"number"!=e&&"string"!=e&&(e="object");var n="number"==e?r:w+r;return t=(t=t[e])&&t[n],"object"==e?t&&o(t,r)>-1?0:-1:t?0:-1}function u(t){var r=this.cache,e=typeof t;if("boolean"==e||null==t)r[t]=!0;else{"number"!=e&&"string"!=e&&(e="object");var n="number"==e?t:w+t,i=r[e]||(r[e]={});"object"==e?(i[n]||(i[n]=[])).push(t):i[n]=!0}}function s(t){return t.charCodeAt(0)}function l(t,r){for(var e=t.criteria,n=r.criteria,i=-1,o=e.length;++i<o;){var a=e[i],u=n[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return t.index-r.index}function c(t){var r=-1,e=t.length,n=t[0],i=t[e/2|0],o=t[e-1];if(n&&"object"==typeof n&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var a=p();a["false"]=a["null"]=a["true"]=a.undefined=!1;var s=p();for(s.array=t,s.cache=a,s.push=u;++r<e;)s.push(t[r]);return s}function f(t){return"\\"+it[t]}function h(){return _.pop()||[]}function p(){return x.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function g(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function d(t){t.length=0,_.length<R&&_.push(t)}function v(t){var r=t.cache;r&&v(r),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,x.length<R&&x.push(t)}function b(t,r,e){r||(r=0),"undefined"==typeof e&&(e=t?t.length:0);for(var n=-1,i=e-r||0,o=Array(0>i?0:i);++n<i;)o[n]=t[r+n];return o}function m(t){function r(t){return t&&"object"==typeof t&&!fn(t)&&Ye.call(t,"__wrapped__")?t:new e(t)}function e(t,r){this.__chain__=!!r,this.__wrapped__=t}function n(t){function r(){if(n){var t=b(n);qe.apply(t,arguments)}if(this instanceof r){var o=u(e.prototype),a=e.apply(o,t||arguments);return Ut(a)?a:o}return e.apply(i,t||arguments)}var e=t[0],n=t[2],i=t[4];return cn(r,t),r}function i(t,r,e,n,o){if(e){var a=e(t);if("undefined"!=typeof a)return a}var u=Ut(t);if(!u)return t;var s=Oe.call(t);if(!J[s]||!sn.nodeClass&&g(t))return t;var l=an[s];switch(s){case G:case W:return new l(+t);case Q:case H:return new l(t);case K:return a=l(t.source,L.exec(t)),a.lastIndex=t.lastIndex,a}var c=fn(t);if(r){var f=!n;n||(n=h()),o||(o=h());for(var p=n.length;p--;)if(n[p]==t)return o[p];a=c?l(t.length):{}}else a=c?b(t):Cn({},t);return c&&(Ye.call(t,"index")&&(a.index=t.index),Ye.call(t,"input")&&(a.input=t.input)),r?(n.push(t),o.push(a),(c?xn:En)(t,function(t,u){a[u]=i(t,r,e,n,o)}),f&&(d(n),d(o)),a):a}function u(t,r){return Ut(t)?$e(t):{}}function _(t,r,e){if("function"!=typeof t)return ie;if("undefined"==typeof r||!("prototype"in t))return t;var n=t.__bindData__;if("undefined"==typeof n&&(sn.funcNames&&(n=!t.name),n=n||!sn.funcDecomp,!n)){var i=Be.call(t);sn.funcNames||(n=!I.test(i)),n||(n=j.test(i),cn(t,n))}if(n===!1||n!==!0&&1&n[1])return t;switch(e){case 1:return function(e){return t.call(r,e)};case 2:return function(e,n){return t.call(r,e,n)};case 3:return function(e,n,i){return t.call(r,e,n,i)};case 4:return function(e,n,i,o){return t.call(r,e,n,i,o)}}return Br(t,r)}function x(t){function r(){var t=l?a:this;if(i){var g=b(i);qe.apply(g,arguments)}if((o||f)&&(g||(g=b(arguments)),o&&qe.apply(g,o),f&&g.length<s))return n|=16,x([e,h?n:-4&n,g,null,a,s]);if(g||(g=arguments),c&&(e=t[p]),this instanceof r){t=u(e.prototype);var d=e.apply(t,g);return Ut(d)?d:t}return e.apply(t,g)}var e=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=1&n,c=2&n,f=4&n,h=8&n,p=e;
return cn(r,t),r}function R(t,r){var e=-1,n=dt(),i=t?t.length:0,u=i>=E&&n===o,s=[];if(u){var l=c(r);l?(n=a,r=l):u=!1}for(;++e<i;){var f=t[e];n(r,f)<0&&s.push(f)}return u&&v(r),s}function it(t,r,e,n){for(var i=(n||0)-1,o=t?t.length:0,a=[];++i<o;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(fn(u)||yt(u))){r||(u=it(u,r,e));var s=-1,l=u.length,c=a.length;for(a.length+=l;++s<l;)a[c++]=u[s]}else e||a.push(u)}return a}function at(t,r,e,n,i,o){if(e){var a=e(t,r);if("undefined"!=typeof a)return!!a}if(t===r)return 0!==t||1/t==1/r;var u=typeof t,s=typeof r;if(!(t!==t||t&&nt[u]||r&&nt[s]))return!1;if(null==t||null==r)return t===r;var l=Oe.call(t),c=Oe.call(r);if(l==Y&&(l=$),c==Y&&(c=$),l!=c)return!1;switch(l){case G:case W:return+t==+r;case Q:return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case K:case H:return t==Ae(r)}var f=l==q;if(!f){var p=Ye.call(t,"__wrapped__"),v=Ye.call(r,"__wrapped__");if(p||v)return at(p?t.__wrapped__:t,v?r.__wrapped__:r,e,n,i,o);if(l!=$||!sn.nodeClass&&(g(t)||g(r)))return!1;var b=!sn.argsObject&&yt(t)?Pe:t.constructor,m=!sn.argsObject&&yt(r)?Pe:r.constructor;if(b!=m&&!(Ot(b)&&b instanceof b&&Ot(m)&&m instanceof m)&&"constructor"in t&&"constructor"in r)return!1}var y=!i;i||(i=h()),o||(o=h());for(var _=i.length;_--;)if(i[_]==t)return o[_]==r;var x=0;if(a=!0,i.push(t),o.push(r),f){if(_=t.length,x=r.length,a=x==_,a||n)for(;x--;){var C=_,T=r[x];if(n)for(;C--&&!(a=at(t[C],T,e,n,i,o)););else if(!(a=at(t[x],T,e,n,i,o)))break}}else wn(r,function(r,u,s){return Ye.call(s,u)?(x++,a=Ye.call(t,u)&&at(t[u],r,e,n,i,o)):void 0}),a&&!n&&wn(t,function(t,r,e){return Ye.call(e,r)?a=--x>-1:void 0});return i.pop(),o.pop(),y&&(d(i),d(o)),a}function ut(t,r,e,n,i){(fn(r)?nr:En)(r,function(r,o){var a,u,s=r,l=t[o];if(r&&((u=fn(r))||Rn(r))){for(var c=n.length;c--;)if(a=n[c]==r){l=i[c];break}if(!a){var f;e&&(s=e(l,r),(f="undefined"!=typeof s)&&(l=s)),f||(l=u?fn(l)?l:[]:Rn(l)?l:{}),n.push(r),i.push(l),f||ut(l,r,e,n,i)}}else e&&(s=e(l,r),"undefined"==typeof s&&(s=r)),"undefined"!=typeof s&&(l=s);t[o]=l})}function st(t,r){return t+Xe(on()*(r-t+1))}function ct(t,r,e){var n=-1,i=dt(),u=t?t.length:0,s=[],l=!r&&u>=E&&i===o,f=e||l?h():s;if(l){var p=c(f);i=a,f=p}for(;++n<u;){var g=t[n],b=e?e(g,n,t):g;(r?!n||f[f.length-1]!==b:i(f,b)<0)&&((e||l)&&f.push(b),s.push(g))}return l?(d(f.array),v(f)):e&&d(f),s}function ft(t){return function(e,n,i){var o={};if(n=r.createCallback(n,i,3),fn(e))for(var a=-1,u=e.length;++a<u;){var s=e[a];t(o,s,n(s,a,e),e)}else xn(e,function(r,e,i){t(o,r,n(r,e,i),i)});return o}}function ht(t,r,e,i,o,a){var u=1&r,s=2&r,l=4&r,c=16&r,f=32&r;if(!s&&!Ot(t))throw new Se;c&&!e.length&&(r&=-17,c=e=!1),f&&!i.length&&(r&=-33,f=i=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=b(h),h[2]&&(h[2]=b(h[2])),h[3]&&(h[3]=b(h[3])),!u||1&h[1]||(h[4]=o),!u&&1&h[1]&&(r|=8),!l||4&h[1]||(h[5]=a),c&&qe.apply(h[2]||(h[2]=[]),e),f&&Ze.apply(h[3]||(h[3]=[]),i),h[1]|=r,ht.apply(null,h);var p=1==r||17===r?n:x;return p([t,r,e,i,o,a])}function pt(){et.shadowedProps=B,et.array=et.bottom=et.loop=et.top="",et.init="iterable",et.useHas=!0;for(var t,r=0;t=arguments[r];r++)for(var e in t)et[e]=t[e];var n=et.args;et.firstArg=/^[^,]+/.exec(n)[0];var i=we("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+n+") {\n"+ln(et)+"\n}");return i(_,V,Le,Ye,T,yt,fn,zt,et.keys,Ie,nt,un,H,ke,Oe)}function gt(t){return bn[t]}function dt(){var t=(t=r.indexOf)===wr?o:t;return t}function vt(t){return"function"==typeof t&&Ue.test(t)}function bt(t){var r,e;return!t||Oe.call(t)!=$||(r=t.constructor,Ot(r)&&!(r instanceof r))||!sn.argsClass&&yt(t)||!sn.nodeClass&&g(t)?!1:sn.ownLast?(wn(t,function(t,r,n){return e=Ye.call(n,r),!1}),e!==!1):(wn(t,function(t,r){e=r}),"undefined"==typeof e||Ye.call(t,e))}function mt(t){return mn[t]}function yt(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Oe.call(t)==Y||!1}function _t(t,r,e,n){return"boolean"!=typeof r&&null!=r&&(n=e,e=r,r=!1),i(t,r,"function"==typeof e&&_(e,n,1))}function xt(t,r,e){return i(t,!0,"function"==typeof r&&_(r,e,1))}function Ct(t,r){var e=u(t);return r?Cn(e,r):e}function Tt(t,e,n){var i;return e=r.createCallback(e,n,3),En(t,function(t,r,n){return e(t,r,n)?(i=r,!1):void 0}),i}function wt(t,e,n){var i;return e=r.createCallback(e,n,3),Rt(t,function(t,r,n){return e(t,r,n)?(i=r,!1):void 0}),i}function Et(t,r,e){var n=[];wn(t,function(t,r){n.push(r,t)});var i=n.length;for(r=_(r,e,3);i--&&r(n[i--],n[i],t)!==!1;);return t}function Rt(t,r,e){var n=pn(t),i=n.length;for(r=_(r,e,3);i--;){var o=n[i];if(r(t[o],o,t)===!1)break}return t}function Pt(t){var r=[];return wn(t,function(t,e){Ot(t)&&r.push(e)}),r.sort()}function Mt(t,r){return t?Ye.call(t,r):!1}function At(t){for(var r=-1,e=pn(t),n=e.length,i={};++r<n;){var o=e[r];i[t[o]]=o}return i}function St(t){return t===!0||t===!1||t&&"object"==typeof t&&Oe.call(t)==G||!1}function Dt(t){return t&&"object"==typeof t&&Oe.call(t)==W||!1}function Lt(t){return t&&1===t.nodeType||!1}function It(t){var r=!0;if(!t)return r;var e=Oe.call(t),n=t.length;return e==q||e==H||(sn.argsClass?e==Y:yt(t))||e==$&&"number"==typeof n&&Ot(t.splice)?!n:(En(t,function(){return r=!1}),r)}function kt(t,r,e,n){return at(t,r,"function"==typeof e&&_(e,n,2))}function Ft(t){return He(t)&&!Je(parseFloat(t))}function Ot(t){return"function"==typeof t}function Ut(t){return!(!t||!nt[typeof t])}function jt(t){return Xt(t)&&t!=+t}function Nt(t){return null===t}function Xt(t){return"number"==typeof t||t&&"object"==typeof t&&Oe.call(t)==Q||!1}function Bt(t){return t&&nt[typeof t]&&Oe.call(t)==K||!1}function zt(t){return"string"==typeof t||t&&"object"==typeof t&&Oe.call(t)==H||!1}function Yt(t){return"undefined"==typeof t}function qt(t,e,n){var i={};return e=r.createCallback(e,n,3),En(t,function(t,r,n){i[r]=e(t,r,n)}),i}function Gt(t){var r=arguments,e=2;if(!Ut(t))return t;if("number"!=typeof r[2]&&(e=r.length),e>3&&"function"==typeof r[e-2])var n=_(r[--e-1],r[e--],2);else e>2&&"function"==typeof r[e-1]&&(n=r[--e]);for(var i=b(arguments,1,e),o=-1,a=h(),u=h();++o<e;)ut(t,i[o],n,a,u);return d(a),d(u),t}function Wt(t,e,n){var i={};if("function"!=typeof e){var o=[];wn(t,function(t,r){o.push(r)}),o=R(o,it(arguments,!0,!1,1));for(var a=-1,u=o.length;++a<u;){var s=o[a];i[s]=t[s]}}else e=r.createCallback(e,n,3),wn(t,function(t,r,n){e(t,r,n)||(i[r]=t)});return i}function Vt(t){for(var r=-1,e=pn(t),n=e.length,i=_e(n);++r<n;){var o=e[r];i[r]=[o,t[o]]}return i}function Zt(t,e,n){var i={};if("function"!=typeof e)for(var o=-1,a=it(arguments,!0,!1,1),u=Ut(t)?a.length:0;++o<u;){var s=a[o];s in t&&(i[s]=t[s])}else e=r.createCallback(e,n,3),wn(t,function(t,r,n){e(t,r,n)&&(i[r]=t)});return i}function Qt(t,e,n,i){var o=fn(t);if(null==n)if(o)n=[];else{var a=t&&t.constructor,s=a&&a.prototype;n=u(s)}return e&&(e=r.createCallback(e,i,4),(o?xn:En)(t,function(t,r,i){return e(n,t,r,i)})),n}function $t(t){for(var r=-1,e=pn(t),n=e.length,i=_e(n);++r<n;)i[r]=t[e[r]];return i}function Kt(t){var r=arguments,e=-1,n=it(r,!0,!1,1),i=r[2]&&r[2][r[1]]===t?1:n.length,o=_e(i);for(sn.unindexedChars&&zt(t)&&(t=t.split(""));++e<i;)o[e]=t[n[e]];return o}function Ht(t,r,e){var n=-1,i=dt(),o=t?t.length:0,a=!1;return e=(0>e?rn(0,o+e):e)||0,fn(t)?a=i(t,r,e)>-1:"number"==typeof o?a=(zt(t)?t.indexOf(r,e):i(t,r,e))>-1:xn(t,function(t){return++n>=e?!(a=t===r):void 0}),a}function Jt(t,e,n){var i=!0;if(e=r.createCallback(e,n,3),fn(t))for(var o=-1,a=t.length;++o<a&&(i=!!e(t[o],o,t)););else xn(t,function(t,r,n){return i=!!e(t,r,n)});return i}function tr(t,e,n){var i=[];if(e=r.createCallback(e,n,3),fn(t))for(var o=-1,a=t.length;++o<a;){var u=t[o];e(u,o,t)&&i.push(u)}else xn(t,function(t,r,n){e(t,r,n)&&i.push(t)});return i}function rr(t,e,n){if(e=r.createCallback(e,n,3),!fn(t)){var i;return xn(t,function(t,r,n){return e(t,r,n)?(i=t,!1):void 0}),i}for(var o=-1,a=t.length;++o<a;){var u=t[o];if(e(u,o,t))return u}}function er(t,e,n){var i;return e=r.createCallback(e,n,3),ir(t,function(t,r,n){return e(t,r,n)?(i=t,!1):void 0}),i}function nr(t,r,e){if(r&&"undefined"==typeof e&&fn(t))for(var n=-1,i=t.length;++n<i&&r(t[n],n,t)!==!1;);else xn(t,r,e);return t}function ir(t,r,e){var n=t,i=t?t.length:0;if(r=r&&"undefined"==typeof e?r:_(r,e,3),fn(t))for(;i--&&r(t[i],i,t)!==!1;);else{if("number"!=typeof i){var o=pn(t);i=o.length}else sn.unindexedChars&&zt(t)&&(n=t.split(""));xn(t,function(t,e,a){return e=o?o[--i]:--i,r(n[e],e,a)})}return t}function or(t,r){var e=b(arguments,2),n=-1,i="function"==typeof r,o=t?t.length:0,a=_e("number"==typeof o?o:0);return nr(t,function(t){a[++n]=(i?r:t[r]).apply(t,e)}),a}function ar(t,e,n){var i=-1,o=t?t.length:0,a=_e("number"==typeof o?o:0);if(e=r.createCallback(e,n,3),fn(t))for(;++i<o;)a[i]=e(t[i],i,t);else xn(t,function(t,r,n){a[++i]=e(t,r,n)});return a}function ur(t,e,n){var i=-(1/0),o=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&fn(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];l>o&&(o=l)}else e=null==e&&zt(t)?s:r.createCallback(e,n,3),xn(t,function(t,r,n){var a=e(t,r,n);a>i&&(i=a,o=t)});return o}function sr(t,e,n){var i=1/0,o=i;if("function"!=typeof e&&n&&n[e]===t&&(e=null),null==e&&fn(t))for(var a=-1,u=t.length;++a<u;){var l=t[a];o>l&&(o=l)}else e=null==e&&zt(t)?s:r.createCallback(e,n,3),xn(t,function(t,r,n){var a=e(t,r,n);i>a&&(i=a,o=t)});return o}function lr(t,e,n,i){var o=arguments.length<3;if(e=r.createCallback(e,i,4),fn(t)){var a=-1,u=t.length;for(o&&(n=t[++a]);++a<u;)n=e(n,t[a],a,t)}else xn(t,function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)});return n}function cr(t,e,n,i){var o=arguments.length<3;return e=r.createCallback(e,i,4),ir(t,function(t,r,i){n=o?(o=!1,t):e(n,t,r,i)}),n}function fr(t,e,n){return e=r.createCallback(e,n,3),tr(t,function(t,r,n){return!e(t,r,n)})}function hr(t,r,e){if(t&&"number"!=typeof t.length?t=$t(t):sn.unindexedChars&&zt(t)&&(t=t.split("")),null==r||e)return t?t[st(0,t.length-1)]:y;var n=pr(t);return n.length=en(rn(0,r),n.length),n}function pr(t){var r=-1,e=t?t.length:0,n=_e("number"==typeof e?e:0);return nr(t,function(t){var e=st(0,++r);n[r]=n[e],n[e]=t}),n}function gr(t){var r=t?t.length:0;return"number"==typeof r?r:pn(t).length}function dr(t,e,n){var i;if(e=r.createCallback(e,n,3),fn(t))for(var o=-1,a=t.length;++o<a&&!(i=e(t[o],o,t)););else xn(t,function(t,r,n){return!(i=e(t,r,n))});return!!i}function vr(t,e,n){var i=-1,o=fn(e),a=t?t.length:0,u=_e("number"==typeof a?a:0);for(o||(e=r.createCallback(e,n,3)),nr(t,function(t,r,n){var a=u[++i]=p();o?a.criteria=ar(e,function(r){return t[r]}):(a.criteria=h())[0]=e(t,r,n),a.index=i,a.value=t}),a=u.length,u.sort(l);a--;){var s=u[a];u[a]=s.value,o||d(s.criteria),v(s)}return u}function br(t){return t&&"number"==typeof t.length?sn.unindexedChars&&zt(t)?t.split(""):b(t):$t(t)}function mr(t){for(var r=-1,e=t?t.length:0,n=[];++r<e;){var i=t[r];i&&n.push(i)}return n}function yr(t){return R(t,it(arguments,!0,!0,1))}function _r(t,e,n){var i=-1,o=t?t.length:0;for(e=r.createCallback(e,n,3);++i<o;)if(e(t[i],i,t))return i;return-1}function xr(t,e,n){var i=t?t.length:0;for(e=r.createCallback(e,n,3);i--;)if(e(t[i],i,t))return i;return-1}function Cr(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var a=-1;for(e=r.createCallback(e,n,3);++a<o&&e(t[a],a,t);)i++}else if(i=e,null==i||n)return t?t[0]:y;return b(t,0,en(rn(0,i),o))}function Tr(t,r,e,n){return"boolean"!=typeof r&&null!=r&&(n=e,e="function"!=typeof r&&n&&n[r]===t?null:r,r=!1),null!=e&&(t=ar(t,e,n)),it(t,r)}function wr(t,r,e){if("number"==typeof e){var n=t?t.length:0;e=0>e?rn(0,n+e):e||0}else if(e){var i=Ir(t,r);return t[i]===r?i:-1}return o(t,r,e)}function Er(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var a=o;for(e=r.createCallback(e,n,3);a--&&e(t[a],a,t);)i++}else i=null==e||n?1:e||i;return b(t,0,en(rn(0,o-i),o))}function Rr(){for(var t=[],r=-1,e=arguments.length,n=h(),i=dt(),u=i===o,s=h();++r<e;){var l=arguments[r];(fn(l)||yt(l))&&(t.push(l),n.push(u&&l.length>=E&&c(r?t[r]:s)))}var f=t[0],p=-1,g=f?f.length:0,b=[];t:for(;++p<g;){var m=n[0];if(l=f[p],(m?a(m,l):i(s,l))<0){for(r=e,(m||s).push(l);--r;)if(m=n[r],(m?a(m,l):i(t[r],l))<0)continue t;b.push(l)}}for(;e--;)m=n[e],m&&v(m);return d(n),d(s),b}function Pr(t,e,n){var i=0,o=t?t.length:0;if("number"!=typeof e&&null!=e){var a=o;for(e=r.createCallback(e,n,3);a--&&e(t[a],a,t);)i++}else if(i=e,null==i||n)return t?t[o-1]:y;return b(t,rn(0,o-i))}function Mr(t,r,e){var n=t?t.length:0;for("number"==typeof e&&(n=(0>e?rn(0,n+e):en(e,n-1))+1);n--;)if(t[n]===r)return n;return-1}function Ar(t){for(var r=arguments,e=0,n=r.length,i=t?t.length:0;++e<n;)for(var o=-1,a=r[e];++o<i;)t[o]===a&&(Ve.call(t,o--,1),i--);return t}function Sr(t,r,e){t=+t||0,e="number"==typeof e?e:+e||1,null==r&&(r=t,t=0);for(var n=-1,i=rn(0,je((r-t)/(e||1))),o=_e(i);++n<i;)o[n]=t,t+=e;return o}function Dr(t,e,n){var i=-1,o=t?t.length:0,a=[];for(e=r.createCallback(e,n,3);++i<o;){var u=t[i];e(u,i,t)&&(a.push(u),Ve.call(t,i--,1),o--)}return a}function Lr(t,e,n){if("number"!=typeof e&&null!=e){var i=0,o=-1,a=t?t.length:0;for(e=r.createCallback(e,n,3);++o<a&&e(t[o],o,t);)i++}else i=null==e||n?1:rn(0,e);return b(t,i)}function Ir(t,e,n,i){var o=0,a=t?t.length:o;for(n=n?r.createCallback(n,i,1):ie,e=n(e);a>o;){var u=o+a>>>1;n(t[u])<e?o=u+1:a=u}return o}function kr(){return ct(it(arguments,!0,!0))}function Fr(t,e,n,i){return"boolean"!=typeof e&&null!=e&&(i=n,n="function"!=typeof e&&i&&i[e]===t?null:e,e=!1),null!=n&&(n=r.createCallback(n,i,3)),ct(t,e,n)}function Or(t){return R(t,b(arguments,1))}function Ur(){for(var t=-1,r=arguments.length;++t<r;){var e=arguments[t];if(fn(e)||yt(e))var n=n?ct(R(n,e).concat(R(e,n))):e}return n||[]}function jr(){for(var t=arguments.length>1?arguments:arguments[0],r=-1,e=t?ur(Sn(t,"length")):0,n=_e(0>e?0:e);++r<e;)n[r]=Sn(t,r);return n}function Nr(t,r){var e=-1,n=t?t.length:0,i={};for(r||!n||fn(t[0])||(r=[]);++e<n;){var o=t[e];r?i[o]=r[e]:o&&(i[o[0]]=o[1])}return i}function Xr(t,r){if(!Ot(r))throw new Se;return function(){return--t<1?r.apply(this,arguments):void 0}}function Br(t,r){return arguments.length>2?ht(t,17,b(arguments,2),null,r):ht(t,1,null,null,r)}function zr(t){for(var r=arguments.length>1?it(arguments,!0,!1,1):Pt(t),e=-1,n=r.length;++e<n;){var i=r[e];t[i]=ht(t[i],1,null,null,t)}return t}function Yr(t,r){return arguments.length>2?ht(r,19,b(arguments,2),null,t):ht(r,3,null,null,t)}function qr(){for(var t=arguments,r=t.length;r--;)if(!Ot(t[r]))throw new Se;return function(){for(var r=arguments,e=t.length;e--;)r=[t[e].apply(this,r)];return r[0]}}function Gr(t,r){return r="number"==typeof r?r:+r||t.length,ht(t,4,null,null,null,r)}function Wr(t,r,e){var n,i,o,a,u,s,l,c=0,f=!1,h=!0;if(!Ot(t))throw new Se;if(r=rn(0,r)||0,e===!0){var p=!0;h=!1}else Ut(e)&&(p=e.leading,f="maxWait"in e&&(rn(r,e.maxWait)||0),h="trailing"in e?e.trailing:h);var g=function(){var e=r-(Ln()-a);if(0>=e){i&&Ne(i);var f=l;i=s=l=y,f&&(c=Ln(),o=t.apply(u,n),s||i||(n=u=null))}else s=We(g,e)},d=function(){s&&Ne(s),i=s=l=y,(h||f!==r)&&(c=Ln(),o=t.apply(u,n),s||i||(n=u=null))};return function(){if(n=arguments,a=Ln(),u=this,l=h&&(s||!p),f===!1)var e=p&&!s;else{i||p||(c=a);var v=f-(a-c),b=0>=v;b?(i&&(i=Ne(i)),c=a,o=t.apply(u,n)):i||(i=We(d,v))}return b&&s?s=Ne(s):s||r===f||(s=We(g,r)),e&&(b=!0,o=t.apply(u,n)),!b||s||i||(n=u=null),o}}function Vr(t){if(!Ot(t))throw new Se;var r=b(arguments,1);return We(function(){t.apply(y,r)},1)}function Zr(t,r){if(!Ot(t))throw new Se;var e=b(arguments,2);return We(function(){t.apply(y,e)},r)}function Qr(t,r){if(!Ot(t))throw new Se;var e=function(){var n=e.cache,i=r?r.apply(this,arguments):w+arguments[0];return Ye.call(n,i)?n[i]:n[i]=t.apply(this,arguments)};return e.cache={},e}function $r(t){var r,e;if(!Ot(t))throw new Se;return function(){return r?e:(r=!0,e=t.apply(this,arguments),t=null,e)}}function Kr(t){return ht(t,16,b(arguments,1))}function Hr(t){return ht(t,32,null,b(arguments,1))}function Jr(t,r,e){var n=!0,i=!0;if(!Ot(t))throw new Se;return e===!1?n=!1:Ut(e)&&(n="leading"in e?e.leading:n,i="trailing"in e?e.trailing:i),tt.leading=n,tt.maxWait=r,tt.trailing=i,Wr(t,r,tt)}function te(t,r){return ht(r,16,[t])}function re(t){return function(){return t}}function ee(t,r,e){var n=typeof t;if(null==t||"function"==n)return _(t,r,e);if("object"!=n)return se(t);var i=pn(t),o=i[0],a=t[o];return 1!=i.length||a!==a||Ut(a)?function(r){for(var e=i.length,n=!1;e--&&(n=at(r[i[e]],t[i[e]],null,!0)););return n}:function(t){var r=t[o];return a===r&&(0!==a||1/a==1/r)}}function ne(t){return null==t?"":Ae(t).replace(_n,gt)}function ie(t){return t}function oe(t,n,i){var o=!0,a=n&&Pt(n);n&&(i||a.length)||(null==i&&(i=n),u=e,n=t,t=r,a=Pt(n)),i===!1?o=!1:Ut(i)&&"chain"in i&&(o=i.chain);var u=t,s=Ot(u);nr(a,function(r){var e=t[r]=n[r];s&&(u.prototype[r]=function(){var r=this.__chain__,n=this.__wrapped__,i=[n];qe.apply(i,arguments);var a=e.apply(t,i);if(o||r){if(n===a&&Ut(a))return this;a=new u(a),a.__chain__=r}return a})})}function ae(){return t._=Fe,this}function ue(){}function se(t){return function(r){return r[t]}}function le(t,r,e){var n=null==t,i=null==r;if(null==e&&("boolean"==typeof t&&i?(e=t,t=1):i||"boolean"!=typeof r||(e=r,i=!0)),n&&i&&(r=1),t=+t||0,i?(r=t,t=0):r=+r||0,e||t%1||r%1){var o=on();return en(t+o*(r-t+parseFloat("1e-"+((o+"").length-1))),r)}return st(t,r)}function ce(t,r){if(t){var e=t[r];return Ot(e)?t[r]():e}}function fe(t,e,n){var i=r.templateSettings;t=Ae(t||""),n=Tn({},n,i);var o,a=Tn({},n.imports,i.imports),u=pn(a),s=$t(a),l=0,c=n.interpolate||U,h="__p += '",p=Me((n.escape||U).source+"|"+c.source+"|"+(c===F?D:U).source+"|"+(n.evaluate||U).source+"|$","g");t.replace(p,function(r,e,n,i,a,u){return n||(n=i),h+=t.slice(l,u).replace(N,f),e&&(h+="' +\n__e("+e+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),n&&(h+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=u+r.length,r}),h+="';\n";var g=n.variable,d=g;d||(g="obj",h="with ("+g+") {\n"+h+"\n}\n"),h=(o?h.replace(M,""):h).replace(A,"$1").replace(S,"$1;"),h="function("+g+") {\n"+(d?"":g+" || ("+g+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var v="\n/*\n//# sourceURL="+(n.sourceURL||"/lodash/template/source["+z++ +"]")+"\n*/";try{var b=we(u,"return "+h+v).apply(y,s)}catch(m){throw m.source=h,m}return e?b(e):(b.source=h,b)}function he(t,r,e){t=(t=+t)>-1?t:0;var n=-1,i=_e(t);for(r=_(r,e,1);++n<t;)i[n]=r(n);return i}function pe(t){return null==t?"":Ae(t).replace(yn,mt)}function ge(t){var r=++C;return Ae(null==t?"":t)+r}function de(t){return t=new e(t),t.__chain__=!0,t}function ve(t,r){return r(t),t}function be(){return this.__chain__=!0,this}function me(){return Ae(this.__wrapped__)}function ye(){return this.__wrapped__}t=t?lt.defaults(ot.Object(),t,lt.pick(ot,X)):ot;var _e=t.Array,xe=t.Boolean,Ce=t.Date,Te=t.Error,we=t.Function,Ee=t.Math,Re=t.Number,Pe=t.Object,Me=t.RegExp,Ae=t.String,Se=t.TypeError,De=[],Le=Te.prototype,Ie=Pe.prototype,ke=Ae.prototype,Fe=t._,Oe=Ie.toString,Ue=Me("^"+Ae(Oe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),je=Ee.ceil,Ne=t.clearTimeout,Xe=Ee.floor,Be=we.prototype.toString,ze=vt(ze=Pe.getPrototypeOf)&&ze,Ye=Ie.hasOwnProperty,qe=De.push,Ge=Ie.propertyIsEnumerable,We=t.setTimeout,Ve=De.splice,Ze=De.unshift,Qe=function(){try{var t={},r=vt(r=Pe.defineProperty)&&r,e=r(t,t,t)&&r}catch(n){}return e}(),$e=vt($e=Pe.create)&&$e,Ke=vt(Ke=_e.isArray)&&Ke,He=t.isFinite,Je=t.isNaN,tn=vt(tn=Pe.keys)&&tn,rn=Ee.max,en=Ee.min,nn=t.parseInt,on=Ee.random,an={};an[q]=_e,an[G]=xe,an[W]=Ce,an[Z]=we,an[$]=Pe,an[Q]=Re,an[K]=Me,an[H]=Ae;var un={};un[q]=un[W]=un[Q]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},un[G]=un[H]={constructor:!0,toString:!0,valueOf:!0},un[V]=un[Z]=un[K]={constructor:!0,toString:!0},un[$]={constructor:!0},function(){for(var t=B.length;t--;){var r=B[t];for(var e in un)Ye.call(un,e)&&!Ye.call(un[e],r)&&(un[e][r]=!1)}}(),e.prototype=r.prototype;var sn=r.support={};!function(){var r=function(){this.x=1},e={0:1,length:1},n=[];r.prototype={valueOf:1,y:1};for(var i in new r)n.push(i);for(i in arguments);sn.argsClass=Oe.call(arguments)==Y,sn.argsObject=arguments.constructor==Pe&&!(arguments instanceof _e),sn.enumErrorProps=Ge.call(Le,"message")||Ge.call(Le,"name"),sn.enumPrototypes=Ge.call(r,"prototype"),sn.funcDecomp=!vt(t.WinRTError)&&j.test(m),sn.funcNames="string"==typeof we.name,sn.nonEnumArgs=0!=i,sn.nonEnumShadows=!/valueOf/.test(n),sn.ownLast="x"!=n[0],sn.spliceObjects=(De.splice.call(e,0,1),!e[0]),sn.unindexedChars="x"[0]+Pe("x")[0]!="xx";try{sn.nodeClass=!(Oe.call(document)==$&&!({toString:0}+""))}catch(o){sn.nodeClass=!0}}(1),r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:r}};var ln=function(t){var r="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(r+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",sn.unindexedChars&&(r+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),r+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):sn.nonEnumArgs&&(r+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),sn.enumPrototypes&&(r+="\n  var skipProto = typeof iterable == 'function';\n  "),sn.enumErrorProps&&(r+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var e=[];if(sn.enumPrototypes&&e.push('!(skipProto && index == "prototype")'),sn.enumErrorProps&&e.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)r+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",e.length&&(r+="    if ("+e.join(" && ")+") {\n  "),r+=t.loop+";    ",e.length&&(r+="\n    }"),r+="\n  }  ";else if(r+="\n  for (index in iterable) {\n",t.useHas&&e.push("hasOwnProperty.call(iterable, index)"),e.length&&(r+="    if ("+e.join(" && ")+") {\n  "),r+=t.loop+";    ",e.length&&(r+="\n    }"),r+="\n  }    ",sn.nonEnumShadows){for(r+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)r+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(r+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),r+=") {\n      "+t.loop+";\n    }      ";r+="\n  }    "}return(t.array||sn.nonEnumArgs)&&(r+="\n}"),r+=t.bottom+";\nreturn result"};$e||(u=function(){function r(){}return function(e){if(Ut(e)){r.prototype=e;var n=new r;r.prototype=null}return n||t.Object()}}());var cn=Qe?function(t,r){rt.value=r,Qe(t,"__bindData__",rt),rt.value=null}:ue;sn.argsClass||(yt=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Ye.call(t,"callee")&&!Ge.call(t,"callee")||!1});var fn=Ke||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Oe.call(t)==q||!1},hn=pt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pn=tn?function(t){return Ut(t)?sn.enumPrototypes&&"function"==typeof t||sn.nonEnumArgs&&t.length&&yt(t)?hn(t):tn(t):[]}:hn,gn={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pn,loop:"if (callback(iterable[index], index, collection) === false) return result"},dn={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pn,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},vn={top:"if (!objectTypes[typeof iterable]) return result;\n"+gn.top,array:!1},bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mn=At(bn),yn=Me("("+pn(mn).join("|")+")","g"),_n=Me("["+pn(bn).join("")+"]","g"),xn=pt(gn),Cn=pt(dn,{top:dn.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Tn=pt(dn),wn=pt(gn,vn,{useHas:!1}),En=pt(gn,vn);Ot(/x/)&&(Ot=function(t){return"function"==typeof t&&Oe.call(t)==Z});var Rn=ze?function(t){if(!t||Oe.call(t)!=$||!sn.argsClass&&yt(t))return!1;var r=t.valueOf,e=vt(r)&&(e=ze(r))&&ze(e);return e?t==e||ze(t)==e:bt(t)}:bt,Pn=ft(function(t,r,e){Ye.call(t,e)?t[e]++:t[e]=1}),Mn=ft(function(t,r,e){(Ye.call(t,e)?t[e]:t[e]=[]).push(r)}),An=ft(function(t,r,e){t[e]=r}),Sn=ar,Dn=tr,Ln=vt(Ln=Ce.now)&&Ln||function(){return(new Ce).getTime()},In=8==nn(P+"08")?nn:function(t,r){return nn(zt(t)?t.replace(O,""):t,r||0)};return r.after=Xr,r.assign=Cn,r.at=Kt,r.bind=Br,r.bindAll=zr,r.bindKey=Yr,r.chain=de,r.compact=mr,r.compose=qr,r.constant=re,r.countBy=Pn,r.create=Ct,r.createCallback=ee,r.curry=Gr,r.debounce=Wr,r.defaults=Tn,r.defer=Vr,r.delay=Zr,r.difference=yr,r.filter=tr,r.flatten=Tr,r.forEach=nr,r.forEachRight=ir,r.forIn=wn,r.forInRight=Et,r.forOwn=En,r.forOwnRight=Rt,r.functions=Pt,r.groupBy=Mn,r.indexBy=An,r.initial=Er,r.intersection=Rr,r.invert=At,r.invoke=or,r.keys=pn,r.map=ar,r.mapValues=qt,r.max=ur,r.memoize=Qr,r.merge=Gt,r.min=sr,r.omit=Wt,r.once=$r,r.pairs=Vt,r.partial=Kr,r.partialRight=Hr,r.pick=Zt,r.pluck=Sn,r.property=se,r.pull=Ar,r.range=Sr,r.reject=fr,r.remove=Dr,r.rest=Lr,r.shuffle=pr,r.sortBy=vr,r.tap=ve,r.throttle=Jr,r.times=he,r.toArray=br,r.transform=Qt,r.union=kr,r.uniq=Fr,r.values=$t,r.where=Dn,r.without=Or,r.wrap=te,r.xor=Ur,r.zip=jr,r.zipObject=Nr,r.collect=ar,r.drop=Lr,r.each=nr,r.eachRight=ir,r.extend=Cn,r.methods=Pt,r.object=Nr,r.select=tr,r.tail=Lr,r.unique=Fr,r.unzip=jr,oe(r),r.clone=_t,r.cloneDeep=xt,r.contains=Ht,r.escape=ne,r.every=Jt,r.find=rr,r.findIndex=_r,r.findKey=Tt,r.findLast=er,r.findLastIndex=xr,r.findLastKey=wt,r.has=Mt,r.identity=ie,r.indexOf=wr,r.isArguments=yt,r.isArray=fn,r.isBoolean=St,r.isDate=Dt,r.isElement=Lt,r.isEmpty=It,r.isEqual=kt,r.isFinite=Ft,r.isFunction=Ot,r.isNaN=jt,r.isNull=Nt,r.isNumber=Xt,r.isObject=Ut,r.isPlainObject=Rn,r.isRegExp=Bt,r.isString=zt,r.isUndefined=Yt,r.lastIndexOf=Mr,r.mixin=oe,r.noConflict=ae,r.noop=ue,r.now=Ln,r.parseInt=In,r.random=le,r.reduce=lr,r.reduceRight=cr,r.result=ce,r.runInContext=m,r.size=gr,r.some=dr,r.sortedIndex=Ir,r.template=fe,r.unescape=pe,r.uniqueId=ge,r.all=Jt,r.any=dr,r.detect=rr,r.findWhere=rr,r.foldl=lr,r.foldr=cr,r.include=Ht,r.inject=lr,oe(function(){var t={};return En(r,function(e,n){r.prototype[n]||(t[n]=e)}),t}(),!1),r.first=Cr,r.last=Pr,r.sample=hr,r.take=Cr,r.head=Cr,En(r,function(t,n){var i="sample"!==n;r.prototype[n]||(r.prototype[n]=function(r,n){var o=this.__chain__,a=t(this.__wrapped__,r,n);return o||null!=r&&(!n||i&&"function"==typeof r)?new e(a,o):a})}),r.VERSION="2.4.2",r.prototype.chain=be,r.prototype.toString=me,r.prototype.value=ye,r.prototype.valueOf=ye,xn(["join","pop","shift"],function(t){var n=De[t];r.prototype[t]=function(){var t=this.__chain__,r=n.apply(this.__wrapped__,arguments);return t?new e(r,t):r}}),xn(["push","reverse","sort","unshift"],function(t){var e=De[t];r.prototype[t]=function(){return e.apply(this.__wrapped__,arguments),this}}),xn(["concat","slice","splice"],function(t){var n=De[t];r.prototype[t]=function(){return new e(n.apply(this.__wrapped__,arguments),this.__chain__)}}),sn.spliceObjects||xn(["pop","shift","splice"],function(t){var n=De[t],i="splice"==t;r.prototype[t]=function(){var t=this.__chain__,r=this.__wrapped__,o=n.apply(r,arguments);return 0===r.length&&delete r[0],t||i?new e(o,t):o}}),r}var y,_=[],x=[],C=0,T={},w=+new Date+"",E=75,R=40,P=" 	\f\ufeff\n\r\u2028\u2029",M=/\b__p \+= '';/g,A=/\b(__p \+=) '' \+/g,S=/(__e\(.*?\)|\b__t\)) \+\n'';/g,D=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,L=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,O=RegExp("^["+P+"]*0+(?=.$)"),U=/($^)/,j=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,X=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],B=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],z=0,Y="[object Arguments]",q="[object Array]",G="[object Boolean]",W="[object Date]",V="[object Error]",Z="[object Function]",Q="[object Number]",$="[object Object]",K="[object RegExp]",H="[object String]",J={};J[Z]=!1,J[Y]=J[q]=J[G]=J[W]=J[Q]=J[$]=J[K]=J[H]=!0;var tt={leading:!1,maxWait:0,trailing:!1},rt={configurable:!1,enumerable:!1,value:null,writable:!1},et={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},nt={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},it={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},ot=nt[typeof window]&&window||this,at=nt[typeof r]&&r&&!r.nodeType&&r,ut=nt[typeof t]&&t&&!t.nodeType&&t,st=(ut&&ut.exports===at&&at,nt[typeof i]&&i);!st||st.global!==st&&st.window!==st||(ot=st);var lt=m();ot._=lt,n=function(){return lt}.call(r,e,r,t),!(n!==y&&(t.exports=n))}).call(this)}).call(r,e(18)(t),function(){return this}())},function(t,r,e){function n(t,r,e){o(t,function(n,o){return i(t,o)?r.call(e,t[o],o,t):void 0})}var i=e(6),o=e(49);t.exports=n},function(t,r,e){var n;n=function(){function t(t){return!!t&&"object"==typeof t&&t.constructor===Object}return t}.call(r,e,r,t),!(void 0!==n&&(t.exports=n))},function(t,r,e){var n,i;n=[e(8),e(57)],i=function(t,r){function e(e,n,i){r(e,function(r,o){return t(e,o)?n.call(i,e[o],o,e):void 0})}return e}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r){t.exports="\nprecision mediump float;\n\nuniform sampler2D compositeSampler;\nuniform sampler2D layerSampler;\nvarying vec2 v_texCoord;\n\nvoid main() {\n    // Sample the texture containing what we have composited so far\n    vec4 color = texture2D(compositeSampler, v_texCoord);\n\n    // Sample the new layer to be composited in\n    vec4 compColor = texture2D(layerSampler, v_texCoord);\n\n/*\n    // Choose the fragment with the greater depth value\n    if (color.a > compColor.a) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = compColor;\n    }\n*/\n\n    // Another way to choose the fragment with the greater depth value\n    float stepVal = step((compColor.a - color.a), 0.0);\n    gl_FragColor = (stepVal * color) + ((1.0 - stepVal) * compColor);\n\n}\n"},function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,r,e){var n=e(10),i={};i.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},i.clone=function(t){var r=new n.ARRAY_TYPE(3);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r},i.fromValues=function(t,r,e){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=r,i[2]=e,i},i.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t},i.set=function(t,r,e,n){return t[0]=r,t[1]=e,t[2]=n,t},i.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t},i.subtract=function(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t},i.sub=i.subtract,i.multiply=function(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],
t[2]=r[2]*e[2],t},i.mul=i.multiply,i.divide=function(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t},i.div=i.divide,i.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t},i.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t},i.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t},i.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t},i.distance=function(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2];return Math.sqrt(e*e+n*n+i*i)},i.dist=i.distance,i.squaredDistance=function(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2];return e*e+n*n+i*i},i.sqrDist=i.squaredDistance,i.length=function(t){var r=t[0],e=t[1],n=t[2];return Math.sqrt(r*r+e*e+n*n)},i.len=i.length,i.squaredLength=function(t){var r=t[0],e=t[1],n=t[2];return r*r+e*e+n*n},i.sqrLen=i.squaredLength,i.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t},i.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t},i.normalize=function(t,r){var e=r[0],n=r[1],i=r[2],o=e*e+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=r[0]*o,t[1]=r[1]*o,t[2]=r[2]*o),t},i.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]},i.cross=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=e[0],u=e[1],s=e[2];return t[0]=i*s-o*u,t[1]=o*a-n*s,t[2]=n*u-i*a,t},i.lerp=function(t,r,e,n){var i=r[0],o=r[1],a=r[2];return t[0]=i+n*(e[0]-i),t[1]=o+n*(e[1]-o),t[2]=a+n*(e[2]-a),t},i.hermite=function(t,r,e,n,i,o){var a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,l=a*(o-1),c=a*(3-2*o);return t[0]=r[0]*u+e[0]*s+n[0]*l+i[0]*c,t[1]=r[1]*u+e[1]*s+n[1]*l+i[1]*c,t[2]=r[2]*u+e[2]*s+n[2]*l+i[2]*c,t},i.bezier=function(t,r,e,n,i,o){var a=1-o,u=a*a,s=o*o,l=u*a,c=3*o*u,f=3*s*a,h=s*o;return t[0]=r[0]*l+e[0]*c+n[0]*f+i[0]*h,t[1]=r[1]*l+e[1]*c+n[1]*f+i[1]*h,t[2]=r[2]*l+e[2]*c+n[2]*f+i[2]*h,t},i.random=function(t,r){r=r||1;var e=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*r;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=i*r,t},i.transformMat4=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=e[3]*n+e[7]*i+e[11]*o+e[15];return a=a||1,t[0]=(e[0]*n+e[4]*i+e[8]*o+e[12])/a,t[1]=(e[1]*n+e[5]*i+e[9]*o+e[13])/a,t[2]=(e[2]*n+e[6]*i+e[10]*o+e[14])/a,t},i.transformMat3=function(t,r,e){var n=r[0],i=r[1],o=r[2];return t[0]=n*e[0]+i*e[3]+o*e[6],t[1]=n*e[1]+i*e[4]+o*e[7],t[2]=n*e[2]+i*e[5]+o*e[8],t},i.transformQuat=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=e[0],u=e[1],s=e[2],l=e[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t},i.rotateX=function(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},i.rotateY=function(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},i.rotateZ=function(t,r,e,n){var i=[],o=[];return i[0]=r[0]-e[0],i[1]=r[1]-e[1],i[2]=r[2]-e[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},i.forEach=function(){var t=i.create();return function(r,e,n,i,o,a){var u,s;for(e||(e=3),n||(n=0),s=i?Math.min(i*e+n,r.length):r.length,u=n;s>u;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],o(t,t,a),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2];return r}}(),i.angle=function(t,r){var e=i.fromValues(t[0],t[1],t[2]),n=i.fromValues(r[0],r[1],r[2]);i.normalize(e,e),i.normalize(n,n);var o=i.dot(e,n);return o>1?0:Math.acos(o)},i.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},t.exports=i},function(t,r,e){var n=e(10),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},i.clone=function(t){var r=new n.ARRAY_TYPE(4);return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r},i.fromValues=function(t,r,e,i){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=r,o[2]=e,o[3]=i,o},i.copy=function(t,r){return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t},i.set=function(t,r,e,n,i){return t[0]=r,t[1]=e,t[2]=n,t[3]=i,t},i.add=function(t,r,e){return t[0]=r[0]+e[0],t[1]=r[1]+e[1],t[2]=r[2]+e[2],t[3]=r[3]+e[3],t},i.subtract=function(t,r,e){return t[0]=r[0]-e[0],t[1]=r[1]-e[1],t[2]=r[2]-e[2],t[3]=r[3]-e[3],t},i.sub=i.subtract,i.multiply=function(t,r,e){return t[0]=r[0]*e[0],t[1]=r[1]*e[1],t[2]=r[2]*e[2],t[3]=r[3]*e[3],t},i.mul=i.multiply,i.divide=function(t,r,e){return t[0]=r[0]/e[0],t[1]=r[1]/e[1],t[2]=r[2]/e[2],t[3]=r[3]/e[3],t},i.div=i.divide,i.min=function(t,r,e){return t[0]=Math.min(r[0],e[0]),t[1]=Math.min(r[1],e[1]),t[2]=Math.min(r[2],e[2]),t[3]=Math.min(r[3],e[3]),t},i.max=function(t,r,e){return t[0]=Math.max(r[0],e[0]),t[1]=Math.max(r[1],e[1]),t[2]=Math.max(r[2],e[2]),t[3]=Math.max(r[3],e[3]),t},i.scale=function(t,r,e){return t[0]=r[0]*e,t[1]=r[1]*e,t[2]=r[2]*e,t[3]=r[3]*e,t},i.scaleAndAdd=function(t,r,e,n){return t[0]=r[0]+e[0]*n,t[1]=r[1]+e[1]*n,t[2]=r[2]+e[2]*n,t[3]=r[3]+e[3]*n,t},i.distance=function(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(e*e+n*n+i*i+o*o)},i.dist=i.distance,i.squaredDistance=function(t,r){var e=r[0]-t[0],n=r[1]-t[1],i=r[2]-t[2],o=r[3]-t[3];return e*e+n*n+i*i+o*o},i.sqrDist=i.squaredDistance,i.length=function(t){var r=t[0],e=t[1],n=t[2],i=t[3];return Math.sqrt(r*r+e*e+n*n+i*i)},i.len=i.length,i.squaredLength=function(t){var r=t[0],e=t[1],n=t[2],i=t[3];return r*r+e*e+n*n+i*i},i.sqrLen=i.squaredLength,i.negate=function(t,r){return t[0]=-r[0],t[1]=-r[1],t[2]=-r[2],t[3]=-r[3],t},i.inverse=function(t,r){return t[0]=1/r[0],t[1]=1/r[1],t[2]=1/r[2],t[3]=1/r[3],t},i.normalize=function(t,r){var e=r[0],n=r[1],i=r[2],o=r[3],a=e*e+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t},i.dot=function(t,r){return t[0]*r[0]+t[1]*r[1]+t[2]*r[2]+t[3]*r[3]},i.lerp=function(t,r,e,n){var i=r[0],o=r[1],a=r[2],u=r[3];return t[0]=i+n*(e[0]-i),t[1]=o+n*(e[1]-o),t[2]=a+n*(e[2]-a),t[3]=u+n*(e[3]-u),t},i.random=function(t,r){return r=r||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),i.normalize(t,t),i.scale(t,t,r),t},i.transformMat4=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=r[3];return t[0]=e[0]*n+e[4]*i+e[8]*o+e[12]*a,t[1]=e[1]*n+e[5]*i+e[9]*o+e[13]*a,t[2]=e[2]*n+e[6]*i+e[10]*o+e[14]*a,t[3]=e[3]*n+e[7]*i+e[11]*o+e[15]*a,t},i.transformQuat=function(t,r,e){var n=r[0],i=r[1],o=r[2],a=e[0],u=e[1],s=e[2],l=e[3],c=l*n+u*o-s*i,f=l*i+s*n-a*o,h=l*o+a*i-u*n,p=-a*n-u*i-s*o;return t[0]=c*l+p*-a+f*-s-h*-u,t[1]=f*l+p*-u+h*-a-c*-s,t[2]=h*l+p*-s+c*-u-f*-a,t[3]=r[3],t},i.forEach=function(){var t=i.create();return function(r,e,n,i,o,a){var u,s;for(e||(e=4),n||(n=0),s=i?Math.min(i*e+n,r.length):r.length,u=n;s>u;u+=e)t[0]=r[u],t[1]=r[u+1],t[2]=r[u+2],t[3]=r[u+3],o(t,t,a),r[u]=t[0],r[u+1]=t[1],r[u+2]=t[2],r[u+3]=t[3];return r}}(),i.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},t.exports=i},function(t,r,e){"use strict";function n(t,r){var e=this;this.queryDataModel=t,this.pipelineModel=r,this.metadata=t.originalData.CompositePipeline,this.pushMethod="pushToFrontAsBuffer",this.compositeMap={},this.offsetMap={},this.spriteSize=o(this.metadata.offset),this.query=null,this.composite=null,this.bgCanvas=new i(this.metadata.dimensions[0],this.metadata.dimensions[1]),this.fgCanvas=null,this.dataSubscription=t.onDataChange(function(t,r){e.sprite=t.sprite,e.composite=t.composite.data["pixel-order"].split("+"),e.updateCompositeMap(e.query,e.composite),e.render()}),this.pipelineSubscription=this.pipelineModel.onChange(function(t,r){e.setPipelineQuery(t)}),this.setPipelineQuery(this.pipelineModel.getPipelineQuery())}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(2),o=e(5),a=e(1),u="image-ready";a.mixInto(n),n.prototype.updateOffsetMap=function(t){var r=this.metadata.layers,e=r.length,n=this.metadata.offset;this.offsetMap={},this.compositeMap={};for(var i=0;e>i;i++){var o=t[2*i+1];"_"===o?this.offsetMap[r[i]]=-1:this.offsetMap[r[i]]=this.spriteSize-n[r[i]+o]}},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.setPushMethodAsBuffer=function(){this.pushMethod="pushToFrontAsBuffer"},n.prototype.setPushMethodAsImage=function(){this.pushMethod="pushToFrontAsImage"},n.prototype.setPipelineQuery=function(t){this.query!==t&&(this.query=t,this.updateOffsetMap(t),this.updateCompositeMap(t,this.composite),this.render())},n.prototype.updateCompositeMap=function(t,r){if(null!==t&&null!==r)for(var e=r,n=e.length,i=this.compositeMap;n--;){var o=e[n];if("@"===o[0]);else if(i.hasOwnProperty(o));else{for(var a=-1,u=0,s=o.length;s>u;u++)a=this.offsetMap[o[u]],-1!==a&&(u=s);i[o]=a}}},n.prototype.render=function(){function t(t){u+=t,s+=Math.floor(u/l),u%=l}var r=this;if(!this.sprite)return void this.queryDataModel.fetchData();if(null!==this.query){var e=this.bgCanvas.get2DContext(),n=this.metadata.dimensions,i=1,o=this.composite,a=o.length,u=0,s=0,l=n[0];if(this.sprite.image.complete){this.sprite.image.onload&&(this.sprite.image.onload=null),e.clearRect(0,0,n[0],n[1]);for(var c=0;a>c;c++){var f=o[c];"@"===f[0]?t(Number(f.replace(/@/,"+"))):(i=this.compositeMap[f],-1!==i&&e.drawImage(this.sprite.image,u,s+n[1]*i,1,1,u,s,1,1),t(1))}this.pushToFront(n[0],n[1])}else this.sprite.image.onload=function(){r.render()}}},n.prototype.pushToFront=function(t,r){this[this.pushMethod](t,r)},n.prototype.pushToFrontAsImage=function(t,r){var e=null;this.fgCanvas?this.fgCanvas.size(t,r):this.fgCanvas=new i(t,r),e=this.fgCanvas.get2DContext(),e.drawImage(this.bgCanvas.el,0,0,t,r,0,0,t,r);var n={url:this.fgCanvas.toDataURL(),builder:this};this.emit(u,n)},n.prototype.pushToFrontAsBuffer=function(t,r){var e={canvas:this.bgCanvas.el,imageData:this.bgCanvas.el.getContext("2d").getImageData(0,0,t,r),area:[0,0,t,r],outputSize:[t,r],builder:this};this.emit(u,e)},n.prototype.onImageReady=function(t){return this.on(u,t)},n.prototype.destroy=function(){this.off(u),this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.pipelineSubscription.unsubscribe(),this.pipelineSubscription=null,this.queryDataModel=null,this.bgCanvas.destroy(),this.bgCanvas=null},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.getControlWidgets=function(){return["CompositeControl","QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getPipelineModel=function(){return this.pipelineModel},t.exports=r["default"]},function(t,r,e){"use strict";function n(t,r){var e=this;this.queryDataModel=t,this.metadata=t.originalData.InSituDataProber,this.lookupTableManager=r,this.fieldIndex=0,this.renderMethodMutable=!0,this.renderMethod="XY",this.lastImageStack=null,this.workImage=new Image,this.triggerProbeLines=!1,this.broadcastCrossHair=!0,this.scalars={},this.probeValue=0,this.probeXYZ=[Math.floor(this.metadata.dimensions[0]/2),Math.floor(this.metadata.dimensions[1]/2),Math.floor(this.metadata.dimensions[2]/2)],this.setField(this.metadata.fields[this.fieldIndex]),this.pushMethod="pushToFrontAsBuffer",this.lookupTableManager.addFields(this.metadata.ranges);for(var n=0,o=0;3>o;++o){var a=this.metadata.dimensions[o];n=a>n?a:n}this.bgCanvas=new i(n,n),this.fgCanvas=null,this.dataSubscription=t.onDataChange(function(t,r){e.lastImageStack=t;var n=!0,i=function(){e.render()};for(var o in t){var a=t[o].image;a.addEventListener("load",i),n=n&&a.complete}n&&e.render()}),this.lutChangeSubscription=this.lookupTableManager.onChange(function(t,r){e.update()});var u=this;this.mouseListener={click:function(t,r){if(!t.activeArea)return!1;var e=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=u.metadata.dimensions,o=t.activeArea,a=(t.relative.x-o[0])/o[2],s=(t.relative.y-o[1])/o[3];if(t.modifier)return!1;a=0>a?0:a>1?1:a,s=0>s?0:s>1?1:s;var l=Math.floor(a*i[n[0]]),c=Math.floor(s*i[n[1]]);return e[n[0]]=l,e[n[1]]=c,u.setProbe(e[0],e[1],e[2]),!0},drag:function(t,r){if(!t.activeArea)return!1;var e=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=u.metadata.dimensions,o=t.activeArea,a=(t.relative.x-o[0])/o[2],s=(t.relative.y-o[1])/o[3];if(t.modifier)return!1;a=0>a?0:a>1?1:a,s=0>s?0:s>1?1:s;var l=Math.floor(a*i[n[0]]),c=Math.floor(s*i[n[1]]);return e[n[0]]=l,e[n[1]]=c,u.setProbe(e[0],e[1],e[2]),!0},zoom:function(t,r){var e=[u.probeXYZ[0],u.probeXYZ[1],u.probeXYZ[2]],n=f[u.renderMethod].idx,i=n[2];return t.modifier?!1:(e[i]+=t.deltaY<0?-1:1,e[i]<0?(e[i]=0,!0):e[i]>=u.metadata.dimensions[i]?(e[i]=u.metadata.dimensions[i]-1,!0):(u.setProbe(e[0],e[1],e[2]),!0))}}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(2),o=e(1),a="image-ready",u="ProbeImageBuilder.chart.data.ready",s="ProbeImageBuilder.probe.location.change",l="ProbeImageBuilder.crosshair.visibility.change",c="ProbeImageBuilder.render.change",f={XY:{idx:[0,1,2],hasChange:function(t,r,e,n){return t[2]!==n},updateProbeValue:function(t,r,e,n){var i=t.metadata.dimensions[0],o=r+e*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}},XZ:{idx:[0,2,1],hasChange:function(t,r,e,n){return t[1]!==e},updateProbeValue:function(t,r,e,n){var i=t.metadata.dimensions[0],o=r+n*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}},ZY:{idx:[2,1,0],hasChange:function(t,r,e,n){return t[0]!==r},updateProbeValue:function(t,r,e,n){var i=t.metadata.dimensions[2],o=n+e*i,a=t.scalars[t.getField()];a&&(t.probeValue=a[o])}}};o.mixInto(n),n.prototype.setPushMethodAsBuffer=function(){this.pushMethod="pushToFrontAsBuffer"},n.prototype.setPushMethodAsImage=function(){this.pushMethod="pushToFrontAsImage"},n.prototype.setProbeLineNotification=function(t){this.triggerProbeLines=t},n.prototype.getYOffset=function(t){return void 0===t&&(t=this.probeXYZ[2]),this.metadata.sprite_size-t%this.metadata.sprite_size-1},n.prototype.getImage=function(t,r){void 0===t&&(t=this.probeXYZ[2]);var e=this.metadata.slices.length-1,n=Math.floor(t/this.metadata.sprite_size);n=0>n?0:n>e?e:n;var i=this.lastImageStack[this.metadata.slices[n]],o=i.image;o?o.complete?r.call(o):o.addEventListener("load",r):(this.workImage.addEventListener("load",r),this.workImage.src=i.url)},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.setProbe=function(t,r,e){var n=f[this.renderMethod].hasChange,i=f[this.renderMethod].idx,o=[].concat(this.probeXYZ);if(Array.isArray(t)&&(e=t[2],r=t[1],t=t[0]),n(this.probeXYZ,t,r,e))this.probeXYZ=[t,r,e],this.render();else{this.probeXYZ=[t,r,e];var a=this.metadata.dimensions,u=this.metadata.spacing;f[this.renderMethod].updateProbeValue(this,t,r,e),this.pushToFront(a[i[0]],a[i[1]],u[i[0]],u[i[1]],this.probeXYZ[i[0]],this.probeXYZ[i[1]])}(o[0]!==t||o[1]!==r||o[2]!==e)&&this.emit(s,[t,r,e])},n.prototype.getProbe=function(){return this.probeXYZ},n.prototype.getFieldValueAtProbeLocation=function(){return this.probeValue},n.prototype.getProbeLine=function(t){for(var r={name:this.getField(),data:[]},e={xRange:[0,100],fields:[r]},n=-1,i=f[this.renderMethod].idx,o=0;2>o;o++)t===i[o]&&(n=o);if(-1!==n){var a=this.scalars[r.name],u=this.metadata.dimensions,s=u[i[0]],l=u[i[1]],c=0===n?1:s,h=0===n?this.probeXYZ[i[1]]*s:this.probeXYZ[i[0]],p=0===n?s:l;if(this.metadata.origin&&this.metadata.spacing&&(e.xRange[0]=this.metadata.origin[t],e.xRange[1]=this.metadata.origin[t]+this.metadata.spacing[t]*u[t]),a)for(var g=0;p>g;g++)r.data.push(a[h+g*c])}return e},n.prototype.render=function(){this.lastImageStack&&(this["render"+this.renderMethod](),f[this.renderMethod].updateProbeValue(this,this.probeXYZ[0],this.probeXYZ[1],this.probeXYZ[2]))},n.prototype.pushToFront=function(t,r,e,n,i,o){this[this.pushMethod](t,r,e,n,i,o),this.triggerProbeLines&&this.emit(u,{x:this.getProbeLine(0),y:this.getProbeLine(1),z:this.getProbeLine(2)})},n.prototype.pushToFrontAsImage=function(t,r,e,n,o,u){var s=Math.floor(t*e),l=Math.floor(r*n),c=null;this.fgCanvas?this.fgCanvas.size(s,l):this.fgCanvas=new i(s,l),c=this.fgCanvas.get2DContext(),c.drawImage(this.bgCanvas.el,0,0,t,r,0,0,s,l),c.beginPath(),c.moveTo(o*e,0),c.lineTo(o*e,l),c.moveTo(0,u*n),c.lineTo(s,u*n),c.strokeStyle="#ffffff",c.lineWidth=1,c.stroke();var f={url:this.fgCanvas.toDataURL(),type:this.renderMethod,builder:this};this.emit(a,f)},n.prototype.pushToFrontAsBuffer=function(t,r,e,n,i,o){var u=Math.floor(t*e),s=Math.floor(r*n),l={canvas:this.bgCanvas.el,imageData:this.bgCanvas.el.getContext("2d").getImageData(0,0,t,r),area:[0,0,t,r],outputSize:[u,s],type:this.renderMethod,builder:this};this.broadcastCrossHair&&(l.crosshair=[i,o]),this.emit(a,l)},n.prototype.renderXY=function(){var t=this,r=this.bgCanvas.get2DContext(),e=this.getYOffset(),n=this.probeXYZ,i=this.metadata.dimensions,o=this.metadata.spacing;this.getImage(this.probeXYZ[2],function(){var a=this;r.drawImage(a,0,i[1]*e,i[0],i[1],0,0,i[0],i[1]),t.extractNumericalValues(i[0],i[1]),t.applyLookupTable(i[0],i[1]),t.pushToFront(i[0],i[1],o[0],o[1],n[0],n[1])})},n.prototype.renderZY=function(){function t(){var u=r.getYOffset(o),s=this;e.drawImage(s,n[0],i[1]*u,1,i[1],o,0,1,i[1]),o--?r.getImage(o,t):(r.extractNumericalValues(i[2],i[1]),r.applyLookupTable(i[2],i[1]),r.pushToFront(i[2],i[1],a[2],a[1],n[2],n[1]))}var r=this,e=this.bgCanvas.get2DContext(),n=(this.getYOffset(),this.probeXYZ),i=this.metadata.dimensions,o=i[2],a=this.metadata.spacing;o--&&r.getImage(o,t)},n.prototype.renderXZ=function(){function t(){var u=r.getYOffset(a),s=this;e.drawImage(s,0,i[1]*u+n[1],i[0],1,0,a,i[0],1),a--?r.getImage(a,t):(r.extractNumericalValues(i[0],i[2]),r.applyLookupTable(i[0],i[2]),r.pushToFront(i[0],i[2],o[0],o[2],n[0],n[2]))}var r=this,e=this.bgCanvas.get2DContext(),n=(this.getYOffset(),this.probeXYZ),i=this.metadata.dimensions,o=this.metadata.spacing,a=i[2];a--&&r.getImage(a,t)},n.prototype.isCrossHairEnabled=function(){return this.broadcastCrossHair},n.prototype.setCrossHairEnable=function(t){this.broadcastCrossHair!==t&&(this.broadcastCrossHair=t,this.emit(l,t),this.setProbe(this.probeXYZ[0],this.probeXYZ[1],this.probeXYZ[2]))},n.prototype.extractNumericalValues=function(t,r){for(var e=this.bgCanvas.get2DContext(),n=this.getField(),i=e.getImageData(0,0,t,r),o=i.data,a=o.length,u=0,s=this.metadata.ranges[n],l=s[1]-s[0],c=0,f=new Float32Array(t*r);a>u;){var h=(o[u]+256*o[u+1]+65536*o[u+2])/16777216*l+s[0];f[c++]=h,u+=4}this.scalars[n]=f},n.prototype.applyLookupTable=function(t,r){var e=this.bgCanvas.get2DContext(),n=this.getField(),i=this.lookupTableManager.getLookupTable(n),o=e.getImageData(0,0,t,r),a=o.data,u=a.length,s=0,l=0,c=this.scalars[n];if(i){for(;u>s;){var f=i.getColor(c[l++]);a[s]=Math.floor(255*f[0]),a[s+1]=Math.floor(255*f[1]),a[s+2]=Math.floor(255*f[2]),s+=4}e.putImageData(o,0,0)}},n.prototype.setField=function(t){this.queryDataModel.setValue("field",t)},n.prototype.getField=function(){return this.queryDataModel.getValue("field")},n.prototype.getFields=function(){return this.metadata.fields},n.prototype.setRenderMethod=function(t){this.renderMethodMutable&&this.renderMethod!==t&&(this.renderMethod=t,this.render(),this.emit(c,t))},n.prototype.getRenderMethod=function(){return this.renderMethod},n.prototype.getRenderMethods=function(){return["XY","ZY","XZ"]},n.prototype.isRenderMethodMutable=function(){return this.renderMethodMutable},n.prototype.setRenderMethodImutable=function(){this.renderMethodMutable=!1},n.prototype.setRenderMethodMutable=function(){this.renderMethodMutable=!0},n.prototype.getListeners=function(){return this.mouseListener},n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.onProbeLineReady=function(t){return this.on(u,t)},n.prototype.onProbeChange=function(t){return this.on(s,t)},n.prototype.onRenderMethodChange=function(t){return this.on(c,t)},n.prototype.onCrosshairVisibilityChange=function(t){return this.on(l,t)},n.prototype.destroy=function(){this.off(),this.lutChangeSubscription.unsubscribe(),this.lutChangeSubscription=null,this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.queryDataModel=null,this.bgCanvas.destroy(),this.bgCanvas=null,this.workImage=null},n.prototype.getControlWidgets=function(){return["LookupTableWidget","ProbeControl","QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getLookupTable=function(){return this.lookupTableManager.getLookupTable(this.getField())},n.prototype.getLookupTableManager=function(){return this.lookupTableManager},t.exports=r["default"]},function(t,r,e){"use strict";function n(){var t=arguments.length<=0||void 0===arguments[0]?"a-b":arguments[0],r=arguments.length<=1||void 0===arguments[1]?["a","b"]:arguments[1];this.data={},this.dataSize=[200,200],this.operation=t,this.dependency=r,this.bgCanvas=new i(this.dataSize[0],this.dataSize[1])}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(2),o=e(1),a="image-ready";o.mixInto(n),n.prototype.setOperation=function(t){this.operation=t,this.processData()},n.prototype.getOperation=function(){return this.operation},n.prototype.setDependencies=function(t){this.dependency=t},n.prototype.updateOperationFunction=function(){var t=[];for(var r in this.data)t.push("var X = data.X[i];".replace(/X/g,r));t.push("return X;".replace(/X/g,this.operation)),this.fnOperation=new Function("data","i",t.join(""))},n.prototype.updateData=function(t,r){var e=this,n=r.area,i=r.canvas,o=n[0],a=n[1],u=n[2],s=n[3],l=this.bgCanvas.get2DContext(),c=new Uint8ClampedArray(u*s*4),f=null;this.bgCanvas.size(u,s),l.drawImage(i,o,a,u,s,0,0,u,s),f=l.getImageData(0,0,u,s),c.set(f.data),this.data[t]=c,this.dataSize=[u,s];var h=!0;this.dependency.forEach(function(t){e.data[t]||(h=!1)}),h&&this.processData()},n.prototype.processData=function(){this.updateOperationFunction();var t=-1,r=!0;for(var e in this.data){var n=this.data[e];-1===t?t=n.length:r=r&&t===n.length}if(!r)return void console.log("The array size are invalid!!!");for(var i=0,o=new Uint8ClampedArray(t);t>i;)o[i]=this.fnOperation(this.data,i),o[i+1]=this.fnOperation(this.data,i+1),o[i+2]=this.fnOperation(this.data,i+2),o[i+3]=255,i+=4;this.bgCanvas.size(this.dataSize[0],this.dataSize[1]);var u=this.bgCanvas.get2DContext(),s=u.getImageData(0,0,this.dataSize[0],this.dataSize[1]);s.data.set(o),u.putImageData(s,0,0);var l={canvas:this.bgCanvas.el,area:[0,0].concat(this.dataSize),outputSize:this.dataSize,builder:this};this.emit(a,l)},n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.destroy=function(){this.bgCanvas.destroy()},n.prototype.getListeners=function(){return{}},n.prototype.getControlWidgets=function(){return["PixelOperatorControl"]},t.exports=r["default"]},function(t,r,e){"use strict";function n(t){var r=this;this.queryDataModel=t,this.lastQueryImage=null,this.onLoadCallback=function(){r.lastQueryImage.removeEventListener("load",r.onLoadCallback),r.render()},this.dataSubscription=t.onDataChange(function(t,e){r.lastQueryImage&&r.lastQueryImage.removeEventListener("load",r.onLoadCallback),r.lastQueryImage=t.image.image,r.render()})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(1),o="image-ready";i.mixInto(n),n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.render=function(){if(!this.lastQueryImage)return void this.queryDataModel.fetchData();if(this.lastQueryImage.complete){var t=this.lastQueryImage.width,r=this.lastQueryImage.height;this.emit(o,{canvas:this.lastQueryImage,area:[0,0,t,r],outputSize:[t,r],builder:this})}else this.lastQueryImage.addEventListener("load",this.onLoadCallback)},n.prototype.onImageReady=function(t){return this.on(o,t)},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.destroy=function(){this.off(),this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.queryDataModel=null},n.prototype.getControlWidgets=function(){return["QueryDataModelWidget"]},n.prototype.getQueryDataModel=function(){return this.queryDataModel},t.exports=r["default"]},function(t,r,e){"use strict";function n(t,r){for(var e in o)if(i(t,e))return new o[e](r);return console.error("No compositor found for type",t),null}Object.defineProperty(r,"__esModule",{value:!0}),r.createCompositor=n;var i=e(51),o={rgbd:e(28),"sxyz-light":e(29),"raw-rgbd":e(27)}},function(t,r,e){"use strict";function n(t,r,e){var n=this;this.queryDataModel=t,this.pipelineModel=r,this.lookupTableManager=e,this.compositePipeline=t.originalData.CompositePipeline,this.query=null,this.compositor=o.createCompositor(t.originalData.type,{queryDataModel:t,lookupTableManager:e,imageBuilder:this}),this.controlWidgets=this.compositor.WIDGETS||["CompositeControl","QueryDataModelWidget"],this.setPipelineQuery(this.pipelineModel.getPipelineQuery()),this.pipelineSubscription=this.pipelineModel.onChange(function(t,r){n.setPipelineQuery(t)})}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(1),o=e(25),a="image-ready";i.mixInto(n),n.prototype.setPipelineQuery=function(t){this.query!==t&&(this.query=t,this.compositor.updateQuery(t),this.render())},n.prototype.update=function(){this.queryDataModel.fetchData()},n.prototype.render=function(){this.query&&this.compositor.render()},n.prototype.destroy=function(){this.pipelineSubscription.unsubscribe(),this.pipelineSubscription=null,this.compositor.destroy(),this.compositor=null},n.prototype.IMAGE_READY_TOPIC=a,n.prototype.onImageReady=function(t){return this.on(a,t)},n.prototype.getListeners=function(){return this.queryDataModel.getTonicMouseListener()},n.prototype.setLightProperties=function(t){this.compositor.setLightProperties(t)},n.prototype.getControlWidgets=function(){return this.controlWidgets},n.prototype.getQueryDataModel=function(){return this.queryDataModel},n.prototype.getPipelineModel=function(){return this.pipelineModel},n.prototype.getLookupTableManager=function(){return this.lookupTableManager},n.prototype.getLightProperties=function(){return this.compositor.getLightProperties()},t.exports=r["default"]},function(t,r,e){"use strict";function n(t){var r=this,n=t.queryDataModel,u=t.imageBuilder;return this.queryDataModel=n,this.imageBuilder=u,this.rgbdData=null,this.offsetList=[],this.spriteSize=a(this.queryDataModel.originalData.CompositePipeline.offset),this.dataSubscription=n.onDataChange(function(t,e){r.rgbdData=t.rgbdSprite.data,r.render()}),this.width=this.queryDataModel.originalData.CompositePipeline.dimensions[0],this.height=this.queryDataModel.originalData.CompositePipeline.dimensions[1],this.glCanvas=new i(this.width,this.height),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:e(3),fragmentShader:e(9),mapping:"default"},compositeProgram:{vertexShader:e(3),fragmentShader:e(17),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"texture2D",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"ping",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"pong",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=o.createGLResources(this.gl,this.glConfig),void(this.pingPong=new o.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(2),o=e(4),a=e(5);n.prototype.extractLayerData=function(t,r){var e=0,n=r,i=4*(n*this.width+e),o=this.width*this.height*4;return new Uint8Array(t,i,o)},n.prototype.updateQuery=function(t){var r=this.queryDataModel.originalData.CompositePipeline.layers,e=r.length,n=this.queryDataModel.originalData.CompositePipeline.offset;this.offsetList=[];for(var i=0;e>i;i++){var o=t[2*i+1];"_"!==o&&this.offsetList.push(this.spriteSize-n[r[i]+o])}},n.prototype.render=function(){var t=this;if(!this.rgbdData)return null;this.pingPong.clearFbo(),this.offsetList.forEach(function(r){t.drawCompositePass(t.extractLayerData(t.rgbdData,r*t.height))}),this.drawDisplayPass();var r={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,r)},n.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},n.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish()},n.prototype.drawCompositePass=function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeProgram),this.gl.viewport(0,0,this.width,this.height);var r=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"layerSampler");this.gl.uniform1i(r,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.texture2D),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.width,this.height,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,t);var e=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"compositeSampler");this.gl.uniform1i(e,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap()},t.exports=r["default"]},function(t,r,e){"use strict";function n(t){var r=this,n=t.queryDataModel,u=t.imageBuilder;return this.queryDataModel=n,this.imageBuilder=u,this.rgbdSprite=null,this.offsetList=[],this.spriteSize=a(this.queryDataModel.originalData.CompositePipeline.offset),this.removeLoadCallback=!1,this.closureRenderMethod=function(){r.render()},this.dataSubscription=n.onDataChange(function(t,e){r.rgbdSprite=t.rgbdSprite.image,r.rgbdSprite.complete?r.render():(r.removeLoadCallback=!0,r.rgbdSprite.addEventListener("load",r.closureRenderMethod))}),this.width=this.queryDataModel.originalData.CompositePipeline.dimensions[0],this.height=this.queryDataModel.originalData.CompositePipeline.dimensions[1],this.glCanvas=new i(this.width,this.height),this.compositeCanvas=new i(this.width,this.height),this.compositeCtx=this.compositeCanvas.get2DContext(),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:e(3),fragmentShader:e(9),mapping:"default"},compositeProgram:{vertexShader:e(3),fragmentShader:e(17),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"texture2D",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],
texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"ping",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]},{id:"pong",pixelStore:[["UNPACK_FLIP_Y_WEBGL",!0]],texParameter:[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]]}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=o.createGLResources(this.gl,this.glConfig),void(this.pingPong=new o.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(2),o=e(4),a=e(5);n.prototype.updateQuery=function(t){var r=this.queryDataModel.originalData.CompositePipeline.layers,e=r.length,n=this.queryDataModel.originalData.CompositePipeline.offset;this.offsetList=[];for(var i=0;e>i;i++){var o=t[2*i+1];"_"!==o&&this.offsetList.push(this.spriteSize-n[r[i]+o])}},n.prototype.render=function(){var t=this;if(!this.rgbdSprite||!this.rgbdSprite.complete)return null;this.removeLoadCallback&&(this.rgbdSprite.removeEventListener("load",this.closureRenderMethod),this.removeLoadCallback=!1),this.pingPong.clearFbo(),this.offsetList.forEach(function(r){var e=r*t.height;t.compositeCtx.clearRect(0,0,t.width,t.height),t.compositeCtx.drawImage(t.rgbdSprite,0,e,t.width,t.height,0,0,t.width,t.height),t.drawCompositePass()}),this.drawDisplayPass();var r={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,r)},n.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},n.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish()},n.prototype.drawCompositePass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeProgram),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"layerSampler");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.texture2D),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.compositeCanvas.el);var r=this.gl.getUniformLocation(this.glResources.programs.compositeProgram,"compositeSampler");this.gl.uniform1i(r,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap()},t.exports=r["default"]},function(t,r,e){"use strict";function n(t,r){var e=parseFloat(t),n=parseFloat(r),i=(180-e)*Math.PI/180,o=(180-n)*Math.PI/180;return[Math.sin(o)*Math.cos(i),Math.sin(o)*Math.sin(i),Math.cos(o)]}function i(t,r){var e=n(t.getValue("phi"),t.getValue("theta")),i=s.fromValues(e[0],e[1],e[2]),o=s.fromValues(0,0,0),a=s.fromValues(0,0,1),u=s.create();s.add(u,a,i),s.normalize(u,u);var l=s.create();s.subtract(l,o,i);var c=s.create();s.subtract(c,u,i);var f=s.create();s.cross(f,l,c),s.normalize(f,f),s.subtract(l,f,i),s.subtract(c,o,i);var h=s.create();s.cross(h,l,c),s.normalize(h,h);var p=s.create();s.scale(p,f,r.x);var g=s.create();s.scale(g,h,r.y);var d=s.create();s.scale(d,i,.3);var v=s.create();return s.add(v,d,p),s.add(v,v,g),s.normalize(v,v),{lightDir:v,viewDir:i}}function o(t){var r=this,n=t.queryDataModel,i=t.imageBuilder,o=t.lookupTableManager;this.queryDataModel=n,this.compositePipeline=this.queryDataModel.originalData.CompositePipeline,this.width=this.compositePipeline.dimensions[0],this.height=this.compositePipeline.dimensions[1],this.spriteSize=u(this.compositePipeline.offset),this.offsetList=[],this.sxyzSprite=null,this.removeLoadCallback=!1,this.closureRenderMethod=function(){r.render()},this.dataSubscription=n.onDataChange(function(t,e){r.sxyzSprite=t.sxyzSprite.image,r.sxyzSprite.complete?r.render():(r.removeLoadCallback=!0,r.sxyzSprite.addEventListener("load",r.closureRenderMethod))}),this.imageBuilder=i,this.lookupTableManager=o,this.lookupTableManager.addFields(this.compositePipeline.ranges),this.numLutSamples=1024,this.lutMap={};for(var s in this.compositePipeline.ranges)this.lutMap[s]=new Uint8Array(4*this.numLutSamples),this.resampleLookupTable(s);return this.lookupTableManager.onChange(function(t,e){"__internal"!==t.lut.name&&r.resampleLookupTable(t.lut.name)}),this.bgColor=[1,1,1],this.lightingTextureNames=["nx","ny","nz","scalars"],this.lightingTextures={},this.lightProperties={lightTerms:{ka:.1,kd:.6,ks:.3,alpha:20},lightPosition:{x:-1,y:1},lightColor:[.8,.8,.8]},this.glCanvas=new a(this.width,this.height),this.compositeCanvas=new a(this.width,this.height),this.compositeCtx=this.compositeCanvas.get2DContext(),this.scalarCanvas=new a(this.width,this.height),this.scalarCtx=this.scalarCanvas.get2DContext(),this.nxCanvas=new a(this.width,this.height),this.nxCtx=this.nxCanvas.get2DContext(),this.nyCanvas=new a(this.width,this.height),this.nyCtx=this.nyCanvas.get2DContext(),this.nzCanvas=new a(this.width,this.height),this.nzCtx=this.nzCanvas.get2DContext(),this.gl=this.glCanvas.get3DContext(),this.gl?(this.gl.clearColor(1,1,1,0),this.glConfig={programs:{displayProgram:{vertexShader:e(3),fragmentShader:e(9),mapping:"default"},compositeLightProgram:{vertexShader:e(3),fragmentShader:e(61),mapping:"default"},backgroundProgram:{vertexShader:e(3),fragmentShader:e(60),mapping:"default"}},resources:{buffers:[{id:"texCoord",data:new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1])},{id:"posCoord",data:new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1])}],textures:[{id:"scalars",pixelStore:p,texParameter:h},{id:"nx",pixelStore:p,texParameter:h},{id:"ny",pixelStore:p,texParameter:h},{id:"nz",pixelStore:p,texParameter:h},{id:"lutTexture",pixelStore:p,texParameter:h},{id:"ping",pixelStore:p,texParameter:h},{id:"pong",pixelStore:p,texParameter:h}],framebuffers:[{id:"ping",width:this.width,height:this.height},{id:"pong",width:this.width,height:this.height}]},mappings:{"default":[{id:"posCoord",name:"positionLocation",attribute:"a_position",format:[2,this.gl.FLOAT,!1,0,0]},{id:"texCoord",name:"texCoordLocation",attribute:"a_texCoord",format:[2,this.gl.FLOAT,!1,0,0]}]}},this.glResources=c.createGLResources(this.gl,this.glConfig),void(this.pingPong=new c.PingPong(this.gl,[this.glResources.framebuffers.ping,this.glResources.framebuffers.pong],[this.glResources.textures.ping,this.glResources.textures.pong]))):(console.error("Unable to get WebGl context"),null)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=o;var a=e(2),u=e(5),s=e(19),l=e(20),c=e(4),f=e(58),h=[["TEXTURE_MAG_FILTER","NEAREST"],["TEXTURE_MIN_FILTER","NEAREST"],["TEXTURE_WRAP_S","CLAMP_TO_EDGE"],["TEXTURE_WRAP_T","CLAMP_TO_EDGE"]],p=[["UNPACK_FLIP_Y_WEBGL",!0]];o.prototype.WIDGETS=["LookupTableManagerWidget","LightPropertiesWidget","CompositeControl","QueryDataModelWidget"],o.prototype.getLightProperties=function(){return this.lightProperties},o.prototype.setLightProperties=function(t){this.lightProperties=f(this.lightProperties,t),this.render()},o.prototype.resampleLookupTable=function(t){for(var r=this.lookupTableManager.getLookupTable(t),e=this.compositePipeline.ranges[t],n=(e[1]-e[0])/this.numLutSamples,i=this.lutMap[t],o=0;o<this.numLutSamples;++o){var a=e[0]+o*n,u=4*o,s=r.getColor(a);i[u]=Math.round(255*s[0]),i[u+1]=Math.round(255*s[1]),i[u+2]=Math.round(255*s[2]),i[u+3]=1}this.render()},o.prototype.updateQuery=function(t){var r=this.compositePipeline.layers,e=r.length,n=this.compositePipeline.offset,i=this.compositePipeline.color_by_dependencies;this.offsetList=[];for(var o=0;e>o;o++){var a=t[2*o+1];if("_"!==a&&i[a]){var u=i[a];if(u.normal){var s=u.normal[0],l=u.normal[1],c=u.normal[2];this.offsetList.push({fieldName:this.compositePipeline.fields[a],scalar:this.spriteSize-n[r[o]+a],nx:this.spriteSize-n[r[o]+s],ny:this.spriteSize-n[r[o]+l],nz:this.spriteSize-n[r[o]+c]})}}}},o.prototype.render=function(){if(!this.sxyzSprite||!this.sxyzSprite.complete)return void console.log("Not enough data to render");this.removeLoadCallback&&(this.sxyzSprite.removeEventListener("load",this.closureRenderMethod),this.removeLoadCallback=!1),this.pingPong.clearFbo();var t=i(this.queryDataModel,this.lightProperties.lightPosition),r=t.lightDir,e=t.viewDir,n=0,o=0,a=this.width,u=this.height;this.compositeCtx.clearRect(0,0,a,u),this.compositeCtx.drawImage(this.sxyzSprite,0,this.spriteSize*u,a,u,0,0,a,u),this.drawBackgroundPass(this.bgColor);for(var s=0,l=this.offsetList.length;l>s;s+=1){var c=this.offsetList[s],f=c.fieldName;o=0,o=c.nx*u,this.nxCtx.clearRect(0,0,a,u),this.nxCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.ny*u,this.nyCtx.clearRect(0,0,a,u),this.nyCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.nz*u,this.nzCtx.clearRect(0,0,a,u),this.nzCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),o=c.scalar*u,this.scalarCtx.clearRect(0,0,a,u),this.scalarCtx.drawImage(this.sxyzSprite,n,o,a,u,0,0,a,u),this.drawLitCompositePass(e,r,this.lightProperties,this.lutMap[f])}this.drawDisplayPass();var h={canvas:this.glCanvas.el,area:[0,0,this.width,this.height],outputSize:[this.width,this.height],builder:this.imageBuilder};this.imageBuilder.emit(this.imageBuilder.IMAGE_READY_TOPIC,h)},o.prototype.destroy=function(){this.dataSubscription.unsubscribe(),this.dataSubscription=null,this.glResources.destroy(),this.glResources=null,this.pingPong=null},o.prototype.drawDisplayPass=function(){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,null),this.gl.useProgram(this.glResources.programs.displayProgram),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.viewport(0,0,this.width,this.height);var t=this.gl.getUniformLocation(this.glResources.programs.displayProgram,"u_image");this.gl.uniform1i(t,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},o.prototype.drawBackgroundPass=function(t){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.backgroundProgram),this.gl.viewport(0,0,this.width,this.height);var r=l.fromValues(t[0],t[1],t[2],1),e=this.gl.getUniformLocation(this.glResources.programs.backgroundProgram,"backgroundColor");this.gl.uniform4fv(e,r);var n=this.gl.getUniformLocation(this.glResources.programs.backgroundProgram,"backgroundSampler");this.gl.uniform1i(n,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture()),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.compositeCanvas.el),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap(),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},o.prototype.drawLitCompositePass=function(t,r,e,n){var i=e.lightTerms,o=e.lightColor;this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pingPong.getFramebuffer()),this.gl.useProgram(this.glResources.programs.compositeLightProgram),this.gl.viewport(0,0,this.width,this.height);var a=l.fromValues(t[0],t[1],t[2],0),u=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"viewDir");this.gl.uniform4fv(u,a);var s=l.fromValues(r[0],r[1],r[2],0),c=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightDir");this.gl.uniform4fv(c,s);var f=l.fromValues(i.ka,i.kd,i.ks,i.alpha),h=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightTerms");this.gl.uniform4fv(h,f);var p=l.fromValues(o[0],o[1],o[2],1),g=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lightColor");this.gl.uniform4fv(g,p);var d=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"scalarSampler");this.gl.uniform1i(d,0),this.gl.activeTexture(this.gl.TEXTURE0+0),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.scalars),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.scalarCanvas.el);var v=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nxSampler");this.gl.uniform1i(v,1),this.gl.activeTexture(this.gl.TEXTURE0+1),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.nx),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nxCanvas.el);var b=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nySampler");this.gl.uniform1i(b,2),this.gl.activeTexture(this.gl.TEXTURE0+2),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.ny),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nyCanvas.el);var m=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"nzSampler");this.gl.uniform1i(m,3),this.gl.activeTexture(this.gl.TEXTURE0+3),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.nz),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.nzCanvas.el);var y=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"compositeSampler");this.gl.uniform1i(y,4),this.gl.activeTexture(this.gl.TEXTURE0+4),this.gl.bindTexture(this.gl.TEXTURE_2D,this.pingPong.getRenderingTexture());var _=this.gl.getUniformLocation(this.glResources.programs.compositeLightProgram,"lutSampler");this.gl.uniform1i(_,5),this.gl.activeTexture(this.gl.TEXTURE0+5),this.gl.bindTexture(this.gl.TEXTURE_2D,this.glResources.textures.lutTexture),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.numLutSamples,1,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,n),this.gl.drawArrays(this.gl.TRIANGLES,0,6),this.gl.finish(),this.pingPong.swap();for(var x=0;6>x;x+=1)this.gl.activeTexture(this.gl.TEXTURE0+x),this.gl.bindTexture(this.gl.TEXTURE_2D,null)},t.exports=r["default"]},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(21),i=e(22),o=e(23),a=e(24),u=e(26);r.Composite=n,r.DataProber=i,r.PixelOperator=o,r.QueryDataModel=a,r.WebGlComposite=u},function(t,r,e){"use strict";function n(){var t=this;this.luts={},this.lutSubscriptions={},this.onChangeCallback=function(r,e){t.emit(a,r)}}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(11),o=(e(6),e(1)),a="LookupTable.change",u="LookupTable.list.change";o.mixInto(n),n.prototype.addLookupTable=function(t,r,e){var n=this.luts[t];return void 0===n&&(n=new i(t),this.luts[t]=n,this.lutSubscriptions[t]=n.onChange(this.onChangeCallback)),n.setPreset(e||"spectralflip"),n.setScalarRange(r[0],r[1]),this.emit(u,this),n},n.prototype.removeLookupTable=function(t){this.luts.hasOwn(t)&&(this.lutSubscriptions[t].unsubscribe(),this.luts[t].destroy(),delete this.luts[t],delete this.lutSubscriptions[t],this.emit(u,this))},n.prototype.getLookupTable=function(t){return this.luts[t]},n.prototype.addFields=function(t){for(var r in t)this.addLookupTable(r,t[r])},n.prototype.onChange=function(t){return this.on(a,t)},n.prototype.onFieldsChange=function(t){return this.on(u,t)},t.exports=r["default"]},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(11),i=e(31),o=e(12);r.LookupTable=n,r.LookupTableManager=i,r.Presets=o},function(t,r,e){"use strict";function n(t){var r=this;this.originalData=t,this.visibilityState={},this.activeState={},this.editMode={},this.activeColors={},this.noTrigger=!0,t.CompositePipeline.pipeline.forEach(function(t){r.setLayerVisible(t.ids.join(""),!0)}),t.CompositePipeline.layers.forEach(function(e){r.activeState[e]=!0,r.activeColors[e]=t.CompositePipeline.layer_fields[e][0]}),this.noTrigger=!1,this.triggerChange()}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var i=e(1),o="pipeline.change";i.mixInto(n),n.prototype.onChange=function(t){return this.on(o,t)},n.prototype.TopicChange=function(){return o},n.prototype.triggerChange=function(){if(!this.noTrigger){var t=this.getPipelineQuery();this.emit(o,t)}},n.prototype.isLayerActive=function(t){return this.activeState[t]},n.prototype.setLayerActive=function(t,r){this.activeState[t]!==r&&(this.activeState[t]=r,this.triggerChange())},n.prototype.toggleLayerActive=function(t){this.activeState[t]=!this.activeState[t],this.triggerChange()},n.prototype.isLayerVisible=function(t){return this.visibilityState[t]},n.prototype.setLayerVisible=function(t,r){if(this.visibilityState[t]!==r){this.visibilityState[t]=r;for(var e=t.length;e--;)this.visibilityState[t[e]]=r;this.triggerChange()}},n.prototype.toggleLayerVisible=function(t){this.setLayerVisible(t,!this.visibilityState[t])},n.prototype.toggleEditMode=function(t){this.editMode[t]=!this.editMode[t],this.triggerChange()},n.prototype.isLayerInEditMode=function(t){for(var r in this.editMode)if(this.editMode[r]&&-1!==r.indexOf(t))return!0;return!1},n.prototype.getColor=function(t){return this.originalData.CompositePipeline.layer_fields[t[0]]},n.prototype.getColorToLabel=function(t){return this.originalData.CompositePipeline.fields[t]},n.prototype.isActiveColor=function(t,r){return this.activeColors[t[0]]===r},n.prototype.setActiveColor=function(t,r){for(var e=t.length;e--;)this.activeColors[t[e]]=r;this.triggerChange()},n.prototype.getPipelineQuery=function(){var t=this,r="";return this.originalData.CompositePipeline.layers.forEach(function(e){var n=t.isLayerActive(e)&&t.isLayerVisible(e)?t.activeColors[e]:"_";r+=e,r+=n}),r},n.prototype.getPipelineDescription=function(){return this.originalData.CompositePipeline.pipeline},t.exports=r["default"]},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(32),i=e(33);r.LookupTable=n,r.PipelineState=i},function(t,r,e){"use strict";function n(t){var r=arguments.length<=1||void 0===arguments[1]?"#0000FF":arguments[1],e=arguments.length<=2||void 0===arguments[2]?["#e1002a","#417dc0","#1d9a57","#e9bc2f","#9b3880"]:arguments[2];this.data=null,this.colors=e,this.markerColor=r,this.markerLocation=-1,this.showMarker=!0,this.title=t}function i(t,r,e,n){function i(t){return s+c-Math.floor((f[t]-o)*v)}for(var o=Number.MAX_VALUE,a=Number.MIN_VALUE,u=r.x,s=r.y,l=r.width,c=r.height,f=e.data,h=f.length,p=h,g=new Uint16Array(p);p--;){var d=f[p];o=Math.min(o,d),a=Math.max(a,d),g[p]=u+Math.floor(l*(p/(h-1)))}n&&(o=n[0],a=n[1]);var v=c/(a-o);t.beginPath(),t.lineWidth=1,t.strokeStyle=e.color,t.moveTo(g[0],i(0));for(var b=1;h>b;b++)t.lineTo(g[b],i(b));t.stroke()}function o(t,r,e,n){if(!(0>e||e>1)){var i=r.y,o=i+r.height,a=r.x+Math.floor(e*r.width);t.beginPath(),t.lineWidth=1,t.strokeStyle=n,t.moveTo(a,i),t.lineTo(a,o),t.stroke()}}function a(t,r,e,n,i){var o=arguments.length<=5||void 0===arguments[5]?"#000000":arguments[5];t.fillStyle=o,t.font="20px serif",t.textBaseline="top",t.fillText(i,r.x+e,r.y+n)}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=n;var u=e(1),s="painter-ready";u.mixInto(n),n.prototype.updateData=function(t){var r=this;this.data=t;var e=0;t.fields.forEach(function(t){t.color||(t.color=r.colors[e++%r.colors.length])}),this.emit(s,this)},n.prototype.setTitle=function(t){this.title=t,this.emit(s,this)},n.prototype.setMarkerLocation=function(t){this.markerLocation=t,this.emit(s,this)},n.prototype.enableMarker=function(t){this.showMarker!==t&&(this.showMarker=t,this.emit(s,this))},n.prototype.isReady=function(){return null!==this.data},n.prototype.paint=function(t,r){if(this.data&&(t.clearRect(r.x-1,r.y-1,r.width+2,r.height+2),this.data.fields.forEach(function(e){i(t,r,e)}),this.showMarker&&o(t,r,this.markerLocation,this.markerColor),this.title)){var e=((this.data.xRange[1]-this.data.xRange[0])*this.markerLocation+this.data.xRange[0]).toFixed(5);a(t,r,10,10,this.title.replace(/{x}/g,e))}},n.prototype.onPainterReady=function(t){return this.on(s,t)},n.prototype.getControlWidgets=function(){return[]},t.exports=r["default"]},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(35);r.LineChart=n},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(2),i=e(4);r.CanvasOffscreenBuffer=n,r.WebGl=i},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=e(30),i=e(34),o=e(36),a=e(37);r.builder=n,r.model=i,r.painter=o,r.util=a},function(t,r,e){var n;(function(t,i){(function(){function o(t,r){if(t!==r){var e=null===t,n=t===P,i=t===t,o=null===r,a=r===P,u=r===r;if(t>r&&!o||!i||e&&!a&&u||n&&u)return 1;if(r>t&&!e||!u||o&&!n&&i||a&&i)return-1}return 0}function a(t,r,e){for(var n=t.length,i=e?n:-1;e?i--:++i<n;)if(r(t[i],i,t))return i;return-1}function u(t,r,e){if(r!==r)return m(t,e);for(var n=e-1,i=t.length;++n<i;)if(t[n]===r)return n;return-1}function s(t){return"function"==typeof t||!1}function l(t){return null==t?"":t+""}function c(t,r){for(var e=-1,n=t.length;++e<n&&r.indexOf(t.charAt(e))>-1;);return e}function f(t,r){for(var e=t.length;e--&&r.indexOf(t.charAt(e))>-1;);return e}function h(t,r){return o(t.criteria,r.criteria)||t.index-r.index}function p(t,r,e){for(var n=-1,i=t.criteria,a=r.criteria,u=i.length,s=e.length;++n<u;){var l=o(i[n],a[n]);if(l){if(n>=s)return l;var c=e[n];return l*("asc"===c||c===!0?1:-1)}}return t.index-r.index}function g(t){return Wt[t]}function d(t){return Vt[t]}function v(t,r,e){return r?t=$t[t]:e&&(t=Kt[t]),"\\"+t}function b(t){return"\\"+Kt[t]}function m(t,r,e){for(var n=t.length,i=r+(e?0:-1);e?i--:++i<n;){var o=t[i];if(o!==o)return i}return-1}function y(t){return!!t&&"object"==typeof t}function _(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function x(t,r){for(var e=-1,n=t.length,i=-1,o=[];++e<n;)t[e]===r&&(t[e]=W,o[++i]=e);return o}function C(t,r){for(var e,n=-1,i=t.length,o=-1,a=[];++n<i;){var u=t[n],s=r?r(u,n,t):u;n&&e===s||(e=s,a[++o]=u)}return a}function T(t){for(var r=-1,e=t.length;++r<e&&_(t.charCodeAt(r)););return r}function w(t){for(var r=t.length;r--&&_(t.charCodeAt(r)););return r}function E(t){return Zt[t]}function R(t){function r(t){if(y(t)&&!Au(t)&&!(t instanceof i)){if(t instanceof n)return t;if(ra.call(t,"__chain__")&&ra.call(t,"__wrapped__"))return pn(t)}return new n(t)}function e(){}function n(t,r,e){this.__wrapped__=t,this.__actions__=e||[],this.__chain__=!!r}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ma,this.__views__=[]}function _(){var t=new i(this.__wrapped__);return t.__actions__=tr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=tr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=tr(this.__views__),t}function J(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function nt(){var t=this.__wrapped__.value(),r=this.__dir__,e=Au(t),n=0>r,i=e?t.length:0,o=Ge(0,i,this.__views__),a=o.start,u=o.end,s=u-a,l=n?u:a-1,c=this.__iteratees__,f=c.length,h=0,p=Ta(s,this.__takeCount__);if(!e||z>i||i==s&&p==s)return ee(n&&e?t.reverse():t,this.__actions__);var g=[];t:for(;s--&&p>h;){l+=r;for(var d=-1,v=t[l];++d<f;){var b=c[d],m=b.iteratee,y=b.type,_=m(v);if(y==q)v=_;else if(!_){if(y==Y)continue t;break t}}g[h++]=v}return g}function ot(){this.__data__={}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Vt(t){return"__proto__"==t?P:this.__data__[t]}function Zt(t){return"__proto__"!=t&&ra.call(this.__data__,t)}function Qt(t,r){return"__proto__"!=t&&(this.__data__[t]=r),this}function $t(t){var r=t?t.length:0;for(this.data={hash:ba(null),set:new fa};r--;)this.push(t[r])}function Kt(t,r){var e=t.data,n="string"==typeof r||ki(r)?e.set.has(r):e.hash[r];return n?0:-1}function Ht(t){var r=this.data;"string"==typeof t||ki(t)?r.set.add(t):r.hash[t]=!0}function Jt(t,r){for(var e=-1,n=t.length,i=-1,o=r.length,a=Bo(n+o);++e<n;)a[e]=t[e];for(;++i<o;)a[e++]=r[i];return a}function tr(t,r){var e=-1,n=t.length;for(r||(r=Bo(n));++e<n;)r[e]=t[e];return r}function rr(t,r){for(var e=-1,n=t.length;++e<n&&r(t[e],e,t)!==!1;);return t}function er(t,r){for(var e=t.length;e--&&r(t[e],e,t)!==!1;);return t}function or(t,r){for(var e=-1,n=t.length;++e<n;)if(!r(t[e],e,t))return!1;return!0}function ar(t,r,e,n){for(var i=-1,o=t.length,a=n,u=a;++i<o;){var s=t[i],l=+r(s);e(l,a)&&(a=l,u=s)}return u}function ur(t,r){for(var e=-1,n=t.length,i=-1,o=[];++e<n;){var a=t[e];r(a,e,t)&&(o[++i]=a)}return o}function sr(t,r){for(var e=-1,n=t.length,i=Bo(n);++e<n;)i[e]=r(t[e],e,t);return i}function lr(t,r){for(var e=-1,n=r.length,i=t.length;++e<n;)t[i+e]=r[e];return t}function cr(t,r,e,n){var i=-1,o=t.length;for(n&&o&&(e=t[++i]);++i<o;)e=r(e,t[i],i,t);return e}function fr(t,r,e,n){var i=t.length;for(n&&i&&(e=t[--i]);i--;)e=r(e,t[i],i,t);return e}function hr(t,r){for(var e=-1,n=t.length;++e<n;)if(r(t[e],e,t))return!0;return!1}function pr(t,r){for(var e=t.length,n=0;e--;)n+=+r(t[e])||0;return n}function gr(t,r){return t===P?r:t}function dr(t,r,e,n){return t!==P&&ra.call(n,e)?t:r}function vr(t,r,e){for(var n=-1,i=Xu(r),o=i.length;++n<o;){var a=i[n],u=t[a],s=e(u,r[a],a,t,r);(s===s?s===u:u!==u)&&(u!==P||a in t)||(t[a]=s)}return t}function br(t,r){return null==r?t:yr(r,Xu(r),t)}function mr(t,r){for(var e=-1,n=null==t,i=!n&&$e(t),o=i?t.length:0,a=r.length,u=Bo(a);++e<a;){var s=r[e];i?u[e]=Ke(s,o)?t[s]:P:u[e]=n?P:t[s]}return u}function yr(t,r,e){e||(e={});for(var n=-1,i=r.length;++n<i;){var o=r[n];e[o]=t[o]}return e}function _r(t,r,e){var n=typeof t;return"function"==n?r===P?t:oe(t,r,e):null==t?Mo:"object"==n?Nr(t):r===P?ko(t):Xr(t,r)}function xr(t,r,e,n,i,o,a){var u;if(e&&(u=i?e(t,n,i):e(t)),u!==P)return u;if(!ki(t))return t;var s=Au(t);if(s){if(u=We(t),!r)return tr(t,u)}else{var l=na.call(t),c=l==H;if(l!=rt&&l!=V&&(!c||i))return Gt[l]?Ze(t,l,r):i?t:{};if(u=Ve(c?{}:t),!r)return br(u,t)}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==t)return a[f];return o.push(t),a.push(u),(s?rr:Dr)(t,function(n,i){u[i]=xr(n,r,e,i,t,o,a)}),u}function Cr(t,r,e){if("function"!=typeof t)throw new $o(G);return ha(function(){t.apply(P,e)},r)}function Tr(t,r){var e=t?t.length:0,n=[];if(!e)return n;var i=-1,o=ze(),a=o==u,s=a&&r.length>=z?ge(r):null,l=r.length;s&&(o=Kt,a=!1,r=s);t:for(;++i<e;){var c=t[i];if(a&&c===c){for(var f=l;f--;)if(r[f]===c)continue t;n.push(c)}else o(r,c,0)<0&&n.push(c)}return n}function wr(t,r){var e=!0;return Oa(t,function(t,n,i){return e=!!r(t,n,i)}),e}function Er(t,r,e,n){var i=n,o=i;return Oa(t,function(t,a,u){var s=+r(t,a,u);(e(s,i)||s===n&&s===o)&&(i=s,o=t)}),o}function Rr(t,r,e,n){var i=t.length;for(e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n=n===P||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n>>>0,e>>>=0;i>e;)t[e++]=r;return t}function Pr(t,r){var e=[];return Oa(t,function(t,n,i){r(t,n,i)&&e.push(t)}),e}function Mr(t,r,e,n){var i;return e(t,function(t,e,o){return r(t,e,o)?(i=n?e:t,!1):void 0}),i}function Ar(t,r,e,n){n||(n=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];y(a)&&$e(a)&&(e||Au(a)||Ei(a))?r?Ar(a,r,e,n):lr(n,a):e||(n[n.length]=a)}return n}function Sr(t,r){return ja(t,r,to)}function Dr(t,r){return ja(t,r,Xu)}function Lr(t,r){return Na(t,r,Xu)}function Ir(t,r){for(var e=-1,n=r.length,i=-1,o=[];++e<n;){var a=r[e];Ii(t[a])&&(o[++i]=a)}return o}function kr(t,r,e){if(null!=t){e!==P&&e in fn(t)&&(r=[e]);for(var n=0,i=r.length;null!=t&&i>n;)t=t[r[n++]];return n&&n==i?t:P}}function Fr(t,r,e,n,i,o){return t===r?!0:null==t||null==r||!ki(t)&&!y(r)?t!==t&&r!==r:Or(t,r,Fr,e,n,i,o)}function Or(t,r,e,n,i,o,a){var u=Au(t),s=Au(r),l=Z,c=Z;u||(l=na.call(t),l==V?l=rt:l!=rt&&(u=Yi(t))),s||(c=na.call(r),c==V?c=rt:c!=rt&&(s=Yi(r)));var f=l==rt,h=c==rt,p=l==c;if(p&&!u&&!f)return je(t,r,l);if(!i){var g=f&&ra.call(t,"__wrapped__"),d=h&&ra.call(r,"__wrapped__");if(g||d)return e(g?t.value():t,d?r.value():r,n,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==r;o.push(t),a.push(r);var b=(u?Ue:Ne)(t,r,e,n,i,o,a);return o.pop(),a.pop(),b}function Ur(t,r,e){var n=r.length,i=n,o=!e;if(null==t)return!i;for(t=fn(t);n--;){var a=r[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<i;){a=r[n];var u=a[0],s=t[u],l=a[1];if(o&&a[2]){if(s===P&&!(u in t))return!1}else{var c=e?e(s,l,u):P;if(!(c===P?Fr(l,s,e,!0):c))return!1}}return!0}function jr(t,r){var e=-1,n=$e(t)?Bo(t.length):[];return Oa(t,function(t,i,o){n[++e]=r(t,i,o)}),n}function Nr(t){var r=Ye(t);if(1==r.length&&r[0][2]){var e=r[0][0],n=r[0][1];return function(t){return null==t?!1:t[e]===n&&(n!==P||e in fn(t))}}return function(t){return Ur(t,r)}}function Xr(t,r){var e=Au(t),n=Je(t)&&en(r),i=t+"";return t=hn(t),function(o){if(null==o)return!1;var a=i;if(o=fn(o),(e||!n)&&!(a in o)){if(o=1==t.length?o:kr(o,Zr(t,0,-1)),null==o)return!1;a=Rn(t),o=fn(o)}return o[a]===r?r!==P||a in o:Fr(r,o[a],P,!0)}}function Br(t,r,e,n,i){if(!ki(t))return t;var o=$e(r)&&(Au(r)||Yi(r)),a=o?P:Xu(r);return rr(a||r,function(u,s){if(a&&(s=u,u=r[s]),y(u))n||(n=[]),i||(i=[]),zr(t,r,s,Br,e,n,i);else{var l=t[s],c=e?e(l,u,s,t,r):P,f=c===P;f&&(c=u),c===P&&(!o||s in t)||!f&&(c===c?c===l:l!==l)||(t[s]=c)}}),t}function zr(t,r,e,n,i,o,a){for(var u=o.length,s=r[e];u--;)if(o[u]==s)return void(t[e]=a[u]);var l=t[e],c=i?i(l,s,e,t,r):P,f=c===P;f&&(c=s,$e(s)&&(Au(s)||Yi(s))?c=Au(l)?l:$e(l)?tr(l):[]:Xi(s)||Ei(s)?c=Ei(l)?Zi(l):Xi(l)?l:{}:f=!1),o.push(s),a.push(c),f?t[e]=n(c,s,i,o,a):(c===c?c!==l:l===l)&&(t[e]=c)}function Yr(t){return function(r){return null==r?P:r[t]}}function qr(t){var r=t+"";return t=hn(t),function(e){return kr(e,t,r)}}function Gr(t,r){for(var e=t?r.length:0;e--;){var n=r[e];if(n!=i&&Ke(n)){var i=n;pa.call(t,n,1)}}return t}function Wr(t,r){return t+ma(Ra()*(r-t+1))}function Vr(t,r,e,n,i){return i(t,function(t,i,o){e=n?(n=!1,t):r(e,t,i,o)}),e}function Zr(t,r,e){var n=-1,i=t.length;r=null==r?0:+r||0,0>r&&(r=-r>i?0:i+r),e=e===P||e>i?i:+e||0,0>e&&(e+=i),i=r>e?0:e-r>>>0,r>>>=0;for(var o=Bo(i);++n<i;)o[n]=t[n+r];return o}function Qr(t,r){var e;return Oa(t,function(t,n,i){return e=r(t,n,i),!e}),!!e}function $r(t,r){var e=t.length;for(t.sort(r);e--;)t[e]=t[e].value;return t}function Kr(t,r,e){var n=Xe(),i=-1;r=sr(r,function(t){return n(t)});var o=jr(t,function(t){var e=sr(r,function(r){return r(t)});return{criteria:e,index:++i,value:t}});return $r(o,function(t,r){return p(t,r,e)})}function Hr(t,r){var e=0;return Oa(t,function(t,n,i){e+=+r(t,n,i)||0}),e}function Jr(t,r){var e=-1,n=ze(),i=t.length,o=n==u,a=o&&i>=z,s=a?ge():null,l=[];s?(n=Kt,o=!1):(a=!1,s=r?[]:l);t:for(;++e<i;){var c=t[e],f=r?r(c,e,t):c;if(o&&c===c){for(var h=s.length;h--;)if(s[h]===f)continue t;r&&s.push(f),l.push(c)}else n(s,f,0)<0&&((r||a)&&s.push(f),l.push(c))}return l}function te(t,r){for(var e=-1,n=r.length,i=Bo(n);++e<n;)i[e]=t[r[e]];return i}function re(t,r,e,n){for(var i=t.length,o=n?i:-1;(n?o--:++o<i)&&r(t[o],o,t););
return e?Zr(t,n?0:o,n?o+1:i):Zr(t,n?o+1:0,n?i:o)}function ee(t,r){var e=t;e instanceof i&&(e=e.value());for(var n=-1,o=r.length;++n<o;){var a=r[n];e=a.func.apply(a.thisArg,lr([e],a.args))}return e}function ne(t,r,e){var n=0,i=t?t.length:n;if("number"==typeof r&&r===r&&Da>=i){for(;i>n;){var o=n+i>>>1,a=t[o];(e?r>=a:r>a)&&null!==a?n=o+1:i=o}return i}return ie(t,r,Mo,e)}function ie(t,r,e,n){r=e(r);for(var i=0,o=t?t.length:0,a=r!==r,u=null===r,s=r===P;o>i;){var l=ma((i+o)/2),c=e(t[l]),f=c!==P,h=c===c;if(a)var p=h||n;else p=u?h&&f&&(n||null!=c):s?h&&(n||f):null==c?!1:n?r>=c:r>c;p?i=l+1:o=l}return Ta(o,Sa)}function oe(t,r,e){if("function"!=typeof t)return Mo;if(r===P)return t;switch(e){case 1:return function(e){return t.call(r,e)};case 3:return function(e,n,i){return t.call(r,e,n,i)};case 4:return function(e,n,i,o){return t.call(r,e,n,i,o)};case 5:return function(e,n,i,o,a){return t.call(r,e,n,i,o,a)}}return function(){return t.apply(r,arguments)}}function ae(t){var r=new aa(t.byteLength),e=new ga(r);return e.set(new ga(t)),r}function ue(t,r,e){for(var n=e.length,i=-1,o=Ca(t.length-n,0),a=-1,u=r.length,s=Bo(u+o);++a<u;)s[a]=r[a];for(;++i<n;)s[e[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function se(t,r,e){for(var n=-1,i=e.length,o=-1,a=Ca(t.length-i,0),u=-1,s=r.length,l=Bo(a+s);++o<a;)l[o]=t[o];for(var c=o;++u<s;)l[c+u]=r[u];for(;++n<i;)l[c+e[n]]=t[o++];return l}function le(t,r){return function(e,n,i){var o=r?r():{};if(n=Xe(n,i,3),Au(e))for(var a=-1,u=e.length;++a<u;){var s=e[a];t(o,s,n(s,a,e),e)}else Oa(e,function(r,e,i){t(o,r,n(r,e,i),i)});return o}}function ce(t){return bi(function(r,e){var n=-1,i=null==r?0:e.length,o=i>2?e[i-2]:P,a=i>2?e[2]:P,u=i>1?e[i-1]:P;for("function"==typeof o?(o=oe(o,u,5),i-=2):(o="function"==typeof u?u:P,i-=o?1:0),a&&He(e[0],e[1],a)&&(o=3>i?P:o,i=1);++n<i;){var s=e[n];s&&t(r,s,o)}return r})}function fe(t,r){return function(e,n){var i=e?za(e):0;if(!rn(i))return t(e,n);for(var o=r?i:-1,a=fn(e);(r?o--:++o<i)&&n(a[o],o,a)!==!1;);return e}}function he(t){return function(r,e,n){for(var i=fn(r),o=n(r),a=o.length,u=t?a:-1;t?u--:++u<a;){var s=o[u];if(e(i[s],s,i)===!1)break}return r}}function pe(t,r){function e(){var i=this&&this!==nr&&this instanceof e?n:t;return i.apply(r,arguments)}var n=ve(t);return e}function ge(t){return ba&&fa?new $t(t):null}function de(t){return function(r){for(var e=-1,n=Eo(co(r)),i=n.length,o="";++e<i;)o=t(o,n[e],e);return o}}function ve(t){return function(){var r=arguments;switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);case 5:return new t(r[0],r[1],r[2],r[3],r[4]);case 6:return new t(r[0],r[1],r[2],r[3],r[4],r[5]);case 7:return new t(r[0],r[1],r[2],r[3],r[4],r[5],r[6])}var e=Fa(t.prototype),n=t.apply(e,r);return ki(n)?n:e}}function be(t){function r(e,n,i){i&&He(e,n,i)&&(n=P);var o=Oe(e,t,P,P,P,P,P,n);return o.placeholder=r.placeholder,o}return r}function me(t,r){return bi(function(e){var n=e[0];return null==n?n:(e.push(r),t.apply(P,e))})}function ye(t,r){return function(e,n,i){if(i&&He(e,n,i)&&(n=P),n=Xe(n,i,3),1==n.length){e=Au(e)?e:cn(e);var o=ar(e,n,t,r);if(!e.length||o!==r)return o}return Er(e,n,t,r)}}function _e(t,r){return function(e,n,i){if(n=Xe(n,i,3),Au(e)){var o=a(e,n,r);return o>-1?e[o]:P}return Mr(e,n,t)}}function xe(t){return function(r,e,n){return r&&r.length?(e=Xe(e,n,3),a(r,e,t)):-1}}function Ce(t){return function(r,e,n){return e=Xe(e,n,3),Mr(r,e,t,!0)}}function Te(t){return function(){for(var r,e=arguments.length,i=t?e:-1,o=0,a=Bo(e);t?i--:++i<e;){var u=a[o++]=arguments[i];if("function"!=typeof u)throw new $o(G);!r&&n.prototype.thru&&"wrapper"==Be(u)&&(r=new n([],!0))}for(i=r?-1:e;++i<e;){u=a[i];var s=Be(u),l="wrapper"==s?Ba(u):P;r=l&&tn(l[0])&&l[1]==(O|L|k|U)&&!l[4].length&&1==l[9]?r[Be(l[0])].apply(r,l[3]):1==u.length&&tn(u)?r[s]():r.thru(u)}return function(){var t=arguments,n=t[0];if(r&&1==t.length&&Au(n)&&n.length>=z)return r.plant(n).value();for(var i=0,o=e?a[i].apply(this,t):n;++i<e;)o=a[i].call(this,o);return o}}}function we(t,r){return function(e,n,i){return"function"==typeof n&&i===P&&Au(e)?t(e,n):r(e,oe(n,i,3))}}function Ee(t){return function(r,e,n){return("function"!=typeof e||n!==P)&&(e=oe(e,n,3)),t(r,e,to)}}function Re(t){return function(r,e,n){return("function"!=typeof e||n!==P)&&(e=oe(e,n,3)),t(r,e)}}function Pe(t){return function(r,e,n){var i={};return e=Xe(e,n,3),Dr(r,function(r,n,o){var a=e(r,n,o);n=t?a:n,r=t?r:a,i[n]=r}),i}}function Me(t){return function(r,e,n){return r=l(r),(t?r:"")+Le(r,e,n)+(t?"":r)}}function Ae(t){var r=bi(function(e,n){var i=x(n,r.placeholder);return Oe(e,t,P,n,i)});return r}function Se(t,r){return function(e,n,i,o){var a=arguments.length<3;return"function"==typeof n&&o===P&&Au(e)?t(e,n,i,a):Vr(e,Xe(n,o,4),i,a,r)}}function De(t,r,e,n,i,o,a,u,s,l){function c(){for(var m=arguments.length,y=m,_=Bo(m);y--;)_[y]=arguments[y];if(n&&(_=ue(_,n,i)),o&&(_=se(_,o,a)),g||v){var C=c.placeholder,T=x(_,C);if(m-=T.length,l>m){var w=u?tr(u):P,E=Ca(l-m,0),R=g?T:P,M=g?P:T,D=g?_:P,L=g?P:_;r|=g?k:F,r&=~(g?F:k),d||(r&=~(A|S));var I=[t,r,e,D,R,L,M,w,s,E],O=De.apply(P,I);return tn(t)&&Ya(O,I),O.placeholder=C,O}}var U=h?e:this,j=p?U[t]:t;return u&&(_=sn(_,u)),f&&s<_.length&&(_.length=s),this&&this!==nr&&this instanceof c&&(j=b||ve(t)),j.apply(U,_)}var f=r&O,h=r&A,p=r&S,g=r&L,d=r&D,v=r&I,b=p?P:ve(t);return c}function Le(t,r,e){var n=t.length;if(r=+r,n>=r||!_a(r))return"";var i=r-n;return e=null==e?" ":e+"",bo(e,va(i/e.length)).slice(0,i)}function Ie(t,r,e,n){function i(){for(var r=-1,u=arguments.length,s=-1,l=n.length,c=Bo(l+u);++s<l;)c[s]=n[s];for(;u--;)c[s++]=arguments[++r];var f=this&&this!==nr&&this instanceof i?a:t;return f.apply(o?e:this,c)}var o=r&A,a=ve(t);return i}function ke(t){var r=Go[t];return function(t,e){return e=e===P?0:+e||0,e?(e=la(10,e),r(t*e)/e):r(t)}}function Fe(t){return function(r,e,n,i){var o=Xe(n);return null==n&&o===_r?ne(r,e,t):ie(r,e,o(n,i,1),t)}}function Oe(t,r,e,n,i,o,a,u){var s=r&S;if(!s&&"function"!=typeof t)throw new $o(G);var l=n?n.length:0;if(l||(r&=~(k|F),n=i=P),l-=i?i.length:0,r&F){var c=n,f=i;n=i=P}var h=s?P:Ba(t),p=[t,r,e,n,i,c,f,o,a,u];if(h&&(nn(p,h),r=p[1],u=p[9]),p[9]=null==u?s?0:t.length:Ca(u-l,0)||0,r==A)var g=pe(p[0],p[2]);else g=r!=k&&r!=(A|k)||p[4].length?De.apply(P,p):Ie.apply(P,p);var d=h?Xa:Ya;return d(g,p)}function Ue(t,r,e,n,i,o,a){var u=-1,s=t.length,l=r.length;if(s!=l&&!(i&&l>s))return!1;for(;++u<s;){var c=t[u],f=r[u],h=n?n(i?f:c,i?c:f,u):P;if(h!==P){if(h)continue;return!1}if(i){if(!hr(r,function(t){return c===t||e(c,t,n,i,o,a)}))return!1}else if(c!==f&&!e(c,f,n,i,o,a))return!1}return!0}function je(t,r,e){switch(e){case Q:case $:return+t==+r;case K:return t.name==r.name&&t.message==r.message;case tt:return t!=+t?r!=+r:t==+r;case et:case it:return t==r+""}return!1}function Ne(t,r,e,n,i,o,a){var u=Xu(t),s=u.length,l=Xu(r),c=l.length;if(s!=c&&!i)return!1;for(var f=s;f--;){var h=u[f];if(!(i?h in r:ra.call(r,h)))return!1}for(var p=i;++f<s;){h=u[f];var g=t[h],d=r[h],v=n?n(i?d:g,i?g:d,h):P;if(!(v===P?e(g,d,n,i,o,a):v))return!1;p||(p="constructor"==h)}if(!p){var b=t.constructor,m=r.constructor;if(b!=m&&"constructor"in t&&"constructor"in r&&!("function"==typeof b&&b instanceof b&&"function"==typeof m&&m instanceof m))return!1}return!0}function Xe(t,e,n){var i=r.callback||Ro;return i=i===Ro?_r:i,n?i(t,e,n):i}function Be(t){for(var r=t.name,e=ka[r],n=e?e.length:0;n--;){var i=e[n],o=i.func;if(null==o||o==t)return i.name}return r}function ze(t,e,n){var i=r.indexOf||wn;return i=i===wn?u:i,t?i(t,e,n):i}function Ye(t){for(var r=ro(t),e=r.length;e--;)r[e][2]=en(r[e][1]);return r}function qe(t,r){var e=null==t?P:t[r];return Ui(e)?e:P}function Ge(t,r,e){for(var n=-1,i=e.length;++n<i;){var o=e[n],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":r-=a;break;case"take":r=Ta(r,t+a);break;case"takeRight":t=Ca(t,r-a)}}return{start:t,end:r}}function We(t){var r=t.length,e=new t.constructor(r);return r&&"string"==typeof t[0]&&ra.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function Ve(t){var r=t.constructor;return"function"==typeof r&&r instanceof r||(r=Vo),new r}function Ze(t,r,e){var n=t.constructor;switch(r){case at:return ae(t);case Q:case $:return new n(+t);case ut:case st:case lt:case ct:case ft:case ht:case pt:case gt:case dt:var i=t.buffer;return new n(e?ae(i):i,t.byteOffset,t.length);case tt:case it:return new n(t);case et:var o=new n(t.source,kt.exec(t));o.lastIndex=t.lastIndex}return o}function Qe(t,r,e){null==t||Je(r,t)||(r=hn(r),t=1==r.length?t:kr(t,Zr(r,0,-1)),r=Rn(r));var n=null==t?t:t[r];return null==n?P:n.apply(t,e)}function $e(t){return null!=t&&rn(za(t))}function Ke(t,r){return t="number"==typeof t||Ut.test(t)?+t:-1,r=null==r?La:r,t>-1&&t%1==0&&r>t}function He(t,r,e){if(!ki(e))return!1;var n=typeof r;if("number"==n?$e(e)&&Ke(r,e.length):"string"==n&&r in e){var i=e[r];return t===t?t===i:i!==i}return!1}function Je(t,r){var e=typeof t;if("string"==e&&Pt.test(t)||"number"==e)return!0;if(Au(t))return!1;var n=!Rt.test(t);return n||null!=r&&t in fn(r)}function tn(t){var e=Be(t);if(!(e in i.prototype))return!1;var n=r[e];if(t===n)return!0;var o=Ba(n);return!!o&&t===o[0]}function rn(t){return"number"==typeof t&&t>-1&&t%1==0&&La>=t}function en(t){return t===t&&!ki(t)}function nn(t,r){var e=t[1],n=r[1],i=e|n,o=O>i,a=n==O&&e==L||n==O&&e==U&&t[7].length<=r[8]||n==(O|U)&&e==L;if(!o&&!a)return t;n&A&&(t[2]=r[2],i|=e&A?0:D);var u=r[3];if(u){var s=t[3];t[3]=s?ue(s,u,r[4]):tr(u),t[4]=s?x(t[3],W):tr(r[4])}return u=r[5],u&&(s=t[5],t[5]=s?se(s,u,r[6]):tr(u),t[6]=s?x(t[5],W):tr(r[6])),u=r[7],u&&(t[7]=tr(u)),n&O&&(t[8]=null==t[8]?r[8]:Ta(t[8],r[8])),null==t[9]&&(t[9]=r[9]),t[0]=r[0],t[1]=i,t}function on(t,r){return t===P?r:Su(t,r,on)}function an(t,r){t=fn(t);for(var e=-1,n=r.length,i={};++e<n;){var o=r[e];o in t&&(i[o]=t[o])}return i}function un(t,r){var e={};return Sr(t,function(t,n,i){r(t,n,i)&&(e[n]=t)}),e}function sn(t,r){for(var e=t.length,n=Ta(r.length,e),i=tr(t);n--;){var o=r[n];t[n]=Ke(o,e)?i[o]:P}return t}function ln(t){for(var r=to(t),e=r.length,n=e&&t.length,i=!!n&&rn(n)&&(Au(t)||Ei(t)),o=-1,a=[];++o<e;){var u=r[o];(i&&Ke(u,n)||ra.call(t,u))&&a.push(u)}return a}function cn(t){return null==t?[]:$e(t)?ki(t)?t:Vo(t):oo(t)}function fn(t){return ki(t)?t:Vo(t)}function hn(t){if(Au(t))return t;var r=[];return l(t).replace(Mt,function(t,e,n,i){r.push(n?i.replace(Lt,"$1"):e||t)}),r}function pn(t){return t instanceof i?t.clone():new n(t.__wrapped__,t.__chain__,tr(t.__actions__))}function gn(t,r,e){r=(e?He(t,r,e):null==r)?1:Ca(ma(r)||1,1);for(var n=0,i=t?t.length:0,o=-1,a=Bo(va(i/r));i>n;)a[++o]=Zr(t,n,n+=r);return a}function dn(t){for(var r=-1,e=t?t.length:0,n=-1,i=[];++r<e;){var o=t[r];o&&(i[++n]=o)}return i}function vn(t,r,e){var n=t?t.length:0;return n?((e?He(t,r,e):null==r)&&(r=1),Zr(t,0>r?0:r)):[]}function bn(t,r,e){var n=t?t.length:0;return n?((e?He(t,r,e):null==r)&&(r=1),r=n-(+r||0),Zr(t,0,0>r?0:r)):[]}function mn(t,r,e){return t&&t.length?re(t,Xe(r,e,3),!0,!0):[]}function yn(t,r,e){return t&&t.length?re(t,Xe(r,e,3),!0):[]}function _n(t,r,e,n){var i=t?t.length:0;return i?(e&&"number"!=typeof e&&He(t,r,e)&&(e=0,n=i),Rr(t,r,e,n)):[]}function xn(t){return t?t[0]:P}function Cn(t,r,e){var n=t?t.length:0;return e&&He(t,r,e)&&(r=!1),n?Ar(t,r):[]}function Tn(t){var r=t?t.length:0;return r?Ar(t,!0):[]}function wn(t,r,e){var n=t?t.length:0;if(!n)return-1;if("number"==typeof e)e=0>e?Ca(n+e,0):e;else if(e){var i=ne(t,r);return n>i&&(r===r?r===t[i]:t[i]!==t[i])?i:-1}return u(t,r,e||0)}function En(t){return bn(t,1)}function Rn(t){var r=t?t.length:0;return r?t[r-1]:P}function Pn(t,r,e){var n=t?t.length:0;if(!n)return-1;var i=n;if("number"==typeof e)i=(0>e?Ca(n+e,0):Ta(e||0,n-1))+1;else if(e){i=ne(t,r,!0)-1;var o=t[i];return(r===r?r===o:o!==o)?i:-1}if(r!==r)return m(t,i,!0);for(;i--;)if(t[i]===r)return i;return-1}function Mn(){var t=arguments,r=t[0];if(!r||!r.length)return r;for(var e=0,n=ze(),i=t.length;++e<i;)for(var o=0,a=t[e];(o=n(r,a,o))>-1;)pa.call(r,o,1);return r}function An(t,r,e){var n=[];if(!t||!t.length)return n;var i=-1,o=[],a=t.length;for(r=Xe(r,e,3);++i<a;){var u=t[i];r(u,i,t)&&(n.push(u),o.push(i))}return Gr(t,o),n}function Sn(t){return vn(t,1)}function Dn(t,r,e){var n=t?t.length:0;return n?(e&&"number"!=typeof e&&He(t,r,e)&&(r=0,e=n),Zr(t,r,e)):[]}function Ln(t,r,e){var n=t?t.length:0;return n?((e?He(t,r,e):null==r)&&(r=1),Zr(t,0,0>r?0:r)):[]}function In(t,r,e){var n=t?t.length:0;return n?((e?He(t,r,e):null==r)&&(r=1),r=n-(+r||0),Zr(t,0>r?0:r)):[]}function kn(t,r,e){return t&&t.length?re(t,Xe(r,e,3),!1,!0):[]}function Fn(t,r,e){return t&&t.length?re(t,Xe(r,e,3)):[]}function On(t,r,e,n){var i=t?t.length:0;if(!i)return[];null!=r&&"boolean"!=typeof r&&(n=e,e=He(t,r,n)?P:r,r=!1);var o=Xe();return(null!=e||o!==_r)&&(e=o(e,n,3)),r&&ze()==u?C(t,e):Jr(t,e)}function Un(t){if(!t||!t.length)return[];var r=-1,e=0;t=ur(t,function(t){return $e(t)?(e=Ca(t.length,e),!0):void 0});for(var n=Bo(e);++r<e;)n[r]=sr(t,Yr(r));return n}function jn(t,r,e){var n=t?t.length:0;if(!n)return[];var i=Un(t);return null==r?i:(r=oe(r,e,4),sr(i,function(t){return cr(t,r,P,!0)}))}function Nn(){for(var t=-1,r=arguments.length;++t<r;){var e=arguments[t];if($e(e))var n=n?lr(Tr(n,e),Tr(e,n)):e}return n?Jr(n):[]}function Xn(t,r){var e=-1,n=t?t.length:0,i={};for(!n||r||Au(t[0])||(r=[]);++e<n;){var o=t[e];r?i[o]=r[e]:o&&(i[o[0]]=o[1])}return i}function Bn(t){var e=r(t);return e.__chain__=!0,e}function zn(t,r,e){return r.call(e,t),t}function Yn(t,r,e){return r.call(e,t)}function qn(){return Bn(this)}function Gn(){return new n(this.value(),this.__chain__)}function Wn(t){for(var r,n=this;n instanceof e;){var i=pn(n);r?o.__wrapped__=i:r=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,r}function Vn(){var t=this.__wrapped__,r=function(t){return e&&e.__dir__<0?t:t.reverse()};if(t instanceof i){var e=t;return this.__actions__.length&&(e=new i(this)),e=e.reverse(),e.__actions__.push({func:Yn,args:[r],thisArg:P}),new n(e,this.__chain__)}return this.thru(r)}function Zn(){return this.value()+""}function Qn(){return ee(this.__wrapped__,this.__actions__)}function $n(t,r,e){var n=Au(t)?or:wr;return e&&He(t,r,e)&&(r=P),("function"!=typeof r||e!==P)&&(r=Xe(r,e,3)),n(t,r)}function Kn(t,r,e){var n=Au(t)?ur:Pr;return r=Xe(r,e,3),n(t,r)}function Hn(t,r){return iu(t,Nr(r))}function Jn(t,r,e,n){var i=t?za(t):0;return rn(i)||(t=oo(t),i=t.length),e="number"!=typeof e||n&&He(r,e,n)?0:0>e?Ca(i+e,0):e||0,"string"==typeof t||!Au(t)&&zi(t)?i>=e&&t.indexOf(r,e)>-1:!!i&&ze(t,r,e)>-1}function ti(t,r,e){var n=Au(t)?sr:jr;return r=Xe(r,e,3),n(t,r)}function ri(t,r){return ti(t,ko(r))}function ei(t,r,e){var n=Au(t)?ur:Pr;return r=Xe(r,e,3),n(t,function(t,e,n){return!r(t,e,n)})}function ni(t,r,e){if(e?He(t,r,e):null==r){t=cn(t);var n=t.length;return n>0?t[Wr(0,n-1)]:P}var i=-1,o=Vi(t),n=o.length,a=n-1;for(r=Ta(0>r?0:+r||0,n);++i<r;){var u=Wr(i,a),s=o[u];o[u]=o[i],o[i]=s}return o.length=r,o}function ii(t){return ni(t,Ma)}function oi(t){var r=t?za(t):0;return rn(r)?r:Xu(t).length}function ai(t,r,e){var n=Au(t)?hr:Qr;return e&&He(t,r,e)&&(r=P),("function"!=typeof r||e!==P)&&(r=Xe(r,e,3)),n(t,r)}function ui(t,r,e){if(null==t)return[];e&&He(t,r,e)&&(r=P);var n=-1;r=Xe(r,e,3);var i=jr(t,function(t,e,i){return{criteria:r(t,e,i),index:++n,value:t}});return $r(i,h)}function si(t,r,e,n){return null==t?[]:(n&&He(r,e,n)&&(e=P),Au(r)||(r=null==r?[]:[r]),Au(e)||(e=null==e?[]:[e]),Kr(t,r,e))}function li(t,r){return Kn(t,Nr(r))}function ci(t,r){if("function"!=typeof r){if("function"!=typeof t)throw new $o(G);var e=t;t=r,r=e}return t=_a(t=+t)?t:0,function(){return--t<1?r.apply(this,arguments):void 0}}function fi(t,r,e){return e&&He(t,r,e)&&(r=P),r=t&&null==r?t.length:Ca(+r||0,0),Oe(t,O,P,P,P,P,r)}function hi(t,r){var e;if("function"!=typeof r){if("function"!=typeof t)throw new $o(G);var n=t;t=r,r=n}return function(){return--t>0&&(e=r.apply(this,arguments)),1>=t&&(r=P),e}}function pi(t,r,e){function n(){p&&ua(p),l&&ua(l),d=0,l=p=g=P}function i(r,e){e&&ua(e),l=p=g=P,r&&(d=du(),c=t.apply(h,s),p||l||(s=h=P))}function o(){var t=r-(du()-f);0>=t||t>r?i(g,l):p=ha(o,t)}function a(){i(b,p)}function u(){if(s=arguments,f=du(),h=this,g=b&&(p||!m),v===!1)var e=m&&!p;else{l||m||(d=f);var n=v-(f-d),i=0>=n||n>v;i?(l&&(l=ua(l)),d=f,c=t.apply(h,s)):l||(l=ha(a,n))}return i&&p?p=ua(p):p||r===v||(p=ha(o,r)),e&&(i=!0,c=t.apply(h,s)),!i||p||l||(s=h=P),c}var s,l,c,f,h,p,g,d=0,v=!1,b=!0;if("function"!=typeof t)throw new $o(G);if(r=0>r?0:+r||0,e===!0){var m=!0;b=!1}else ki(e)&&(m=!!e.leading,v="maxWait"in e&&Ca(+e.maxWait||0,r),b="trailing"in e?!!e.trailing:b);return u.cancel=n,u}function gi(t,r){if("function"!=typeof t||r&&"function"!=typeof r)throw new $o(G);var e=function(){var n=arguments,i=r?r.apply(this,n):n[0],o=e.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return e.cache=o.set(i,a),a};return e.cache=new gi.Cache,e}function di(t){if("function"!=typeof t)throw new $o(G);return function(){return!t.apply(this,arguments)}}function vi(t){return hi(2,t)}function bi(t,r){if("function"!=typeof t)throw new $o(G);return r=Ca(r===P?t.length-1:+r||0,0),function(){for(var e=arguments,n=-1,i=Ca(e.length-r,0),o=Bo(i);++n<i;)o[n]=e[r+n];switch(r){case 0:return t.call(this,o);case 1:return t.call(this,e[0],o);case 2:return t.call(this,e[0],e[1],o)}var a=Bo(r+1);for(n=-1;++n<r;)a[n]=e[n];return a[r]=o,t.apply(this,a)}}function mi(t){if("function"!=typeof t)throw new $o(G);return function(r){return t.apply(this,r)}}function yi(t,r,e){var n=!0,i=!0;if("function"!=typeof t)throw new $o(G);return e===!1?n=!1:ki(e)&&(n="leading"in e?!!e.leading:n,i="trailing"in e?!!e.trailing:i),pi(t,r,{leading:n,maxWait:+r,trailing:i})}function _i(t,r){return r=null==r?Mo:r,Oe(r,k,P,[t],[])}function xi(t,r,e,n){return r&&"boolean"!=typeof r&&He(t,r,e)?r=!1:"function"==typeof r&&(n=e,e=r,r=!1),"function"==typeof e?xr(t,r,oe(e,n,1)):xr(t,r)}function Ci(t,r,e){return"function"==typeof r?xr(t,!0,oe(r,e,1)):xr(t,!0)}function Ti(t,r){return t>r}function wi(t,r){return t>=r}function Ei(t){return y(t)&&$e(t)&&ra.call(t,"callee")&&!ca.call(t,"callee")}function Ri(t){return t===!0||t===!1||y(t)&&na.call(t)==Q}function Pi(t){return y(t)&&na.call(t)==$}function Mi(t){return!!t&&1===t.nodeType&&y(t)&&!Xi(t)}function Ai(t){return null==t?!0:$e(t)&&(Au(t)||zi(t)||Ei(t)||y(t)&&Ii(t.splice))?!t.length:!Xu(t).length}function Si(t,r,e,n){e="function"==typeof e?oe(e,n,3):P;var i=e?e(t,r):P;return i===P?Fr(t,r,e):!!i}function Di(t){return y(t)&&"string"==typeof t.message&&na.call(t)==K}function Li(t){return"number"==typeof t&&_a(t)}function Ii(t){return ki(t)&&na.call(t)==H}function ki(t){var r=typeof t;return!!t&&("object"==r||"function"==r)}function Fi(t,r,e,n){return e="function"==typeof e?oe(e,n,3):P,Ur(t,Ye(r),e)}function Oi(t){return Ni(t)&&t!=+t}function Ui(t){return null==t?!1:Ii(t)?oa.test(ta.call(t)):y(t)&&Ot.test(t)}function ji(t){return null===t}function Ni(t){return"number"==typeof t||y(t)&&na.call(t)==tt}function Xi(t){var r;if(!y(t)||na.call(t)!=rt||Ei(t)||!ra.call(t,"constructor")&&(r=t.constructor,"function"==typeof r&&!(r instanceof r)))return!1;var e;return Sr(t,function(t,r){e=r}),e===P||ra.call(t,e)}function Bi(t){return ki(t)&&na.call(t)==et}function zi(t){return"string"==typeof t||y(t)&&na.call(t)==it}function Yi(t){return y(t)&&rn(t.length)&&!!qt[na.call(t)]}function qi(t){return t===P}function Gi(t,r){return r>t}function Wi(t,r){return r>=t}function Vi(t){var r=t?za(t):0;return rn(r)?r?tr(t):[]:oo(t)}function Zi(t){return yr(t,to(t))}function Qi(t,r,e){var n=Fa(t);return e&&He(t,r,e)&&(r=P),r?br(n,r):n}function $i(t){return Ir(t,to(t))}function Ki(t,r,e){var n=null==t?P:kr(t,hn(r),r+"");return n===P?e:n}function Hi(t,r){if(null==t)return!1;var e=ra.call(t,r);if(!e&&!Je(r)){if(r=hn(r),t=1==r.length?t:kr(t,Zr(r,0,-1)),null==t)return!1;r=Rn(r),e=ra.call(t,r)}return e||rn(t.length)&&Ke(r,t.length)&&(Au(t)||Ei(t))}function Ji(t,r,e){e&&He(t,r,e)&&(r=P);for(var n=-1,i=Xu(t),o=i.length,a={};++n<o;){var u=i[n],s=t[u];r?ra.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a}function to(t){if(null==t)return[];ki(t)||(t=Vo(t));var r=t.length;r=r&&rn(r)&&(Au(t)||Ei(t))&&r||0;for(var e=t.constructor,n=-1,i="function"==typeof e&&e.prototype===t,o=Bo(r),a=r>0;++n<r;)o[n]=n+"";for(var u in t)a&&Ke(u,r)||"constructor"==u&&(i||!ra.call(t,u))||o.push(u);return o}function ro(t){t=fn(t);for(var r=-1,e=Xu(t),n=e.length,i=Bo(n);++r<n;){var o=e[r];i[r]=[o,t[o]]}return i}function eo(t,r,e){var n=null==t?P:t[r];return n===P&&(null==t||Je(r,t)||(r=hn(r),t=1==r.length?t:kr(t,Zr(r,0,-1)),n=null==t?P:t[Rn(r)]),n=n===P?e:n),Ii(n)?n.call(t):n}function no(t,r,e){if(null==t)return t;var n=r+"";r=null!=t[n]||Je(r,t)?[n]:hn(r);for(var i=-1,o=r.length,a=o-1,u=t;null!=u&&++i<o;){var s=r[i];ki(u)&&(i==a?u[s]=e:null==u[s]&&(u[s]=Ke(r[i+1])?[]:{})),u=u[s]}return t}function io(t,r,e,n){var i=Au(t)||Yi(t);if(r=Xe(r,n,4),null==e)if(i||ki(t)){var o=t.constructor;e=i?Au(t)?new o:[]:Fa(Ii(o)?o.prototype:P)}else e={};return(i?rr:Dr)(t,function(t,n,i){return r(e,t,n,i)}),e}function oo(t){return te(t,Xu(t))}function ao(t){return te(t,to(t))}function uo(t,r,e){return r=+r||0,e===P?(e=r,r=0):e=+e||0,t>=Ta(r,e)&&t<Ca(r,e)}function so(t,r,e){e&&He(t,r,e)&&(r=e=P);var n=null==t,i=null==r;if(null==e&&(i&&"boolean"==typeof t?(e=t,t=1):"boolean"==typeof r&&(e=r,i=!0)),n&&i&&(r=1,i=!1),t=+t||0,i?(r=t,t=0):r=+r||0,e||t%1||r%1){var o=Ra();return Ta(t+o*(r-t+sa("1e-"+((o+"").length-1))),r)}return Wr(t,r)}function lo(t){return t=l(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function co(t){return t=l(t),t&&t.replace(jt,g).replace(Dt,"")}function fo(t,r,e){t=l(t),r+="";var n=t.length;return e=e===P?n:Ta(0>e?0:+e||0,n),e-=r.length,e>=0&&t.indexOf(r,e)==e}function ho(t){return t=l(t),t&&Ct.test(t)?t.replace(_t,d):t}function po(t){return t=l(t),t&&St.test(t)?t.replace(At,v):t||"(?:)"}function go(t,r,e){t=l(t),r=+r;var n=t.length;if(n>=r||!_a(r))return t;var i=(r-n)/2,o=ma(i),a=va(i);return e=Le("",a,e),e.slice(0,o)+t+e}function vo(t,r,e){return(e?He(t,r,e):null==r)?r=0:r&&(r=+r),t=_o(t),Ea(t,r||(Ft.test(t)?16:10))}function bo(t,r){var e="";if(t=l(t),r=+r,1>r||!t||!_a(r))return e;do r%2&&(e+=t),r=ma(r/2),t+=t;while(r);return e}function mo(t,r,e){return t=l(t),e=null==e?0:Ta(0>e?0:+e||0,t.length),t.lastIndexOf(r,e)==e}function yo(t,e,n){var i=r.templateSettings;n&&He(t,e,n)&&(e=n=P),t=l(t),e=vr(br({},n||e),i,dr);var o,a,u=vr(br({},e.imports),i.imports,dr),s=Xu(u),c=te(u,s),f=0,h=e.interpolate||Nt,p="__p += '",g=Zo((e.escape||Nt).source+"|"+h.source+"|"+(h===Et?It:Nt).source+"|"+(e.evaluate||Nt).source+"|$","g"),d="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++Yt+"]")+"\n";t.replace(g,function(r,e,n,i,u,s){return n||(n=i),p+=t.slice(f,s).replace(Xt,b),e&&(o=!0,p+="' +\n__e("+e+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),n&&(p+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),f=s+r.length,r}),p+="';\n";var v=e.variable;v||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(vt,""):p).replace(bt,"$1").replace(mt,"$1;"),p="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Ku(function(){return qo(s,d+"return "+p).apply(P,c)});if(m.source=p,Di(m))throw m;return m}function _o(t,r,e){var n=t;return(t=l(t))?(e?He(n,r,e):null==r)?t.slice(T(t),w(t)+1):(r+="",t.slice(c(t,r),f(t,r)+1)):t}function xo(t,r,e){var n=t;return t=l(t),t?(e?He(n,r,e):null==r)?t.slice(T(t)):t.slice(c(t,r+"")):t}function Co(t,r,e){var n=t;return t=l(t),t?(e?He(n,r,e):null==r)?t.slice(0,w(t)+1):t.slice(0,f(t,r+"")+1):t}function To(t,r,e){e&&He(t,r,e)&&(r=P);var n=j,i=N;if(null!=r)if(ki(r)){var o="separator"in r?r.separator:o;n="length"in r?+r.length||0:n,i="omission"in r?l(r.omission):i}else n=+r||0;if(t=l(t),n>=t.length)return t;var a=n-i.length;if(1>a)return i;var u=t.slice(0,a);if(null==o)return u+i;if(Bi(o)){if(t.slice(a).search(o)){var s,c,f=t.slice(0,a);for(o.global||(o=Zo(o.source,(kt.exec(o)||"")+"g")),o.lastIndex=0;s=o.exec(f);)c=s.index;u=u.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i}function wo(t){return t=l(t),t&&xt.test(t)?t.replace(yt,E):t}function Eo(t,r,e){return e&&He(t,r,e)&&(r=P),t=l(t),t.match(r||Bt)||[]}function Ro(t,r,e){return e&&He(t,r,e)&&(r=P),y(t)?Ao(t):_r(t,r)}function Po(t){return function(){return t}}function Mo(t){return t}function Ao(t){return Nr(xr(t,!0))}function So(t,r){return Xr(t,xr(r,!0))}function Do(t,r,e){if(null==e){var n=ki(r),i=n?Xu(r):P,o=i&&i.length?Ir(r,i):P;(o?o.length:n)||(o=!1,e=r,r=t,t=this)}o||(o=Ir(r,Xu(r)));var a=!0,u=-1,s=Ii(t),l=o.length;e===!1?a=!1:ki(e)&&"chain"in e&&(a=e.chain);for(;++u<l;){var c=o[u],f=r[c];t[c]=f,s&&(t.prototype[c]=function(r){return function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__),i=n.__actions__=tr(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,lr([this.value()],arguments))}}(f))}return t}function Lo(){return nr._=ia,this}function Io(){}function ko(t){return Je(t)?Yr(t):qr(t)}function Fo(t){return function(r){return kr(t,hn(r),r+"")}}function Oo(t,r,e){e&&He(t,r,e)&&(r=e=P),t=+t||0,e=null==e?1:+e||0,null==r?(r=t,t=0):r=+r||0;for(var n=-1,i=Ca(va((r-t)/(e||1)),0),o=Bo(i);++n<i;)o[n]=t,t+=e;return o}function Uo(t,r,e){if(t=ma(t),1>t||!_a(t))return[];var n=-1,i=Bo(Ta(t,Aa));for(r=oe(r,e,1);++n<t;)Aa>n?i[n]=r(n):r(n);return i}function jo(t){var r=++ea;return l(t)+r}function No(t,r){return(+t||0)+(+r||0)}function Xo(t,r,e){return e&&He(t,r,e)&&(r=P),r=Xe(r,e,3),1==r.length?pr(Au(t)?t:cn(t),r):Hr(t,r)}t=t?ir.defaults(nr.Object(),t,ir.pick(nr,zt)):nr;var Bo=t.Array,zo=t.Date,Yo=t.Error,qo=t.Function,Go=t.Math,Wo=t.Number,Vo=t.Object,Zo=t.RegExp,Qo=t.String,$o=t.TypeError,Ko=Bo.prototype,Ho=Vo.prototype,Jo=Qo.prototype,ta=qo.prototype.toString,ra=Ho.hasOwnProperty,ea=0,na=Ho.toString,ia=nr._,oa=Zo("^"+ta.call(ra).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,ua=t.clearTimeout,sa=t.parseFloat,la=Go.pow,ca=Ho.propertyIsEnumerable,fa=qe(t,"Set"),ha=t.setTimeout,pa=Ko.splice,ga=t.Uint8Array,da=qe(t,"WeakMap"),va=Go.ceil,ba=qe(Vo,"create"),ma=Go.floor,ya=qe(Bo,"isArray"),_a=t.isFinite,xa=qe(Vo,"keys"),Ca=Go.max,Ta=Go.min,wa=qe(zo,"now"),Ea=t.parseInt,Ra=Go.random,Pa=Wo.NEGATIVE_INFINITY,Ma=Wo.POSITIVE_INFINITY,Aa=4294967295,Sa=Aa-1,Da=Aa>>>1,La=9007199254740991,Ia=da&&new da,ka={};r.support={};r.templateSettings={escape:Tt,evaluate:wt,interpolate:Et,variable:"",imports:{_:r}};var Fa=function(){function t(){}return function(r){if(ki(r)){t.prototype=r;var e=new t;t.prototype=P}return e||{}}}(),Oa=fe(Dr),Ua=fe(Lr,!0),ja=he(),Na=he(!0),Xa=Ia?function(t,r){return Ia.set(t,r),t}:Mo,Ba=Ia?function(t){return Ia.get(t)}:Io,za=Yr("length"),Ya=function(){var t=0,r=0;return function(e,n){var i=du(),o=B-(i-r);if(r=i,o>0){if(++t>=X)return e}else t=0;return Xa(e,n)}}(),qa=bi(function(t,r){return y(t)&&$e(t)?Tr(t,Ar(r,!1,!0)):[]}),Ga=xe(),Wa=xe(!0),Va=bi(function(t){for(var r=t.length,e=r,n=Bo(f),i=ze(),o=i==u,a=[];e--;){var s=t[e]=$e(s=t[e])?s:[];n[e]=o&&s.length>=120?ge(e&&s):null}var l=t[0],c=-1,f=l?l.length:0,h=n[0];t:for(;++c<f;)if(s=l[c],(h?Kt(h,s):i(a,s,0))<0){for(var e=r;--e;){var p=n[e];if((p?Kt(p,s):i(t[e],s,0))<0)continue t}h&&h.push(s),a.push(s)}return a}),Za=bi(function(t,r){r=Ar(r);var e=mr(t,r);return Gr(t,r.sort(o)),e}),Qa=Fe(),$a=Fe(!0),Ka=bi(function(t){return Jr(Ar(t,!1,!0))}),Ha=bi(function(t,r){return $e(t)?Tr(t,r):[]}),Ja=bi(Un),tu=bi(function(t){var r=t.length,e=r>2?t[r-2]:P,n=r>1?t[r-1]:P;return r>2&&"function"==typeof e?r-=2:(e=r>1&&"function"==typeof n?(--r,n):P,n=P),t.length=r,jn(t,e,n)}),ru=bi(function(t){return t=Ar(t),this.thru(function(r){return Jt(Au(r)?r:[fn(r)],t)})}),eu=bi(function(t,r){return mr(t,Ar(r))}),nu=le(function(t,r,e){ra.call(t,e)?++t[e]:t[e]=1}),iu=_e(Oa),ou=_e(Ua,!0),au=we(rr,Oa),uu=we(er,Ua),su=le(function(t,r,e){ra.call(t,e)?t[e].push(r):t[e]=[r]}),lu=le(function(t,r,e){t[e]=r}),cu=bi(function(t,r,e){var n=-1,i="function"==typeof r,o=Je(r),a=$e(t)?Bo(t.length):[];return Oa(t,function(t){var u=i?r:o&&null!=t?t[r]:P;a[++n]=u?u.apply(t,e):Qe(t,r,e)}),a}),fu=le(function(t,r,e){t[e?0:1].push(r)},function(){return[[],[]]}),hu=Se(cr,Oa),pu=Se(fr,Ua),gu=bi(function(t,r){if(null==t)return[];var e=r[2];return e&&He(r[0],r[1],e)&&(r.length=1),Kr(t,Ar(r),[])}),du=wa||function(){return(new zo).getTime()},vu=bi(function(t,r,e){var n=A;if(e.length){var i=x(e,vu.placeholder);n|=k}return Oe(t,n,r,e,i)}),bu=bi(function(t,r){r=r.length?Ar(r):$i(t);for(var e=-1,n=r.length;++e<n;){var i=r[e];t[i]=Oe(t[i],A,t)}return t}),mu=bi(function(t,r,e){var n=A|S;if(e.length){var i=x(e,mu.placeholder);n|=k}return Oe(r,n,t,e,i)}),yu=be(L),_u=be(I),xu=bi(function(t,r){return Cr(t,1,r)}),Cu=bi(function(t,r,e){return Cr(t,r,e)}),Tu=Te(),wu=Te(!0),Eu=bi(function(t,r){if(r=Ar(r),"function"!=typeof t||!or(r,s))throw new $o(G);var e=r.length;return bi(function(n){for(var i=Ta(n.length,e);i--;)n[i]=r[i](n[i]);return t.apply(this,n)})}),Ru=Ae(k),Pu=Ae(F),Mu=bi(function(t,r){return Oe(t,U,P,P,P,Ar(r))}),Au=ya||function(t){return y(t)&&rn(t.length)&&na.call(t)==Z},Su=ce(Br),Du=ce(function(t,r,e){return e?vr(t,r,e):br(t,r)}),Lu=me(Du,gr),Iu=me(Su,on),ku=Ce(Dr),Fu=Ce(Lr),Ou=Ee(ja),Uu=Ee(Na),ju=Re(Dr),Nu=Re(Lr),Xu=xa?function(t){var r=null==t?P:t.constructor;return"function"==typeof r&&r.prototype===t||"function"!=typeof t&&$e(t)?ln(t):ki(t)?xa(t):[]}:ln,Bu=Pe(!0),zu=Pe(),Yu=bi(function(t,r){if(null==t)return{};if("function"!=typeof r[0]){var r=sr(Ar(r),Qo);return an(t,Tr(to(t),r))}var e=oe(r[0],r[1],3);return un(t,function(t,r,n){return!e(t,r,n)})}),qu=bi(function(t,r){return null==t?{}:"function"==typeof r[0]?un(t,oe(r[0],r[1],3)):an(t,Ar(r))}),Gu=de(function(t,r,e){return r=r.toLowerCase(),t+(e?r.charAt(0).toUpperCase()+r.slice(1):r)}),Wu=de(function(t,r,e){return t+(e?"-":"")+r.toLowerCase()}),Vu=Me(),Zu=Me(!0),Qu=de(function(t,r,e){return t+(e?"_":"")+r.toLowerCase()}),$u=de(function(t,r,e){return t+(e?" ":"")+(r.charAt(0).toUpperCase()+r.slice(1))}),Ku=bi(function(t,r){try{return t.apply(P,r)}catch(e){return Di(e)?e:new Yo(e)}}),Hu=bi(function(t,r){return function(e){return Qe(e,t,r)}}),Ju=bi(function(t,r){return function(e){return Qe(t,e,r)}}),ts=ke("ceil"),rs=ke("floor"),es=ye(Ti,Pa),ns=ye(Gi,Ma),is=ke("round");return r.prototype=e.prototype,n.prototype=Fa(e.prototype),n.prototype.constructor=n,i.prototype=Fa(e.prototype),i.prototype.constructor=i,ot.prototype["delete"]=Wt,ot.prototype.get=Vt,ot.prototype.has=Zt,ot.prototype.set=Qt,$t.prototype.push=Ht,gi.Cache=ot,r.after=ci,r.ary=fi,r.assign=Du,r.at=eu,r.before=hi,r.bind=vu,r.bindAll=bu,r.bindKey=mu,r.callback=Ro,r.chain=Bn,r.chunk=gn,r.compact=dn,r.constant=Po,r.countBy=nu,r.create=Qi,r.curry=yu,r.curryRight=_u,r.debounce=pi,r.defaults=Lu,r.defaultsDeep=Iu,r.defer=xu,r.delay=Cu,r.difference=qa,r.drop=vn,r.dropRight=bn,r.dropRightWhile=mn,r.dropWhile=yn,r.fill=_n,r.filter=Kn,r.flatten=Cn,r.flattenDeep=Tn,r.flow=Tu,r.flowRight=wu,r.forEach=au,r.forEachRight=uu,r.forIn=Ou,r.forInRight=Uu,r.forOwn=ju,r.forOwnRight=Nu,r.functions=$i,r.groupBy=su,r.indexBy=lu,r.initial=En,r.intersection=Va,r.invert=Ji,r.invoke=cu,r.keys=Xu,r.keysIn=to,r.map=ti,r.mapKeys=Bu,r.mapValues=zu,r.matches=Ao,r.matchesProperty=So,r.memoize=gi,r.merge=Su,r.method=Hu,r.methodOf=Ju,r.mixin=Do,r.modArgs=Eu,r.negate=di,r.omit=Yu,r.once=vi,r.pairs=ro,r.partial=Ru,r.partialRight=Pu,r.partition=fu,r.pick=qu,r.pluck=ri,r.property=ko,r.propertyOf=Fo,r.pull=Mn,r.pullAt=Za,r.range=Oo,r.rearg=Mu,r.reject=ei,r.remove=An,r.rest=Sn,r.restParam=bi,r.set=no,r.shuffle=ii,r.slice=Dn,r.sortBy=ui,r.sortByAll=gu,r.sortByOrder=si,r.spread=mi,r.take=Ln,r.takeRight=In,r.takeRightWhile=kn,r.takeWhile=Fn,r.tap=zn,r.throttle=yi,r.thru=Yn,r.times=Uo,r.toArray=Vi,r.toPlainObject=Zi,r.transform=io,r.union=Ka,r.uniq=On,r.unzip=Un,
r.unzipWith=jn,r.values=oo,r.valuesIn=ao,r.where=li,r.without=Ha,r.wrap=_i,r.xor=Nn,r.zip=Ja,r.zipObject=Xn,r.zipWith=tu,r.backflow=wu,r.collect=ti,r.compose=wu,r.each=au,r.eachRight=uu,r.extend=Du,r.iteratee=Ro,r.methods=$i,r.object=Xn,r.select=Kn,r.tail=Sn,r.unique=On,Do(r,r),r.add=No,r.attempt=Ku,r.camelCase=Gu,r.capitalize=lo,r.ceil=ts,r.clone=xi,r.cloneDeep=Ci,r.deburr=co,r.endsWith=fo,r.escape=ho,r.escapeRegExp=po,r.every=$n,r.find=iu,r.findIndex=Ga,r.findKey=ku,r.findLast=ou,r.findLastIndex=Wa,r.findLastKey=Fu,r.findWhere=Hn,r.first=xn,r.floor=rs,r.get=Ki,r.gt=Ti,r.gte=wi,r.has=Hi,r.identity=Mo,r.includes=Jn,r.indexOf=wn,r.inRange=uo,r.isArguments=Ei,r.isArray=Au,r.isBoolean=Ri,r.isDate=Pi,r.isElement=Mi,r.isEmpty=Ai,r.isEqual=Si,r.isError=Di,r.isFinite=Li,r.isFunction=Ii,r.isMatch=Fi,r.isNaN=Oi,r.isNative=Ui,r.isNull=ji,r.isNumber=Ni,r.isObject=ki,r.isPlainObject=Xi,r.isRegExp=Bi,r.isString=zi,r.isTypedArray=Yi,r.isUndefined=qi,r.kebabCase=Wu,r.last=Rn,r.lastIndexOf=Pn,r.lt=Gi,r.lte=Wi,r.max=es,r.min=ns,r.noConflict=Lo,r.noop=Io,r.now=du,r.pad=go,r.padLeft=Vu,r.padRight=Zu,r.parseInt=vo,r.random=so,r.reduce=hu,r.reduceRight=pu,r.repeat=bo,r.result=eo,r.round=is,r.runInContext=R,r.size=oi,r.snakeCase=Qu,r.some=ai,r.sortedIndex=Qa,r.sortedLastIndex=$a,r.startCase=$u,r.startsWith=mo,r.sum=Xo,r.template=yo,r.trim=_o,r.trimLeft=xo,r.trimRight=Co,r.trunc=To,r.unescape=wo,r.uniqueId=jo,r.words=Eo,r.all=$n,r.any=ai,r.contains=Jn,r.eq=Si,r.detect=iu,r.foldl=hu,r.foldr=pu,r.head=xn,r.include=Jn,r.inject=hu,Do(r,function(){var t={};return Dr(r,function(e,n){r.prototype[n]||(t[n]=e)}),t}(),!1),r.sample=ni,r.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(r){return ni(r,t)}):ni(this.value())},r.VERSION=M,rr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){r[t].placeholder=r}),rr(["drop","take"],function(t,r){i.prototype[t]=function(e){var n=this.__filtered__;if(n&&!r)return new i(this);e=null==e?1:Ca(ma(e)||0,0);var o=this.clone();return n?o.__takeCount__=Ta(o.__takeCount__,e):o.__views__.push({size:e,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(r){return this.reverse()[t](r).reverse()}}),rr(["filter","map","takeWhile"],function(t,r){var e=r+1,n=e!=q;i.prototype[t]=function(t,r){var i=this.clone();return i.__iteratees__.push({iteratee:Xe(t,r,1),type:e}),i.__filtered__=i.__filtered__||n,i}}),rr(["first","last"],function(t,r){var e="take"+(r?"Right":"");i.prototype[t]=function(){return this[e](1).value()[0]}}),rr(["initial","rest"],function(t,r){var e="drop"+(r?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[e](1)}}),rr(["pluck","where"],function(t,r){var e=r?"filter":"map",n=r?Nr:ko;i.prototype[t]=function(t){return this[e](n(t))}}),i.prototype.compact=function(){return this.filter(Mo)},i.prototype.reject=function(t,r){return t=Xe(t,r,1),this.filter(function(r){return!t(r)})},i.prototype.slice=function(t,r){t=null==t?0:+t||0;var e=this;return e.__filtered__&&(t>0||0>r)?new i(e):(0>t?e=e.takeRight(-t):t&&(e=e.drop(t)),r!==P&&(r=+r||0,e=0>r?e.dropRight(-r):e.take(r-t)),e)},i.prototype.takeRightWhile=function(t,r){return this.reverse().takeWhile(t,r).reverse()},i.prototype.toArray=function(){return this.take(Ma)},Dr(i.prototype,function(t,e){var o=/^(?:filter|map|reject)|While$/.test(e),a=/^(?:first|last)$/.test(e),u=r[a?"take"+("last"==e?"Right":""):e];u&&(r.prototype[e]=function(){var r=a?[1]:arguments,e=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,c=s instanceof i,f=r[0],h=c||Au(s);h&&o&&"function"==typeof f&&1!=f.length&&(c=h=!1);var p=function(t){return a&&e?u(t,1)[0]:u.apply(P,lr([t],r))},g={func:Yn,args:[p],thisArg:P},d=c&&!l;if(a&&!e)return d?(s=s.clone(),s.__actions__.push(g),t.call(s)):u.call(P,this.value())[0];if(!a&&h){s=d?s:new i(this);var v=t.apply(s,r);return v.__actions__.push(g),new n(v,e)}return this.thru(p)})}),rr(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var e=(/^(?:replace|split)$/.test(t)?Jo:Ko)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);r.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?e.apply(this.value(),t):this[n](function(r){return e.apply(r,t)})}}),Dr(i.prototype,function(t,e){var n=r[e];if(n){var i=n.name,o=ka[i]||(ka[i]=[]);o.push({name:e,func:n})}}),ka[De(P,S).name]=[{name:"wrapper",func:P}],i.prototype.clone=_,i.prototype.reverse=J,i.prototype.value=nt,r.prototype.chain=qn,r.prototype.commit=Gn,r.prototype.concat=ru,r.prototype.plant=Wn,r.prototype.reverse=Vn,r.prototype.toString=Zn,r.prototype.run=r.prototype.toJSON=r.prototype.valueOf=r.prototype.value=Qn,r.prototype.collect=r.prototype.map,r.prototype.head=r.prototype.first,r.prototype.select=r.prototype.filter,r.prototype.tail=r.prototype.rest,r}var P,M="3.10.1",A=1,S=2,D=4,L=8,I=16,k=32,F=64,O=128,U=256,j=30,N="...",X=150,B=16,z=200,Y=1,q=2,G="Expected a function",W="__lodash_placeholder__",V="[object Arguments]",Z="[object Array]",Q="[object Boolean]",$="[object Date]",K="[object Error]",H="[object Function]",J="[object Map]",tt="[object Number]",rt="[object Object]",et="[object RegExp]",nt="[object Set]",it="[object String]",ot="[object WeakMap]",at="[object ArrayBuffer]",ut="[object Float32Array]",st="[object Float64Array]",lt="[object Int8Array]",ct="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",gt="[object Uint16Array]",dt="[object Uint32Array]",vt=/\b__p \+= '';/g,bt=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,yt=/&(?:amp|lt|gt|quot|#39|#96);/g,_t=/[&<>"'`]/g,xt=RegExp(yt.source),Ct=RegExp(_t.source),Tt=/<%-([\s\S]+?)%>/g,wt=/<%([\s\S]+?)%>/g,Et=/<%=([\s\S]+?)%>/g,Rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Pt=/^\w*$/,Mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,At=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,St=RegExp(At.source),Dt=/[\u0300-\u036f\ufe20-\ufe23]/g,Lt=/\\(\\)?/g,It=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kt=/\w*$/,Ft=/^0[xX]/,Ot=/^\[object .+?Constructor\]$/,Ut=/^\d+$/,jt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Nt=/($^)/,Xt=/['\n\r\u2028\u2029\\]/g,Bt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",r="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+r+")|"+t+"?"+r+"|"+t+"+|[0-9]+","g")}(),zt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Yt=-1,qt={};qt[ut]=qt[st]=qt[lt]=qt[ct]=qt[ft]=qt[ht]=qt[pt]=qt[gt]=qt[dt]=!0,qt[V]=qt[Z]=qt[at]=qt[Q]=qt[$]=qt[K]=qt[H]=qt[J]=qt[tt]=qt[rt]=qt[et]=qt[nt]=qt[it]=qt[ot]=!1;var Gt={};Gt[V]=Gt[Z]=Gt[at]=Gt[Q]=Gt[$]=Gt[ut]=Gt[st]=Gt[lt]=Gt[ct]=Gt[ft]=Gt[tt]=Gt[rt]=Gt[et]=Gt[it]=Gt[ht]=Gt[pt]=Gt[gt]=Gt[dt]=!0,Gt[K]=Gt[H]=Gt[J]=Gt[nt]=Gt[ot]=!1;var Wt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Vt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Zt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Qt={"function":!0,object:!0},$t={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Kt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=Qt[typeof r]&&r&&!r.nodeType&&r,Jt=Qt[typeof t]&&t&&!t.nodeType&&t,tr=Ht&&Jt&&"object"==typeof i&&i&&i.Object&&i,rr=Qt[typeof self]&&self&&self.Object&&self,er=Qt[typeof window]&&window&&window.Object&&window,nr=(Jt&&Jt.exports===Ht&&Ht,tr||er!==(this&&this.window)&&er||rr||this),ir=R();nr._=ir,n=function(){return ir}.call(r,e,r,t),!(n!==P&&(t.exports=n))}).call(this)}).call(r,e(18)(t),function(){return this}())},function(t,r,e){var n,i;!function(o,a){"object"==typeof t&&t.exports?t.exports=a(e(13)):(n=[e(13)],i=function(t){return a(t,o)}.apply(r,n),!(void 0!==i&&(t.exports=i)))}(this,function(t,r,e){function n(r){return t.isArray(r)?"array":t.isDate(r)?"date":t.isRegExp(r)?"regex":typeof r}function i(t){var r=n(t);return s[r]?r:"*"}function o(r){return t.each(a.call(arguments,1),function(e){t.each(e,function(t,e){s[i(t)](r,e,t)})}),r}var a=Array.prototype.slice,u=function(){for(var t=a.call(arguments,0);t.length;)u.rivet(t.shift())},s={"*":function(t,r,e){t[r]=e},object:function(t,r,e){t[r]=o(t[r]||{},e)},array:function(r,e,n){r[e]=[],t.each(n,function(t,n){s[i(t)](r[e],n,t)},this)}};return u.rivet=function(t){t.hasOwnProperty("extend")||(t.extend=function(r,e,n){return u.extend(t,r,e,n)}),t.hasOwnProperty("compose")||(t.compose=function(){return u.compose.apply(this,[t].concat(a.call(arguments,0)))}),t.hasOwnProperty("inherits")||(t.inherits=function(r,e,n){return u.inherits(t,r,e,n)}),t.hasOwnProperty("mixin")||(t.mixin=function(){return u.mixin.apply(this,[t].concat(a.call(arguments,0)))}),t.hasOwnProperty("punch")||(t.punch=function(){return u.punch.apply(this,[t].concat(a.call(arguments,0)))})},u.inherits=function(r,e,n,i){i=i||{};var a,s=function(){},l=function(){e.apply(this,arguments)};return"object"==typeof r?(r.hasOwnProperty("constructor")&&(l=r.constructor),a=r):(l=r,a=r.prototype),u.rivet(l),i.deep?o(l,e,n):t.defaults(l,e,n),s.prototype=e.prototype,l.prototype=new s,i.deep?o(l.prototype,a,{constructor:l}):t.extend(l.prototype,a,{constructor:l}),l.__super=e,l.__super__=e.prototype,l},u.extend=function(t,r,e,n){return u.inherits(r,t,e,n)},u.compose=function(){var r=a.call(arguments,0),e=r.shift();u.rivet(e);var n=t.reduce(r,function(t,r){return r.hasOwnProperty("_preInit")&&t.preInit.push(r._preInit),r.hasOwnProperty("_postInit")&&t.postInit.push(r._postInit),r=r.mixin||r,t.items.push(r),t},{items:[],preInit:[],postInit:[]}),i=e.extend({constructor:function(){var r=a.call(arguments,0);t.each(n.preInit,function(t){t.apply(this,r)},this),e.prototype.constructor.apply(this,r),t.each(n.postInit,function(t){t.apply(this,r)},this)}});return u.rivet(i),t.defaults(i.prototype,t.extend.apply(null,[{}].concat(n.items))),i},u.mixin=function(){var r=a.call(arguments,0),e=r.shift();return u.rivet(e),t.defaults(e.prototype,t.extend.apply(null,[{}].concat(r))),e},u.punch=function(){var r=a.call(arguments,0),e=r.shift();return u.rivet(e),t.extend(e.prototype,t.extend.apply(null,[{}].concat(r))),e},u})},function(t,r,e){function n(t,r,e){if(null!=t&&t.length){if(t.length&&!r)return Math.max.apply(Math,t);r=i(r,e);for(var n,o,a,u=-(1/0),s=-1,l=t.length;++s<l;)o=t[s],a=r(o,s,t),a>u&&(u=a,n=o);return n}return 1/0}var i=e(43);t.exports=n},function(t,r){function e(t){return t}t.exports=e},function(t,r,e){function n(t,r){if(null==t)return i;switch(typeof t){case"function":return"undefined"!=typeof r?function(e,n,i){return t.call(r,e,n,i)}:t;case"object":return function(r){return a(r,t)};case"string":case"number":return o(t)}}var i=e(42),o=e(44),a=e(48);t.exports=n},function(t,r){function e(t){return function(r){return r[t]}}t.exports=e},function(t,r,e){var n=e(46),i=Array.isArray||function(t){return n(t,"Array")};t.exports=i},function(t,r,e){function n(t,r){return i(t)===r}var i=e(47);t.exports=n},function(t,r){function e(t){return null===t?"Null":t===n?"Undefined":i.exec(o.call(t))[1]}var n,i=/^\[object (.*)\]$/,o=Object.prototype.toString;t.exports=e},function(t,r,e){function n(t,r){for(var e=-1,n=t.length;++e<n;)if(a(t[e],r))return!0;return!1}function i(t,r){for(var e=-1,i=r.length;++e<i;)if(!n(t,r[e]))return!1;return!0}function o(t,r){var e=!0;return u(r,function(r,n){return a(t[n],r)?void 0:e=!1}),e}function a(t,r){return t&&"object"==typeof t?s(t)&&s(r)?i(t,r):o(t,r):t===r}var u=e(14),s=e(45);t.exports=a},function(t,r,e){function n(){u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],a=!0;for(var t in{toString:null})a=!1}function i(t,r,e){var i,l=0;null==a&&n();for(i in t)if(o(r,t,i,e)===!1)break;if(a)for(var c=t.constructor,f=!!c&&t===c.prototype;(i=u[l++])&&("constructor"===i&&(f||!s(t,i))||t[i]===Object.prototype[i]||o(r,t,i,e)!==!1););}function o(t,r,e,n){return t.call(n,r[e],e,r)}var a,u,s=e(6);t.exports=i},function(t,r,e){function n(t){var r=[];return i(t,function(t,e){r.push(t)}),r}var i=e(14);t.exports=n},function(t,r,e){var n,i;n=[e(52)],i=function(t){function r(r,e){return-1!==t(r,e)}return r}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n;n=function(){function t(t,r,e){if(e=e||0,null==t)return-1;for(var n=t.length,i=0>e?n+e:e;n>i;){if(t[i]===r)return i;i++}return-1}return t}.call(r,e,r,t),!(void 0!==n&&(t.exports=n))},function(t,r,e){var n,i;n=[e(7),e(15),e(59)],i=function(t,r,e){function n(r){switch(t(r)){case"Object":return i(r);case"Array":return u(r);case"RegExp":return o(r);case"Date":return a(r);default:return r}}function i(t){return r(t)?e({},t):t}function o(t){var r="";return r+=t.multiline?"m":"",r+=t.global?"g":"",r+=t.ignoreCase?"i":"",new RegExp(t.source,r)}function a(t){return new Date(+t)}function u(t){return t.slice()}return n}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(53),e(16),e(7),e(15)],i=function(t,r,e,n){function i(r,n){switch(e(r)){case"Object":return o(r,n);case"Array":return a(r,n);default:return t(r)}}function o(t,e){if(n(t)){var o={};return r(t,function(t,r){this[r]=i(t,e)},o),o}return e?e(t):t}function a(t,r){for(var e=[],n=-1,o=t.length;++n<o;)e[n]=i(t[n],r);return e}return i}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(7)],i=function(t){function r(r,e){return t(r)===e}return r}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(55)],i=function(t){function r(r){return t(r,"Object")}return r}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(8)],i=function(t){function r(){o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=!0;for(var t in{toString:null})i=!1}function e(e,a,u){var s,l=0;null==i&&r();for(s in e)if(n(a,e,s,u)===!1)break;if(i)for(var c=e.constructor,f=!!c&&e===c.prototype;(s=o[l++])&&("constructor"===s&&(f||!t(e,s))||e[s]===Object.prototype[s]||n(a,e,s,u)!==!1););}function n(t,r,e,n){return t.call(n,r[e],e,r)}var i,o;return e}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(8),e(54),e(56)],i=function(t,r,e){function n(){var i,o,a,u,s=1;for(u=r(arguments[0]);a=arguments[s++];)for(i in a)t(a,i)&&(o=a[i],e(o)&&e(u[i])?u[i]=n(u[i],o):u[i]=r(o));return u}return n}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r,e){var n,i;n=[e(16)],i=function(t){function r(r,n){for(var i,o=0,a=arguments.length;++o<a;)i=arguments[o],null!=i&&t(i,e,r);return r}function e(t,r){this[r]=t}return r}.apply(r,n),!(void 0!==i&&(t.exports=i))},function(t,r){t.exports="\nprecision mediump float;\n\nuniform sampler2D backgroundSampler;\n\nuniform vec4 backgroundColor;\n\nvarying vec2 v_texCoord;\n\nvoid main() {\n    vec4 color = texture2D(backgroundSampler, v_texCoord);\n    gl_FragColor = vec4(backgroundColor.rgb, color.a);\n}\n"},function(t,r){t.exports="\nprecision mediump float;\n\nuniform sampler2D compositeSampler;\nuniform sampler2D nxSampler;\nuniform sampler2D nySampler;\nuniform sampler2D nzSampler;\nuniform sampler2D scalarSampler;\nuniform sampler2D lutSampler;\n\nuniform vec4 viewDir;\nuniform vec4 lightDir;\nuniform vec4 lightColor;\nuniform vec4 lightTerms;\n\nvarying vec2 v_texCoord;\n\n\nfloat convert(vec4 c) {\n    float r = c.r * 255.0;\n    float g = c.g * 255.0;\n    float b = c.b * 255.0;\n\n    float value = (r * 65536.0) + (g * 256.0) + b;\n    return ((value / 16777216.0) * 2.0) - 1.0;\n}\n\n\nvec4 scalarLookup(vec4 c) {\n    float r = c.r * 255.0;\n    float g = c.g * 255.0;\n    float b = c.b * 255.0;\n\n    float value = (r * 65536.0) + (g * 256.0) + b;\n    value = value / 16777216.0;\n\n    return texture2D(lutSampler, vec2(value, 0.5));\n}\n\n\nvoid main() {\n    // Sample the texture containing what we have composited so far\n    vec4 color = texture2D(compositeSampler, v_texCoord);\n\n    // Sample the new layer to be composited in\n    vec4 scalarColor = texture2D(scalarSampler, v_texCoord);\n\n    // Choose the fragment with the greater depth value\n    if (color.a > scalarColor.a) {\n        gl_FragColor = color;\n    } else {\n\n        vec4 nx = texture2D(nxSampler, v_texCoord);\n        vec4 ny = texture2D(nySampler, v_texCoord);\n        vec4 nz = texture2D(nzSampler, v_texCoord);\n        vec4 normal = normalize(vec4(convert(nx), convert(ny), convert(nz), 0.0));\n\n        vec4 lutColor = scalarLookup(scalarColor);\n\n        float ka = lightTerms[0];\n        float kd = lightTerms[1];\n        float ks = lightTerms[2];\n        float alpha = lightTerms[3];\n\n        vec4 vDir = normalize(viewDir);\n        vec4 lDir = normalize(lightDir);\n\n        // Calculate ambient term\n        vec4 ambientColor = lutColor * ka;\n\n        // This will be used in both diffuse and specular terms\n        float lDotN = dot(lDir, normal);\n\n        // Adding this check allows us to light whichever side is facing the light\n        if (lDotN < 0.0) {\n            normal = -1.0 * normal;\n            lDotN = dot(lDir, normal);\n        }\n\n        // Calculate diffuse term\n        vec4 diffuseColor = kd * lutColor * lDotN;\n\n        // Calculate specular term\n        vec4 R = (normal * 2.0 * lDotN) - lDir;\n        float specularTerm = ks * pow(dot(R, vDir), alpha);\n        vec4 specularColor = lightColor * specularTerm; // * step(-lDotN, 0.0);\n\n        // Clamp them individually and sum them up\n        vec3 fColor = clamp(ambientColor.rgb, 0.0, 1.0) + clamp(diffuseColor.rgb, 0.0, 1.0) + clamp(specularColor.rgb, 0.0, 1.0);\n        gl_FragColor = vec4(fColor.rgb, scalarColor.a);\n\n        // Various debugging outputs\n\n        // gl_FragColor = vec4(ambientColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(diffuseColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(specularColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(lutColor.rgb, scalarColor.a);\n        // gl_FragColor = vec4(((normal.rgb + 1.0) / 2.0), scalarColor.a);\n    }\n}\n"}]);